{{- if .Values.openlane.config.create }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: openlane-config
  namespace: openlane
  labels:
    app: openlane
    component: config
  annotations:
    # This checksum will trigger deployment restarts when the ConfigMap changes
    checksum/config: {{ .Values | toYaml | sha256sum }}
data:
  CORE_REFRESHINTERVAL: {{ .Values.openlane.coreConfiguration.refreshInterval | quote | default "10m" }}
  CORE_SERVER_DEV: {{ .Values.openlane.coreConfiguration.server.dev | quote | default "false" }}
  CORE_SERVER_LISTEN: {{ .Values.openlane.coreConfiguration.server.listen | quote | default ":17608" }}
  CORE_SERVER_METRICSPORT: {{ .Values.openlane.coreConfiguration.server.metricsPort | quote | default ":17609" }}
  CORE_SERVER_SHUTDOWNGRACEPERIOD: {{ .Values.openlane.coreConfiguration.server.shutdownGracePeriod | quote | default "10s" }}
  CORE_SERVER_READTIMEOUT: {{ .Values.openlane.coreConfiguration.server.readTimeout | quote | default "15s" }}
  CORE_SERVER_WRITETIMEOUT: {{ .Values.openlane.coreConfiguration.server.writeTimeout | quote | default "15s" }}
  CORE_SERVER_IDLETIMEOUT: {{ .Values.openlane.coreConfiguration.server.idleTimeout | quote | default "30s" }}
  CORE_SERVER_READHEADERTIMEOUT: {{ .Values.openlane.coreConfiguration.server.readHeaderTimeout | quote | default "2s" }}
  CORE_SERVER_TLS_ENABLED: {{ .Values.openlane.coreConfiguration.server.tls.enabled | quote | default "false" }}
  CORE_SERVER_TLS_CERTFILE: {{ .Values.openlane.coreConfiguration.server.tls.certFile | quote | default "server.crt" }}
  CORE_SERVER_TLS_CERTKEY: {{ .Values.openlane.coreConfiguration.server.tls.certKey | quote | default "server.key" }}
  CORE_SERVER_TLS_AUTOCERT: {{ .Values.openlane.coreConfiguration.server.tls.autoCert | quote | default "false" }}
  CORE_SERVER_CORS_ENABLED: {{ .Values.openlane.coreConfiguration.server.cors.enabled | quote | default "true" }}
{{- if .Values.openlane.coreConfiguration.server.cors.allowOrigins }}
  CORE_SERVER_CORS_ALLOWORIGINS: {{ join "," .Values.openlane.coreConfiguration.server.cors.allowOrigins }}
{{- else if .Values.domain }}
  CORE_SERVER_CORS_ALLOWORIGINS: "https://console.{{ .Values.domain }},https://docs.{{ .Values.domain }},https://www.{{ .Values.domain }}"
{{- else }}
  CORE_SERVER_CORS_ALLOWORIGINS: ""
{{- end }}
  CORE_SERVER_CORS_COOKIEINSECURE: {{ .Values.openlane.coreConfiguration.server.cors.cookieInsecure | quote }}
  CORE_SERVER_SECURE_ENABLED: {{ .Values.openlane.coreConfiguration.server.secure.enabled | quote | default "true" }}
  CORE_SERVER_SECURE_XSSPROTECTION: {{ .Values.openlane.coreConfiguration.server.secure.xssprotection | quote | default "1; mode=block" }}
  CORE_SERVER_SECURE_CONTENTTYPENOSNIFF: {{ .Values.openlane.coreConfiguration.server.secure.contenttypenosniff | quote | default "nosniff" }}
  CORE_SERVER_SECURE_XFRAMEOPTIONS: {{ .Values.openlane.coreConfiguration.server.secure.xframeoptions | quote | default "SAMEORIGIN" }}
  CORE_SERVER_SECURE_HSTSPRELOADENABLED: {{ .Values.openlane.coreConfiguration.server.secure.hstspreloadenabled | quote | default "false" }}
  CORE_SERVER_SECURE_HSTSMAXAGE: {{ .Values.openlane.coreConfiguration.server.secure.hstsmaxage | quote | default "31536000" }}
  CORE_SERVER_SECURE_CONTENTSECURITYPOLICY: {{ .Values.openlane.coreConfiguration.server.secure.contentsecuritypolicy | quote | default "default-src 'self'" }}
  CORE_SERVER_SECURE_REFERRERPOLICY: {{ .Values.openlane.coreConfiguration.server.secure.referrerpolicy | quote | default "same-origin" }}
  CORE_SERVER_SECURE_CSPREPORTONLY: {{ .Values.openlane.coreConfiguration.server.secure.cspreportonly | quote | default "false" }}
  CORE_SERVER_REDIRECTS_ENABLED: {{ .Values.openlane.coreConfiguration.server.redirects.enabled | quote | default "true" }}
  CORE_SERVER_REDIRECTS_CODE: {{ .Values.openlane.coreConfiguration.server.redirects.code | quote }}
  CORE_SERVER_CACHECONTROL_ENABLED: {{ .Values.openlane.coreConfiguration.server.cacheControl.enabled | quote | default "true" }}
  CORE_SERVER_CACHECONTROL_ETAGHEADERS: {{ join "," .Values.openlane.coreConfiguration.server.cacheControl.etagHeaders | quote }}
  CORE_SERVER_MIME_ENABLED: {{ .Values.openlane.coreConfiguration.server.mime.enabled | quote | default "true" }}
  CORE_SERVER_MIME_MIMETYPESFILE: {{ .Values.openlane.coreConfiguration.server.mime.mimeTypesFile | quote }}
  CORE_SERVER_MIME_DEFAULTCONTENTTYPE: {{ .Values.openlane.coreConfiguration.server.mime.defaultContentType | quote | default "application/data" }}
  CORE_SERVER_GRAPHPOOL_MAXWORKERS: {{ .Values.openlane.coreConfiguration.server.graphPool.maxWorkers | quote | default "100" }}
  CORE_SERVER_ENABLEGRAPHEXTENSIONS: {{ .Values.openlane.coreConfiguration.server.enableGraphExtensions | quote | default "true" }}
  CORE_SERVER_COMPLEXITYLIMIT: {{ .Values.openlane.coreConfiguration.server.complexityLimit | quote | default "100" }}
  CORE_SERVER_MAXRESULTLIMIT: {{ .Values.openlane.coreConfiguration.server.maxResultLimit | quote | default "100" }}
  CORE_SERVER_CSRFPROTECTION_ENABLED: {{ .Values.openlane.coreConfiguration.server.csrfProtection.enabled | quote | default "false" }}
  CORE_SERVER_CSRFPROTECTION_HEADER: {{ .Values.openlane.coreConfiguration.server.csrfProtection.header | quote | default "X-CSRF-Token" }}
  CORE_SERVER_CSRFPROTECTION_COOKIE: {{ .Values.openlane.coreConfiguration.server.csrfProtection.cookie | quote | default "ol.csrf-token" }}
  CORE_SERVER_CSRFPROTECTION_SECURE: {{ .Values.openlane.coreConfiguration.server.csrfProtection.secure | quote | default "true" }}
  CORE_SERVER_CSRFPROTECTION_SAMESITE: {{ .Values.openlane.coreConfiguration.server.csrfProtection.sameSite | quote | default "Lax" }}
  CORE_SERVER_CSRFPROTECTION_COOKIEHTTPONLY: {{ .Values.openlane.coreConfiguration.server.csrfProtection.cookieHttpOnly | quote | default "false" }}
  CORE_SERVER_CSRFPROTECTION_COOKIEDOMAIN: {{ .Values.openlane.coreConfiguration.server.csrfProtection.cookieDomain | quote }}
  CORE_SERVER_CSRFPROTECTION_COOKIEPATH: {{ .Values.openlane.coreConfiguration.server.csrfProtection.cookiePath | quote | default "/" }}
  CORE_SERVER_DEFAULTTRUSTCENTERDOMAIN: {{ .Values.openlane.coreConfiguration.server.defaultTrustCenterDomain | quote }}
  CORE_SERVER_FIELDLEVELENCRYPTION_ENABLED: {{ .Values.openlane.coreConfiguration.server.fieldLevelEncryption.enabled | quote | default "false" }}
  CORE_SERVER_TRUSTCENTERCNAMETARGET: {{ .Values.openlane.coreConfiguration.server.trustCenterCnameTarget | quote }}
  CORE_ENTCONFIG_ENTITYTYPES: {{ join "," .Values.openlane.coreConfiguration.entConfig.entityTypes | quote }}
  CORE_ENTCONFIG_SUMMARIZER_TYPE: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.type | quote | default "lexrank" }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_PROVIDER: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.provider | quote | default "none" }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_ANTHROPIC_BETAHEADER: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.anthropic.betaHeader | quote }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_ANTHROPIC_LEGACYTEXTCOMPLETION: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.anthropic.legacyTextCompletion | quote }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_ANTHROPIC_BASEURL: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.anthropic.baseURL | quote }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_CLOUDFLARE_ACCOUNTID: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.cloudflare.accountID | quote }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_CLOUDFLARE_SERVERURL: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.cloudflare.serverURL | quote }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_OPENAI_URL: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.openai.url | quote }}
  CORE_ENTCONFIG_SUMMARIZER_LLM_OPENAI_ORGANIZATIONID: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.llm.openai.organizationID | quote }}
  CORE_ENTCONFIG_SUMMARIZER_MAXIMUMSENTENCES: {{ .Values.openlane.coreConfiguration.entConfig.summarizer.maximumSentences | quote | default "60" }}
  CORE_ENTCONFIG_WINDMILL_ENABLED: {{ .Values.openlane.coreConfiguration.entConfig.windmill.enabled | quote | default "false" }}
  CORE_ENTCONFIG_WINDMILL_BASEURL: {{ .Values.openlane.coreConfiguration.entConfig.windmill.baseURL | quote | default "https://app.windmill.dev" }}
  CORE_ENTCONFIG_WINDMILL_WORKSPACE: {{ .Values.openlane.coreConfiguration.entConfig.windmill.workspace | quote }}
  CORE_ENTCONFIG_WINDMILL_DEFAULTTIMEOUT: {{ .Values.openlane.coreConfiguration.entConfig.windmill.defaultTimeout | quote | default "30s" }}
  CORE_ENTCONFIG_WINDMILL_TIMEZONE: {{ .Values.openlane.coreConfiguration.entConfig.windmill.timezone | quote | default "UTC" }}
  CORE_ENTCONFIG_WINDMILL_ONFAILURESCRIPT: {{ .Values.openlane.coreConfiguration.entConfig.windmill.onFailureScript | quote }}
  CORE_ENTCONFIG_WINDMILL_ONSUCCESSSCRIPT: {{ .Values.openlane.coreConfiguration.entConfig.windmill.onSuccessScript | quote }}
  CORE_ENTCONFIG_MAXPOOLSIZE: {{ .Values.openlane.coreConfiguration.entConfig.maxPoolSize | quote | default "100" }}
  CORE_ENTCONFIG_MODULES_ENABLED: {{ .Values.openlane.coreConfiguration.entConfig.modules.enabled | quote | default "true" }}
  CORE_ENTCONFIG_MODULES_USESANDBOX: {{ .Values.openlane.coreConfiguration.entConfig.modules.useSandbox | quote | default "false" }}
  CORE_ENTCONFIG_MAXSCHEMAIMPORTSIZE: {{ .Values.openlane.coreConfiguration.entConfig.maxSchemaImportSize | quote | default "262144" }}
  CORE_ENTCONFIG_EMAILVALIDATION_ENABLED: {{ .Values.openlane.coreConfiguration.entConfig.emailValidation.enabled | quote | default "false" }}
  CORE_ENTCONFIG_EMAILVALIDATION_ENABLEAUTOUPDATEDISPOSABLE: {{ .Values.openlane.coreConfiguration.entConfig.emailValidation.enableAutoUpdateDisposable | quote | default "true" }}
  CORE_ENTCONFIG_EMAILVALIDATION_ENABLEGRAVATARCHECK: {{ .Values.openlane.coreConfiguration.entConfig.emailValidation.enableGravatarCheck | quote | default "true" }}
  CORE_ENTCONFIG_EMAILVALIDATION_ENABLESMTPCHECK: {{ .Values.openlane.coreConfiguration.entConfig.emailValidation.enableSMTPCheck | quote | default "false" }}
  CORE_ENTCONFIG_EMAILVALIDATION_ALLOWEDEMAILTYPES_DISPOSABLE: {{ .Values.openlane.coreConfiguration.entConfig.emailValidation.allowedEmailTypes.disposable | quote | default "false" }}
  CORE_ENTCONFIG_EMAILVALIDATION_ALLOWEDEMAILTYPES_FREE: {{ .Values.openlane.coreConfiguration.entConfig.emailValidation.allowedEmailTypes.free | quote | default "false" }}
  CORE_ENTCONFIG_EMAILVALIDATION_ALLOWEDEMAILTYPES_ROLE: {{ .Values.openlane.coreConfiguration.entConfig.emailValidation.allowedEmailTypes.role | quote | default "false" }}
  CORE_AUTH_ENABLED: {{ .Values.openlane.coreConfiguration.auth.enabled | quote | default "true" }}
  CORE_AUTH_TOKEN_KID: {{ .Values.openlane.coreConfiguration.auth.token.kid | quote }}
{{- if .Values.openlane.coreConfiguration.auth.token.audience }}
  CORE_AUTH_TOKEN_AUDIENCE: {{ .Values.openlane.coreConfiguration.auth.token.audience }}
{{- else if .Values.domain }}
  CORE_AUTH_TOKEN_AUDIENCE: "https://api.{{ .Values.domain }}"
{{- else }}
  CORE_AUTH_TOKEN_AUDIENCE: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.auth.token.refreshAudience }}
  CORE_AUTH_TOKEN_REFRESHAUDIENCE: {{ .Values.openlane.coreConfiguration.auth.token.refreshAudience }}
{{- else if .Values.domain }}
  CORE_AUTH_TOKEN_REFRESHAUDIENCE: "https://api.{{ .Values.domain }}"
{{- else }}
  CORE_AUTH_TOKEN_REFRESHAUDIENCE: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.auth.token.issuer }}
  CORE_AUTH_TOKEN_ISSUER: {{ .Values.openlane.coreConfiguration.auth.token.issuer }}
{{- else if .Values.domain }}
  CORE_AUTH_TOKEN_ISSUER: "https://api.{{ .Values.domain }}"
{{- else }}
  CORE_AUTH_TOKEN_ISSUER: ""
{{- end }}
  CORE_AUTH_TOKEN_ACCESSDURATION: {{ .Values.openlane.coreConfiguration.auth.token.accessDuration | quote | default "1h" }}
  CORE_AUTH_TOKEN_REFRESHDURATION: {{ .Values.openlane.coreConfiguration.auth.token.refreshDuration | quote | default "2h" }}
  CORE_AUTH_TOKEN_REFRESHOVERLAP: {{ .Values.openlane.coreConfiguration.auth.token.refreshOverlap | quote | default "-15m" }}
{{- if .Values.openlane.coreConfiguration.auth.token.jwksEndpoint }}
  CORE_AUTH_TOKEN_JWKSENDPOINT: {{ .Values.openlane.coreConfiguration.auth.token.jwksEndpoint }}
{{- else if .Values.domain }}
  CORE_AUTH_TOKEN_JWKSENDPOINT: "https://api.{{ .Values.domain }}/.well-known/jwks.json"
{{- else }}
  CORE_AUTH_TOKEN_JWKSENDPOINT: ""
{{- end }}
  CORE_AUTH_TOKEN_GENERATEKEYS: {{ .Values.openlane.coreConfiguration.auth.token.generateKeys | quote | default "true" }}
  CORE_AUTH_SUPPORTEDPROVIDERS: {{ join "," .Values.openlane.coreConfiguration.auth.supportedProviders | quote }}
  CORE_AUTH_PROVIDERS_REDIRECTURL: {{ .Values.openlane.coreConfiguration.auth.providers.redirectUrl | quote | default "http://localhost:3001/api/auth/callback/theopenlane" }}
  CORE_AUTH_PROVIDERS_GITHUB_CLIENTID: {{ .Values.openlane.coreConfiguration.auth.providers.github.clientId | quote }}
{{- if .Values.openlane.coreConfiguration.auth.providers.github.clientEndpoint }}
  CORE_AUTH_PROVIDERS_GITHUB_CLIENTENDPOINT: {{ .Values.openlane.coreConfiguration.auth.providers.github.clientEndpoint }}
{{- else if .Values.domain }}
  CORE_AUTH_PROVIDERS_GITHUB_CLIENTENDPOINT: "https://api.{{ .Values.domain }}"
{{- else }}
  CORE_AUTH_PROVIDERS_GITHUB_CLIENTENDPOINT: ""
{{- end }}
  CORE_AUTH_PROVIDERS_GITHUB_SCOPES: {{ join "," .Values.openlane.coreConfiguration.auth.providers.github.scopes | quote }}
  CORE_AUTH_PROVIDERS_GITHUB_REDIRECTURL: {{ .Values.openlane.coreConfiguration.auth.providers.github.redirectUrl | quote | default "/v1/github/callback" }}
  CORE_AUTH_PROVIDERS_GOOGLE_CLIENTID: {{ .Values.openlane.coreConfiguration.auth.providers.google.clientId | quote }}
{{- if .Values.openlane.coreConfiguration.auth.providers.google.clientEndpoint }}
  CORE_AUTH_PROVIDERS_GOOGLE_CLIENTENDPOINT: {{ .Values.openlane.coreConfiguration.auth.providers.google.clientEndpoint }}
{{- else if .Values.domain }}
  CORE_AUTH_PROVIDERS_GOOGLE_CLIENTENDPOINT: "https://api.{{ .Values.domain }}"
{{- else }}
  CORE_AUTH_PROVIDERS_GOOGLE_CLIENTENDPOINT: ""
{{- end }}
  CORE_AUTH_PROVIDERS_GOOGLE_SCOPES: {{ join "," .Values.openlane.coreConfiguration.auth.providers.google.scopes | quote }}
  CORE_AUTH_PROVIDERS_GOOGLE_REDIRECTURL: {{ .Values.openlane.coreConfiguration.auth.providers.google.redirectUrl | quote | default "/v1/google/callback" }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_ENABLED: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.enabled | quote | default "true" }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_DISPLAYNAME: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.displayName | quote }}
{{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.relyingPartyId }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_RELYINGPARTYID: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.relyingPartyId }}
{{- else if .Values.domain }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_RELYINGPARTYID: "{{ .Values.domain }}"
{{- else }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_RELYINGPARTYID: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.requestOrigins }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_REQUESTORIGINS: {{ join "," .Values.openlane.coreConfiguration.auth.providers.webauthn.requestOrigins }}
{{- else if .Values.domain }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_REQUESTORIGINS: "https://console.{{ .Values.domain }}"
{{- else }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_REQUESTORIGINS: ""
{{- end }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_MAXDEVICES: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.maxDevices | quote | default "10" }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_ENFORCETIMEOUT: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.enforceTimeout | quote | default "true" }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_TIMEOUT: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.timeout | quote | default "60s" }}
  CORE_AUTH_PROVIDERS_WEBAUTHN_DEBUG: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.debug | quote | default "false" }}
  CORE_AUTHZ_ENABLED: {{ .Values.openlane.coreConfiguration.authz.enabled | quote | default "true" }}
  CORE_AUTHZ_STORENAME: {{ .Values.openlane.coreConfiguration.authz.storeName | quote | default "openlane" }}
  CORE_AUTHZ_HOSTURL: {{ .Values.openlane.coreConfiguration.authz.hostUrl | quote | default "https://authz.theopenlane.io" }}
  CORE_AUTHZ_STOREID: {{ .Values.openlane.coreConfiguration.authz.storeId | quote }}
  CORE_AUTHZ_MODELID: {{ .Values.openlane.coreConfiguration.authz.modelId | quote }}
  CORE_AUTHZ_CREATENEWMODEL: {{ .Values.openlane.coreConfiguration.authz.createNewModel | quote | default "false" }}
  CORE_AUTHZ_MODELFILE: {{ .Values.openlane.coreConfiguration.authz.modelFile | quote | default "fga/model/model.fga" }}
  CORE_AUTHZ_CREDENTIALS_CLIENTID: {{ .Values.openlane.coreConfiguration.authz.credentials.clientId | quote }}
  CORE_AUTHZ_CREDENTIALS_AUDIENCE: {{ .Values.openlane.coreConfiguration.authz.credentials.audience | quote }}
  CORE_AUTHZ_CREDENTIALS_ISSUER: {{ .Values.openlane.coreConfiguration.authz.credentials.issuer | quote }}
  CORE_AUTHZ_CREDENTIALS_SCOPES: {{ .Values.openlane.coreConfiguration.authz.credentials.scopes | quote }}
  CORE_AUTHZ_IGNOREDUPLICATEKEYERROR: {{ .Values.openlane.coreConfiguration.authz.ignoreDuplicateKeyError | quote | default "true" }}
  CORE_DB_DEBUG: {{ .Values.openlane.coreConfiguration.db.debug | quote | default "false" }}
  CORE_DB_DATABASENAME: {{ .Values.openlane.coreConfiguration.db.databaseName | quote | default "openlane" }}
  CORE_DB_DRIVERNAME: {{ .Values.openlane.coreConfiguration.db.driverName | quote | default "pgx" }}
  CORE_DB_MULTIWRITE: {{ .Values.openlane.coreConfiguration.db.multiWrite | quote | default "false" }}
  CORE_DB_CACHETTL: {{ .Values.openlane.coreConfiguration.db.cacheTTL | quote | default "1s" }}
  CORE_DB_RUNMIGRATIONS: {{ .Values.openlane.coreConfiguration.db.runMigrations | quote | default "true" }}
  CORE_DB_MIGRATIONPROVIDER: {{ .Values.openlane.coreConfiguration.db.migrationProvider | quote | default "atlas" }}
  CORE_DB_ENABLEHISTORY: {{ .Values.openlane.coreConfiguration.db.enableHistory | quote | default "false" }}
  CORE_DB_MAXCONNECTIONS: {{ .Values.openlane.coreConfiguration.db.maxConnections | quote | default "0" }}
  CORE_DB_MAXIDLECONNECTIONS: {{ .Values.openlane.coreConfiguration.db.maxIdleConnections | quote | default "0" }}
  CORE_JOBQUEUE_RUNMIGRATIONS: {{ .Values.openlane.coreConfiguration.jobQueue.runMigrations | quote | default "false" }}
  CORE_REDIS_ENABLED: {{ .Values.openlane.coreConfiguration.redis.enabled | quote | default "true" }}
  CORE_REDIS_ADDRESS: {{ .Values.openlane.coreConfiguration.redis.address | quote | default "localhost:6379" }}
  CORE_REDIS_NAME: {{ .Values.openlane.coreConfiguration.redis.name | quote }}
  CORE_REDIS_USERNAME: {{ .Values.openlane.coreConfiguration.redis.username | quote }}
  CORE_REDIS_PASSWORD: {{ .Values.openlane.coreConfiguration.redis.password | quote }}
  CORE_REDIS_DB: {{ .Values.openlane.coreConfiguration.redis.db | quote | default "0" }}
  CORE_REDIS_DIALTIMEOUT: {{ .Values.openlane.coreConfiguration.redis.dialTimeout | quote | default "5s" }}
  CORE_REDIS_READTIMEOUT: {{ .Values.openlane.coreConfiguration.redis.readTimeout | quote | default "0" }}
  CORE_REDIS_WRITETIMEOUT: {{ .Values.openlane.coreConfiguration.redis.writeTimeout | quote | default "0" }}
  CORE_REDIS_MAXRETRIES: {{ .Values.openlane.coreConfiguration.redis.maxRetries | quote | default "3" }}
  CORE_REDIS_MINIDLECONNS: {{ .Values.openlane.coreConfiguration.redis.minIdleConns | quote | default "0" }}
  CORE_REDIS_MAXIDLECONNS: {{ .Values.openlane.coreConfiguration.redis.maxIdleConns | quote | default "0" }}
  CORE_REDIS_MAXACTIVECONNS: {{ .Values.openlane.coreConfiguration.redis.maxActiveConns | quote | default "0" }}
  CORE_TRACER_ENABLED: {{ .Values.openlane.coreConfiguration.tracer.enabled | quote | default "false" }}
  CORE_TRACER_PROVIDER: {{ .Values.openlane.coreConfiguration.tracer.provider | quote | default "stdout" }}
  CORE_TRACER_ENVIRONMENT: {{ .Values.openlane.coreConfiguration.tracer.environment | quote | default "development" }}
  CORE_TRACER_STDOUT_PRETTY: {{ .Values.openlane.coreConfiguration.tracer.stdout.pretty | quote | default "true" }}
  CORE_TRACER_STDOUT_DISABLETIMESTAMP: {{ .Values.openlane.coreConfiguration.tracer.stdout.disableTimestamp | quote | default "false" }}
  CORE_TRACER_OTLP_ENDPOINT: {{ .Values.openlane.coreConfiguration.tracer.otlp.endpoint | quote | default "localhost:4317" }}
  CORE_TRACER_OTLP_INSECURE: {{ .Values.openlane.coreConfiguration.tracer.otlp.insecure | quote | default "true" }}
  CORE_TRACER_OTLP_CERTIFICATE: {{ .Values.openlane.coreConfiguration.tracer.otlp.certificate | quote }}
  CORE_TRACER_OTLP_HEADERS: {{ join "," .Values.openlane.coreConfiguration.tracer.otlp.headers | quote }}
  CORE_TRACER_OTLP_COMPRESSION: {{ .Values.openlane.coreConfiguration.tracer.otlp.compression | quote }}
  CORE_TRACER_OTLP_TIMEOUT: {{ .Values.openlane.coreConfiguration.tracer.otlp.timeout | quote | default "10s" }}
  CORE_EMAIL_COMPANYNAME: {{ .Values.openlane.coreConfiguration.email.companyName | quote }}
  CORE_EMAIL_COMPANYADDRESS: {{ .Values.openlane.coreConfiguration.email.companyAddress | quote }}
  CORE_EMAIL_CORPORATION: {{ .Values.openlane.coreConfiguration.email.corporation | quote }}
  CORE_EMAIL_YEAR: {{ .Values.openlane.coreConfiguration.email.year | quote }}
{{- if .Values.openlane.coreConfiguration.email.fromEmail }}
  CORE_EMAIL_FROMEMAIL: {{ .Values.openlane.coreConfiguration.email.fromEmail }}
{{- else if .Values.domain }}
  CORE_EMAIL_FROMEMAIL: "no-reply@mail.{{ .Values.domain }}"
{{- else }}
  CORE_EMAIL_FROMEMAIL: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.supportEmail }}
  CORE_EMAIL_SUPPORTEMAIL: {{ .Values.openlane.coreConfiguration.email.supportEmail }}
{{- else if .Values.domain }}
  CORE_EMAIL_SUPPORTEMAIL: "support@{{ .Values.domain }}"
{{- else }}
  CORE_EMAIL_SUPPORTEMAIL: ""
{{- end }}
  CORE_EMAIL_LOGOURL: {{ .Values.openlane.coreConfiguration.email.logoURL | quote }}
{{- if .Values.openlane.coreConfiguration.email.urls.root }}
  CORE_EMAIL_URLS_ROOT: {{ .Values.openlane.coreConfiguration.email.urls.root }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_ROOT: "https://www.{{ .Values.domain }}"
{{- else }}
  CORE_EMAIL_URLS_ROOT: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.urls.product }}
  CORE_EMAIL_URLS_PRODUCT: {{ .Values.openlane.coreConfiguration.email.urls.product }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_PRODUCT: "https://console.{{ .Values.domain }}"
{{- else }}
  CORE_EMAIL_URLS_PRODUCT: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.urls.docs }}
  CORE_EMAIL_URLS_DOCS: {{ .Values.openlane.coreConfiguration.email.urls.docs }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_DOCS: "https://docs.{{ .Values.domain }}"
{{- else }}
  CORE_EMAIL_URLS_DOCS: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.urls.verify }}
  CORE_EMAIL_URLS_VERIFY: {{ .Values.openlane.coreConfiguration.email.urls.verify }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_VERIFY: "https://console.{{ .Values.domain }}/verify"
{{- else }}
  CORE_EMAIL_URLS_VERIFY: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.urls.invite }}
  CORE_EMAIL_URLS_INVITE: {{ .Values.openlane.coreConfiguration.email.urls.invite }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_INVITE: "https://console.{{ .Values.domain }}/invite"
{{- else }}
  CORE_EMAIL_URLS_INVITE: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.urls.reset }}
  CORE_EMAIL_URLS_RESET: {{ .Values.openlane.coreConfiguration.email.urls.reset }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_RESET: "https://console.{{ .Values.domain }}/password-reset"
{{- else }}
  CORE_EMAIL_URLS_RESET: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.urls.verifySubscriber }}
  CORE_EMAIL_URLS_VERIFYSUBSCRIBER: {{ .Values.openlane.coreConfiguration.email.urls.verifySubscriber }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_VERIFYSUBSCRIBER: "https://console.{{ .Values.domain }}/subscriber-verify"
{{- else }}
  CORE_EMAIL_URLS_VERIFYSUBSCRIBER: ""
{{- end }}
{{- if .Values.openlane.coreConfiguration.email.urls.verifyBilling }}
  CORE_EMAIL_URLS_VERIFYBILLING: {{ .Values.openlane.coreConfiguration.email.urls.verifyBilling }}
{{- else if .Values.domain }}
  CORE_EMAIL_URLS_VERIFYBILLING: "https://console.{{ .Values.domain }}/verify-billing"
{{- else }}
  CORE_EMAIL_URLS_VERIFYBILLING: ""
{{- end }}
  CORE_EMAIL_TEMPLATESPATH: {{ .Values.openlane.coreConfiguration.email.templatesPath | quote }}
  CORE_SESSIONS_MAXAGE: {{ .Values.openlane.coreConfiguration.sessions.maxAge | quote | default "3600" }}
  CORE_SESSIONS_SECURE: {{ .Values.openlane.coreConfiguration.sessions.secure | quote | default "true" }}
  CORE_SESSIONS_HTTPONLY: {{ .Values.openlane.coreConfiguration.sessions.httpOnly | quote | default "true" }}
  CORE_SESSIONS_SAMESITE: {{ .Values.openlane.coreConfiguration.sessions.sameSite | quote | default "Strict" }}
  CORE_TOTP_ENABLED: {{ .Values.openlane.coreConfiguration.totp.enabled | quote | default "true" }}
  CORE_TOTP_CODELENGTH: {{ .Values.openlane.coreConfiguration.totp.codeLength | quote | default "6" }}
{{- if .Values.openlane.coreConfiguration.totp.issuer }}
  CORE_TOTP_ISSUER: {{ .Values.openlane.coreConfiguration.totp.issuer }}
{{- else if .Values.domain }}
  CORE_TOTP_ISSUER: "{{ .Values.domain }}"
{{- else }}
  CORE_TOTP_ISSUER: ""
{{- end }}
  CORE_TOTP_REDIS: {{ .Values.openlane.coreConfiguration.totp.redis | quote | default "true" }}
  CORE_TOTP_RECOVERYCODECOUNT: {{ .Values.openlane.coreConfiguration.totp.recoveryCodeCount | quote | default "16" }}
  CORE_TOTP_RECOVERYCODELENGTH: {{ .Values.openlane.coreConfiguration.totp.recoveryCodeLength | quote | default "8" }}
  CORE_RATELIMIT_ENABLED: {{ .Values.openlane.coreConfiguration.ratelimit.enabled | quote | default "false" }}
  CORE_RATELIMIT_LIMIT: {{ .Values.openlane.coreConfiguration.ratelimit.limit | quote | default "10" }}
  CORE_RATELIMIT_BURST: {{ .Values.openlane.coreConfiguration.ratelimit.burst | quote | default "30" }}
  CORE_RATELIMIT_EXPIRES: {{ .Values.openlane.coreConfiguration.ratelimit.expires | quote | default "10m" }}
  CORE_OBJECTSTORAGE_ENABLED: {{ .Values.openlane.coreConfiguration.objectStorage.enabled | quote | default "true" }}
  CORE_OBJECTSTORAGE_PROVIDER: {{ .Values.openlane.coreConfiguration.objectStorage.provider | quote }}
  CORE_OBJECTSTORAGE_REGION: {{ .Values.openlane.coreConfiguration.objectStorage.region | quote }}
  CORE_OBJECTSTORAGE_DEFAULTBUCKET: {{ .Values.openlane.coreConfiguration.objectStorage.defaultBucket | quote | default "file_uploads" }}
  CORE_OBJECTSTORAGE_LOCALURL: {{ .Values.openlane.coreConfiguration.objectStorage.localURL | quote | default "http://localhost:17608/files/" }}
  CORE_OBJECTSTORAGE_KEYS: {{ join "," .Values.openlane.coreConfiguration.objectStorage.keys | quote | default "uploadFile" }}
  CORE_OBJECTSTORAGE_MAXSIZEMB: {{ .Values.openlane.coreConfiguration.objectStorage.maxSizeMB | quote }}
  CORE_OBJECTSTORAGE_MAXMEMORYMB: {{ .Values.openlane.coreConfiguration.objectStorage.maxMemoryMB | quote }}
  CORE_OBJECTSTORAGE_ENDPOINT: {{ .Values.openlane.coreConfiguration.objectStorage.endpoint | quote }}
  CORE_OBJECTSTORAGE_USEPATHSTYLE: {{ .Values.openlane.coreConfiguration.objectStorage.usePathStyle | quote }}
  CORE_SUBSCRIPTION_ENABLED: {{ .Values.openlane.coreConfiguration.subscription.enabled | quote | default "false" }}
  CORE_SUBSCRIPTION_PUBLICSTRIPEKEY: {{ .Values.openlane.coreConfiguration.subscription.publicStripeKey | quote }}
{{- if .Values.openlane.coreConfiguration.subscription.stripeWebhookURL }}
  CORE_SUBSCRIPTION_STRIPEWEBHOOKURL: {{ .Values.openlane.coreConfiguration.subscription.stripeWebhookURL }}
{{- else if .Values.domain }}
  CORE_SUBSCRIPTION_STRIPEWEBHOOKURL: "https://api.{{ .Values.domain }}/v1/stripe/webhook"
{{- else }}
  CORE_SUBSCRIPTION_STRIPEWEBHOOKURL: "https://api.openlane.com/v1/stripe/webhook"
{{- end }}
{{- if .Values.openlane.coreConfiguration.subscription.stripeBillingPortalSuccessURL }}
  CORE_SUBSCRIPTION_STRIPEBILLINGPORTALSUCCESSURL: {{ .Values.openlane.coreConfiguration.subscription.stripeBillingPortalSuccessURL }}
{{- else if .Values.domain }}
  CORE_SUBSCRIPTION_STRIPEBILLINGPORTALSUCCESSURL: "https://console.{{ .Values.domain }}/organization-settings/billing"
{{- else }}
  CORE_SUBSCRIPTION_STRIPEBILLINGPORTALSUCCESSURL: "https://console.openlane.com/organization-settings/billing"
{{- end }}
{{- if .Values.openlane.coreConfiguration.subscription.stripeCancellationReturnURL }}
  CORE_SUBSCRIPTION_STRIPECANCELLATIONRETURNURL: {{ .Values.openlane.coreConfiguration.subscription.stripeCancellationReturnURL }}
{{- else if .Values.domain }}
  CORE_SUBSCRIPTION_STRIPECANCELLATIONRETURNURL: "https://console.{{ .Values.domain }}/organization-settings/billing"
{{- else }}
  CORE_SUBSCRIPTION_STRIPECANCELLATIONRETURNURL: "https://console.theopenlane.io/organization-settings/billing"
{{- end }}
  CORE_SUBSCRIPTION_STRIPEWEBHOOKEVENTS: {{ join "," .Values.openlane.coreConfiguration.subscription.stripeWebhookEvents | quote }}
  CORE_KEYWATCHER_ENABLED: {{ .Values.openlane.coreConfiguration.keywatcher.enabled | quote | default "false" }}
  CORE_KEYWATCHER_KEYDIR: {{ .Values.openlane.coreConfiguration.keywatcher.keyDir | quote | default "./keys" }}
  CORE_KEYWATCHER_EXTERNALSECRETSINTEGRATION: {{ .Values.openlane.coreConfiguration.keywatcher.externalSecretsIntegration | quote | default "false" }}
  CORE_SLACK_NEWSUBSCRIBERMESSAGEFILE: {{ .Values.openlane.coreConfiguration.slack.newSubscriberMessageFile | quote }}
  CORE_SLACK_NEWUSERMESSAGEFILE: {{ .Values.openlane.coreConfiguration.slack.newUserMessageFile | quote }}
  CORE_INTEGRATIONOAUTHPROVIDER_REDIRECTURL: {{ .Values.openlane.coreConfiguration.integrationOauthProvider.redirectUrl | quote }}
{{- if .Values.openlane.coreConfiguration.integrationOauthProvider.successRedirectUrl }}
  CORE_INTEGRATIONOAUTHPROVIDER_SUCCESSREDIRECTURL: {{ .Values.openlane.coreConfiguration.integrationOauthProvider.successRedirectUrl }}
{{- else if .Values.domain }}
  CORE_INTEGRATIONOAUTHPROVIDER_SUCCESSREDIRECTURL: "https://console.{{ .Values.domain }}/organization-settings/integrations"
{{- else }}
  CORE_INTEGRATIONOAUTHPROVIDER_SUCCESSREDIRECTURL: ""
{{- end }}
  CORE_INTEGRATIONOAUTHPROVIDER_GITHUB_CLIENTID: {{ .Values.openlane.coreConfiguration.integrationOauthProvider.github.clientId | quote }}
{{- if .Values.openlane.coreConfiguration.integrationOauthProvider.github.clientEndpoint }}
  CORE_INTEGRATIONOAUTHPROVIDER_GITHUB_CLIENTENDPOINT: {{ .Values.openlane.coreConfiguration.integrationOauthProvider.github.clientEndpoint }}
{{- else if .Values.domain }}
  CORE_INTEGRATIONOAUTHPROVIDER_GITHUB_CLIENTENDPOINT: "https://api.{{ .Values.domain }}"
{{- else }}
  CORE_INTEGRATIONOAUTHPROVIDER_GITHUB_CLIENTENDPOINT: ""
{{- end }}
  CORE_INTEGRATIONOAUTHPROVIDER_GITHUB_SCOPES: {{ join "," .Values.openlane.coreConfiguration.integrationOauthProvider.github.scopes | quote }}
  CORE_INTEGRATIONOAUTHPROVIDER_SLACK_CLIENTID: {{ .Values.openlane.coreConfiguration.integrationOauthProvider.slack.clientId | quote }}
{{- if .Values.openlane.coreConfiguration.integrationOauthProvider.slack.clientEndpoint }}
  CORE_INTEGRATIONOAUTHPROVIDER_SLACK_CLIENTENDPOINT: {{ .Values.openlane.coreConfiguration.integrationOauthProvider.slack.clientEndpoint }}
{{- else if .Values.domain }}
  CORE_INTEGRATIONOAUTHPROVIDER_SLACK_CLIENTENDPOINT: "https://api.{{ .Values.domain }}"
{{- else }}
  CORE_INTEGRATIONOAUTHPROVIDER_SLACK_CLIENTENDPOINT: ""
{{- end }}
  CORE_INTEGRATIONOAUTHPROVIDER_SLACK_SCOPES: {{ join "," .Values.openlane.coreConfiguration.integrationOauthProvider.slack.scopes | quote }}
{{- end }}
