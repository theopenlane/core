{{- if .Values.openlane.config.create }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: openlane-config-file
  namespace: openlane
  labels:
    app: openlane
    component: config
data:
  config.yaml: |-

    {{- if .Values.openlane.coreConfiguration.domain }}
    domain: {{ .Values.openlane.coreConfiguration.domain | quote }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.refreshinterval }}
    refreshinterval: {{ .Values.openlane.coreConfiguration.refreshinterval | quote }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.server }}
    server:
      {{- if .Values.openlane.coreConfiguration.server.dev }}
      dev: {{ .Values.openlane.coreConfiguration.server.dev }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.listen }}
      listen: {{ .Values.openlane.coreConfiguration.server.listen | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.metricsport }}
      metricsport: {{ .Values.openlane.coreConfiguration.server.metricsport | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.shutdowngraceperiod }}
      shutdowngraceperiod: {{ .Values.openlane.coreConfiguration.server.shutdowngraceperiod | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.readtimeout }}
      readtimeout: {{ .Values.openlane.coreConfiguration.server.readtimeout | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.writetimeout }}
      writetimeout: {{ .Values.openlane.coreConfiguration.server.writetimeout | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.idletimeout }}
      idletimeout: {{ .Values.openlane.coreConfiguration.server.idletimeout | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.readheadertimeout }}
      readheadertimeout: {{ .Values.openlane.coreConfiguration.server.readheadertimeout | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.tls }}
      tls:
        {{- if .Values.openlane.coreConfiguration.server.tls.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.tls.enabled }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.tls.certfile }}
        certfile: {{ .Values.openlane.coreConfiguration.server.tls.certfile | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.tls.certkey }}
        certkey: {{ .Values.openlane.coreConfiguration.server.tls.certkey | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.tls.autocert }}
        autocert: {{ .Values.openlane.coreConfiguration.server.tls.autocert }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.cors }}
      cors:
        {{- if .Values.openlane.coreConfiguration.server.cors.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.cors.enabled }}
        {{- end }}
        {{- $mapValue := (.Values.openlane.coreConfiguration.server.cors.prefixes | default (dict)) }}
        {{- if gt (len $mapValue) 0 }}
        prefixes:
        {{- toYaml $mapValue | nindent 10 }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.cors.alloworigins }}
        alloworigins:
        {{- toYaml .Values.openlane.coreConfiguration.server.cors.alloworigins | nindent 10 }}
        {{- else if .Values.domain }}
        alloworigins:
          - "https://console.{{ .Values.domain }}"
          - "https://docs.{{ .Values.domain }}"
          - "https://www.{{ .Values.domain }}"
        {{- else }}
        alloworigins:
          []
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.cors.cookieinsecure }}
        cookieinsecure: {{ .Values.openlane.coreConfiguration.server.cors.cookieinsecure }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.secure }}
      secure:
        {{- if .Values.openlane.coreConfiguration.server.secure.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.secure.enabled }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.xssprotection }}
        xssprotection: {{ .Values.openlane.coreConfiguration.server.secure.xssprotection | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.contenttypenosniff }}
        contenttypenosniff: {{ .Values.openlane.coreConfiguration.server.secure.contenttypenosniff | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.xframeoptions }}
        xframeoptions: {{ .Values.openlane.coreConfiguration.server.secure.xframeoptions | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.hstspreloadenabled }}
        hstspreloadenabled: {{ .Values.openlane.coreConfiguration.server.secure.hstspreloadenabled }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.hstsmaxage }}
        hstsmaxage: {{ .Values.openlane.coreConfiguration.server.secure.hstsmaxage }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.contentsecuritypolicy }}
        contentsecuritypolicy: {{ .Values.openlane.coreConfiguration.server.secure.contentsecuritypolicy | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.referrerpolicy }}
        referrerpolicy: {{ .Values.openlane.coreConfiguration.server.secure.referrerpolicy | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.secure.cspreportonly }}
        cspreportonly: {{ .Values.openlane.coreConfiguration.server.secure.cspreportonly }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.redirects }}
      redirects:
        {{- if .Values.openlane.coreConfiguration.server.redirects.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.redirects.enabled }}
        {{- end }}
        {{- $mapValue := (.Values.openlane.coreConfiguration.server.redirects.redirects | default (dict)) }}
        {{- if gt (len $mapValue) 0 }}
        redirects:
        {{- toYaml $mapValue | nindent 10 }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.redirects.code }}
        code: {{ .Values.openlane.coreConfiguration.server.redirects.code }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.cachecontrol }}
      cachecontrol:
        {{- if .Values.openlane.coreConfiguration.server.cachecontrol.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.cachecontrol.enabled }}
        {{- end }}
        {{- $mapValue := (.Values.openlane.coreConfiguration.server.cachecontrol.nocacheheaders | default (dict)) }}
        {{- if gt (len $mapValue) 0 }}
        nocacheheaders:
        {{- toYaml $mapValue | nindent 10 }}
        {{- end }}
        {{- $sliceValue := (.Values.openlane.coreConfiguration.server.cachecontrol.etagheaders | default (list)) }}
        {{- if gt (len $sliceValue) 0 }}
        etagheaders:
        {{- toYaml $sliceValue | nindent 10 }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.mime }}
      mime:
        {{- if .Values.openlane.coreConfiguration.server.mime.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.mime.enabled }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.mime.mimetypesfile }}
        mimetypesfile: {{ .Values.openlane.coreConfiguration.server.mime.mimetypesfile | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.mime.defaultcontenttype }}
        defaultcontenttype: {{ .Values.openlane.coreConfiguration.server.mime.defaultcontenttype | quote }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.graphpool }}
      graphpool:
        {{- if .Values.openlane.coreConfiguration.server.graphpool.maxworkers }}
        maxworkers: {{ .Values.openlane.coreConfiguration.server.graphpool.maxworkers }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.enablegraphextensions }}
      enablegraphextensions: {{ .Values.openlane.coreConfiguration.server.enablegraphextensions }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.enablegraphsubscriptions }}
      enablegraphsubscriptions: {{ .Values.openlane.coreConfiguration.server.enablegraphsubscriptions }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.complexitylimit }}
      complexitylimit: {{ .Values.openlane.coreConfiguration.server.complexitylimit }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.maxresultlimit }}
      maxresultlimit: {{ .Values.openlane.coreConfiguration.server.maxresultlimit }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.csrfprotection }}
      csrfprotection:
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.csrfprotection.enabled }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.header }}
        header: {{ .Values.openlane.coreConfiguration.server.csrfprotection.header | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.cookie }}
        cookie: {{ .Values.openlane.coreConfiguration.server.csrfprotection.cookie | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.secure }}
        secure: {{ .Values.openlane.coreConfiguration.server.csrfprotection.secure }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.samesite }}
        samesite: {{ .Values.openlane.coreConfiguration.server.csrfprotection.samesite | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.cookiehttponly }}
        cookiehttponly: {{ .Values.openlane.coreConfiguration.server.csrfprotection.cookiehttponly }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.cookiedomain }}
        cookiedomain: {{ .Values.openlane.coreConfiguration.server.csrfprotection.cookiedomain | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.server.csrfprotection.cookiepath }}
        cookiepath: {{ .Values.openlane.coreConfiguration.server.csrfprotection.cookiepath | quote }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.defaulttrustcenterdomain }}
      defaulttrustcenterdomain: {{ .Values.openlane.coreConfiguration.server.defaulttrustcenterdomain | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.fieldlevelencryption }}
      fieldlevelencryption:
        {{- if .Values.openlane.coreConfiguration.server.fieldlevelencryption.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.server.fieldlevelencryption.enabled }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.trustcentercnametarget }}
      trustcentercnametarget: {{ .Values.openlane.coreConfiguration.server.trustcentercnametarget | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.server.trustcenterpreviewzoneid }}
      trustcenterpreviewzoneid: {{ .Values.openlane.coreConfiguration.server.trustcenterpreviewzoneid | quote }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.entconfig }}
    entconfig:
      {{- $sliceValue := (.Values.openlane.coreConfiguration.entconfig.entitytypes | default (list)) }}
      {{- if gt (len $sliceValue) 0 }}
      entitytypes:
      {{- toYaml $sliceValue | nindent 8 }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.entconfig.summarizer }}
      summarizer:
        {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.type }}
        type: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.type | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm }}
        llm:
          {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.provider }}
          provider: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.provider | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.anthropic }}
          anthropic:
            {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.anthropic.betaheader }}
            betaheader: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.anthropic.betaheader | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.anthropic.legacytextcompletion }}
            legacytextcompletion: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.anthropic.legacytextcompletion }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.anthropic.baseurl }}
            baseurl: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.anthropic.baseurl | quote }}
            {{- end }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.cloudflare }}
          cloudflare:
            {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.cloudflare.accountid }}
            accountid: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.cloudflare.accountid | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.cloudflare.serverurl }}
            serverurl: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.cloudflare.serverurl | quote }}
            {{- end }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.openai }}
          openai:
            {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.openai.url }}
            url: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.openai.url | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.llm.openai.organizationid }}
            organizationid: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.llm.openai.organizationid | quote }}
            {{- end }}
          {{- end }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.entconfig.summarizer.maximumsentences }}
        maximumsentences: {{ .Values.openlane.coreConfiguration.entconfig.summarizer.maximumsentences }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.entconfig.maxpoolsize }}
      maxpoolsize: {{ .Values.openlane.coreConfiguration.entconfig.maxpoolsize }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.entconfig.modules }}
      modules:
        {{- if .Values.openlane.coreConfiguration.entconfig.modules.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.entconfig.modules.enabled }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.entconfig.modules.usesandbox }}
        usesandbox: {{ .Values.openlane.coreConfiguration.entconfig.modules.usesandbox }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.entconfig.maxschemaimportsize }}
      maxschemaimportsize: {{ .Values.openlane.coreConfiguration.entconfig.maxschemaimportsize }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation }}
      emailvalidation:
        {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.enabled }}
        enabled: {{ .Values.openlane.coreConfiguration.entconfig.emailvalidation.enabled }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.enableautoupdatedisposable }}
        enableautoupdatedisposable: {{ .Values.openlane.coreConfiguration.entconfig.emailvalidation.enableautoupdatedisposable }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.enablegravatarcheck }}
        enablegravatarcheck: {{ .Values.openlane.coreConfiguration.entconfig.emailvalidation.enablegravatarcheck }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.enablesmtpcheck }}
        enablesmtpcheck: {{ .Values.openlane.coreConfiguration.entconfig.emailvalidation.enablesmtpcheck }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.allowedemailtypes }}
        allowedemailtypes:
          {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.allowedemailtypes.disposable }}
          disposable: {{ .Values.openlane.coreConfiguration.entconfig.emailvalidation.allowedemailtypes.disposable }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.allowedemailtypes.free }}
          free: {{ .Values.openlane.coreConfiguration.entconfig.emailvalidation.allowedemailtypes.free }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.entconfig.emailvalidation.allowedemailtypes.role }}
          role: {{ .Values.openlane.coreConfiguration.entconfig.emailvalidation.allowedemailtypes.role }}
          {{- end }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.entconfig.billing }}
      billing:
        {{- if .Values.openlane.coreConfiguration.entconfig.billing.requirepaymentmethod }}
        requirepaymentmethod: {{ .Values.openlane.coreConfiguration.entconfig.billing.requirepaymentmethod }}
        {{- end }}
        {{- $sliceValue := (.Values.openlane.coreConfiguration.entconfig.billing.bypassemaildomains | default (list)) }}
        {{- if gt (len $sliceValue) 0 }}
        bypassemaildomains:
        {{- toYaml $sliceValue | nindent 10 }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.entconfig.notifications }}
      notifications:
        {{- if .Values.openlane.coreConfiguration.entconfig.notifications.consoleurl }}
        consoleurl: {{ .Values.openlane.coreConfiguration.entconfig.notifications.consoleurl | quote }}
        {{- else if .Values.domain }}
        consoleurl: "https://console.{{ .Values.domain }}"
        {{- else }}
        consoleurl: "http://localhost:3001"
        {{- end }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.auth }}
    auth:
      {{- if .Values.openlane.coreConfiguration.auth.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.auth.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.auth.token }}
      token:
        {{- if .Values.openlane.coreConfiguration.auth.token.kid }}
        kid: {{ .Values.openlane.coreConfiguration.auth.token.kid | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.audience }}
        audience: {{ .Values.openlane.coreConfiguration.auth.token.audience | quote }}
        {{- else if .Values.domain }}
        audience: "https://api.{{ .Values.domain }}"
        {{- else }}
        audience: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.refreshaudience }}
        refreshaudience: {{ .Values.openlane.coreConfiguration.auth.token.refreshaudience | quote }}
        {{- else if .Values.domain }}
        refreshaudience: "https://api.{{ .Values.domain }}"
        {{- else }}
        refreshaudience: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.issuer }}
        issuer: {{ .Values.openlane.coreConfiguration.auth.token.issuer | quote }}
        {{- else if .Values.domain }}
        issuer: "https://api.{{ .Values.domain }}"
        {{- else }}
        issuer: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.accessduration }}
        accessduration: {{ .Values.openlane.coreConfiguration.auth.token.accessduration | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.refreshduration }}
        refreshduration: {{ .Values.openlane.coreConfiguration.auth.token.refreshduration | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.refreshoverlap }}
        refreshoverlap: {{ .Values.openlane.coreConfiguration.auth.token.refreshoverlap | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.jwksendpoint }}
        jwksendpoint: {{ .Values.openlane.coreConfiguration.auth.token.jwksendpoint | quote }}
        {{- else if .Values.domain }}
        jwksendpoint: "https://api.{{ .Values.domain }}/.well-known/jwks.json"
        {{- else }}
        jwksendpoint: ""
        {{- end }}
        {{- $mapValue := (.Values.openlane.coreConfiguration.auth.token.keys | default (dict)) }}
        {{- if gt (len $mapValue) 0 }}
        keys:
        {{- toYaml $mapValue | nindent 10 }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.generatekeys }}
        generatekeys: {{ .Values.openlane.coreConfiguration.auth.token.generatekeys }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.jwkscachettl }}
        jwkscachettl: {{ .Values.openlane.coreConfiguration.auth.token.jwkscachettl | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.redis }}
        redis:
          {{- if .Values.openlane.coreConfiguration.auth.token.redis.enabled }}
          enabled: {{ .Values.openlane.coreConfiguration.auth.token.redis.enabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.token.redis.config }}
          config:
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.enabled }}
            enabled: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.enabled }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.address }}
            address: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.address | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.name }}
            name: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.name | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.username }}
            username: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.username | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.password }}
            password: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.password | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.db }}
            db: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.db }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.dialtimeout }}
            dialtimeout: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.dialtimeout | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.readtimeout }}
            readtimeout: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.readtimeout | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.writetimeout }}
            writetimeout: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.writetimeout | quote }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.maxretries }}
            maxretries: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.maxretries }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.minidleconns }}
            minidleconns: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.minidleconns }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.maxidleconns }}
            maxidleconns: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.maxidleconns }}
            {{- end }}
            {{- if .Values.openlane.coreConfiguration.auth.token.redis.config.maxactiveconns }}
            maxactiveconns: {{ .Values.openlane.coreConfiguration.auth.token.redis.config.maxactiveconns }}
            {{- end }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.token.redis.blacklistprefix }}
          blacklistprefix: {{ .Values.openlane.coreConfiguration.auth.token.redis.blacklistprefix | quote }}
          {{- end }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.token.apitokens }}
        apitokens:
          {{- if .Values.openlane.coreConfiguration.auth.token.apitokens.enabled }}
          enabled: {{ .Values.openlane.coreConfiguration.auth.token.apitokens.enabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.token.apitokens.envprefix }}
          envprefix: {{ .Values.openlane.coreConfiguration.auth.token.apitokens.envprefix | quote }}
          {{- end }}
          {{- $mapValue := (.Values.openlane.coreConfiguration.auth.token.apitokens.keys | default (dict)) }}
          {{- if gt (len $mapValue) 0 }}
          keys:
          {{- toYaml $mapValue | nindent 12 }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.token.apitokens.secretsize }}
          secretsize: {{ .Values.openlane.coreConfiguration.auth.token.apitokens.secretsize }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.token.apitokens.delimiter }}
          delimiter: {{ .Values.openlane.coreConfiguration.auth.token.apitokens.delimiter | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.token.apitokens.prefix }}
          prefix: {{ .Values.openlane.coreConfiguration.auth.token.apitokens.prefix | quote }}
          {{- end }}
        {{- end }}
      {{- end }}
      {{- $sliceValue := (.Values.openlane.coreConfiguration.auth.supportedproviders | default (list)) }}
      {{- if gt (len $sliceValue) 0 }}
      supportedproviders:
      {{- toYaml $sliceValue | nindent 8 }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.auth.providers }}
      providers:
        {{- if .Values.openlane.coreConfiguration.auth.providers.redirecturl }}
        redirecturl: {{ .Values.openlane.coreConfiguration.auth.providers.redirecturl | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.providers.github }}
        github:
          {{- if .Values.openlane.coreConfiguration.auth.providers.github.clientid }}
          clientid: {{ .Values.openlane.coreConfiguration.auth.providers.github.clientid | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.github.clientendpoint }}
          clientendpoint: {{ .Values.openlane.coreConfiguration.auth.providers.github.clientendpoint | quote }}
          {{- else if .Values.domain }}
          clientendpoint: "https://api.{{ .Values.domain }}"
          {{- else }}
          clientendpoint: ""
          {{- end }}
          {{- $sliceValue := (.Values.openlane.coreConfiguration.auth.providers.github.scopes | default (list)) }}
          {{- if gt (len $sliceValue) 0 }}
          scopes:
          {{- toYaml $sliceValue | nindent 12 }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.github.redirecturl }}
          redirecturl: {{ .Values.openlane.coreConfiguration.auth.providers.github.redirecturl | quote }}
          {{- end }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.providers.google }}
        google:
          {{- if .Values.openlane.coreConfiguration.auth.providers.google.clientid }}
          clientid: {{ .Values.openlane.coreConfiguration.auth.providers.google.clientid | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.google.clientendpoint }}
          clientendpoint: {{ .Values.openlane.coreConfiguration.auth.providers.google.clientendpoint | quote }}
          {{- else if .Values.domain }}
          clientendpoint: "https://api.{{ .Values.domain }}"
          {{- else }}
          clientendpoint: ""
          {{- end }}
          {{- $sliceValue := (.Values.openlane.coreConfiguration.auth.providers.google.scopes | default (list)) }}
          {{- if gt (len $sliceValue) 0 }}
          scopes:
          {{- toYaml $sliceValue | nindent 12 }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.google.redirecturl }}
          redirecturl: {{ .Values.openlane.coreConfiguration.auth.providers.google.redirecturl | quote }}
          {{- end }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn }}
        webauthn:
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.enabled }}
          enabled: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.enabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.displayname }}
          displayname: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.displayname | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.relyingpartyid }}
          relyingpartyid: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.relyingpartyid | quote }}
          {{- else if .Values.domain }}
          relyingpartyid: "{{ .Values.domain }}"
          {{- else }}
          relyingpartyid: ""
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.requestorigins }}
          requestorigins:
          {{- toYaml .Values.openlane.coreConfiguration.auth.providers.webauthn.requestorigins | nindent 12 }}
          {{- else if .Values.domain }}
          requestorigins:
            - "https://console.{{ .Values.domain }}"
          {{- else }}
          requestorigins:
            []
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.maxdevices }}
          maxdevices: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.maxdevices }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.enforcetimeout }}
          enforcetimeout: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.enforcetimeout }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.timeout }}
          timeout: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.timeout | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.auth.providers.webauthn.debug }}
          debug: {{ .Values.openlane.coreConfiguration.auth.providers.webauthn.debug }}
          {{- end }}
        {{- end }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.authz }}
    authz:
      {{- if .Values.openlane.coreConfiguration.authz.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.authz.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.storename }}
      storename: {{ .Values.openlane.coreConfiguration.authz.storename | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.hosturl }}
      hosturl: {{ .Values.openlane.coreConfiguration.authz.hosturl | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.storeid }}
      storeid: {{ .Values.openlane.coreConfiguration.authz.storeid | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.modelid }}
      modelid: {{ .Values.openlane.coreConfiguration.authz.modelid | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.createnewmodel }}
      createnewmodel: {{ .Values.openlane.coreConfiguration.authz.createnewmodel }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.modelfile }}
      modelfile: {{ .Values.openlane.coreConfiguration.authz.modelfile | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.credentials }}
      credentials:
        {{- if .Values.openlane.coreConfiguration.authz.credentials.clientid }}
        clientid: {{ .Values.openlane.coreConfiguration.authz.credentials.clientid | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.authz.credentials.audience }}
        audience: {{ .Values.openlane.coreConfiguration.authz.credentials.audience | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.authz.credentials.issuer }}
        issuer: {{ .Values.openlane.coreConfiguration.authz.credentials.issuer | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.authz.credentials.scopes }}
        scopes: {{ .Values.openlane.coreConfiguration.authz.credentials.scopes | quote }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.authz.maxbatchwritesize }}
      maxbatchwritesize: {{ .Values.openlane.coreConfiguration.authz.maxbatchwritesize }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.db }}
    db:
      {{- if .Values.openlane.coreConfiguration.db.debug }}
      debug: {{ .Values.openlane.coreConfiguration.db.debug }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.databasename }}
      databasename: {{ .Values.openlane.coreConfiguration.db.databasename | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.drivername }}
      drivername: {{ .Values.openlane.coreConfiguration.db.drivername | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.multiwrite }}
      multiwrite: {{ .Values.openlane.coreConfiguration.db.multiwrite }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.cachettl }}
      cachettl: {{ .Values.openlane.coreConfiguration.db.cachettl | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.runmigrations }}
      runmigrations: {{ .Values.openlane.coreConfiguration.db.runmigrations }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.migrationprovider }}
      migrationprovider: {{ .Values.openlane.coreConfiguration.db.migrationprovider | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.enablehistory }}
      enablehistory: {{ .Values.openlane.coreConfiguration.db.enablehistory }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.maxconnections }}
      maxconnections: {{ .Values.openlane.coreConfiguration.db.maxconnections }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.db.maxidleconnections }}
      maxidleconnections: {{ .Values.openlane.coreConfiguration.db.maxidleconnections }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.jobqueue }}
    jobqueue:
      {{- if .Values.openlane.coreConfiguration.jobqueue.runmigrations }}
      runmigrations: {{ .Values.openlane.coreConfiguration.jobqueue.runmigrations }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.jobqueue.metrics }}
      metrics:
        {{- if .Values.openlane.coreConfiguration.jobqueue.metrics.enablemetrics }}
        enablemetrics: {{ .Values.openlane.coreConfiguration.jobqueue.metrics.enablemetrics }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.jobqueue.metrics.metricsdurationunit }}
        metricsdurationunit: {{ .Values.openlane.coreConfiguration.jobqueue.metrics.metricsdurationunit | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.jobqueue.metrics.enablesemanticmetrics }}
        enablesemanticmetrics: {{ .Values.openlane.coreConfiguration.jobqueue.metrics.enablesemanticmetrics }}
        {{- end }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.redis }}
    redis:
      {{- if .Values.openlane.coreConfiguration.redis.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.redis.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.address }}
      address: {{ .Values.openlane.coreConfiguration.redis.address | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.name }}
      name: {{ .Values.openlane.coreConfiguration.redis.name | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.username }}
      username: {{ .Values.openlane.coreConfiguration.redis.username | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.password }}
      password: {{ .Values.openlane.coreConfiguration.redis.password | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.db }}
      db: {{ .Values.openlane.coreConfiguration.redis.db }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.dialtimeout }}
      dialtimeout: {{ .Values.openlane.coreConfiguration.redis.dialtimeout | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.readtimeout }}
      readtimeout: {{ .Values.openlane.coreConfiguration.redis.readtimeout | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.writetimeout }}
      writetimeout: {{ .Values.openlane.coreConfiguration.redis.writetimeout | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.maxretries }}
      maxretries: {{ .Values.openlane.coreConfiguration.redis.maxretries }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.minidleconns }}
      minidleconns: {{ .Values.openlane.coreConfiguration.redis.minidleconns }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.maxidleconns }}
      maxidleconns: {{ .Values.openlane.coreConfiguration.redis.maxidleconns }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.redis.maxactiveconns }}
      maxactiveconns: {{ .Values.openlane.coreConfiguration.redis.maxactiveconns }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.tracer }}
    tracer:
      {{- if .Values.openlane.coreConfiguration.tracer.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.tracer.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.tracer.provider }}
      provider: {{ .Values.openlane.coreConfiguration.tracer.provider | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.tracer.environment }}
      environment: {{ .Values.openlane.coreConfiguration.tracer.environment | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.tracer.stdout }}
      stdout:
        {{- if .Values.openlane.coreConfiguration.tracer.stdout.pretty }}
        pretty: {{ .Values.openlane.coreConfiguration.tracer.stdout.pretty }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.tracer.stdout.disabletimestamp }}
        disabletimestamp: {{ .Values.openlane.coreConfiguration.tracer.stdout.disabletimestamp }}
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.tracer.otlp }}
      otlp:
        {{- if .Values.openlane.coreConfiguration.tracer.otlp.endpoint }}
        endpoint: {{ .Values.openlane.coreConfiguration.tracer.otlp.endpoint | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.tracer.otlp.insecure }}
        insecure: {{ .Values.openlane.coreConfiguration.tracer.otlp.insecure }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.tracer.otlp.certificate }}
        certificate: {{ .Values.openlane.coreConfiguration.tracer.otlp.certificate | quote }}
        {{- end }}
        {{- $sliceValue := (.Values.openlane.coreConfiguration.tracer.otlp.headers | default (list)) }}
        {{- if gt (len $sliceValue) 0 }}
        headers:
        {{- toYaml $sliceValue | nindent 10 }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.tracer.otlp.compression }}
        compression: {{ .Values.openlane.coreConfiguration.tracer.otlp.compression | quote }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.tracer.otlp.timeout }}
        timeout: {{ .Values.openlane.coreConfiguration.tracer.otlp.timeout | quote }}
        {{- end }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.email }}
    email:
      {{- if .Values.openlane.coreConfiguration.email.companyname }}
      companyname: {{ .Values.openlane.coreConfiguration.email.companyname | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.companyaddress }}
      companyaddress: {{ .Values.openlane.coreConfiguration.email.companyaddress | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.corporation }}
      corporation: {{ .Values.openlane.coreConfiguration.email.corporation | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.year }}
      year: {{ .Values.openlane.coreConfiguration.email.year }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.fromemail }}
      fromemail: {{ .Values.openlane.coreConfiguration.email.fromemail | quote }}
      {{- else if .Values.domain }}
      fromemail: "no-reply@mail.{{ .Values.domain }}"
      {{- else }}
      fromemail: ""
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.supportemail }}
      supportemail: {{ .Values.openlane.coreConfiguration.email.supportemail | quote }}
      {{- else if .Values.domain }}
      supportemail: "support@{{ .Values.domain }}"
      {{- else }}
      supportemail: ""
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.logourl }}
      logourl: {{ .Values.openlane.coreConfiguration.email.logourl | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.urls }}
      urls:
        {{- if .Values.openlane.coreConfiguration.email.urls.root }}
        root: {{ .Values.openlane.coreConfiguration.email.urls.root | quote }}
        {{- else if .Values.domain }}
        root: "https://www.{{ .Values.domain }}"
        {{- else }}
        root: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.product }}
        product: {{ .Values.openlane.coreConfiguration.email.urls.product | quote }}
        {{- else if .Values.domain }}
        product: "https://console.{{ .Values.domain }}"
        {{- else }}
        product: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.docs }}
        docs: {{ .Values.openlane.coreConfiguration.email.urls.docs | quote }}
        {{- else if .Values.domain }}
        docs: "https://docs.{{ .Values.domain }}"
        {{- else }}
        docs: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.verify }}
        verify: {{ .Values.openlane.coreConfiguration.email.urls.verify | quote }}
        {{- else if .Values.domain }}
        verify: "https://console.{{ .Values.domain }}/verify"
        {{- else }}
        verify: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.invite }}
        invite: {{ .Values.openlane.coreConfiguration.email.urls.invite | quote }}
        {{- else if .Values.domain }}
        invite: "https://console.{{ .Values.domain }}/invite"
        {{- else }}
        invite: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.reset }}
        reset: {{ .Values.openlane.coreConfiguration.email.urls.reset | quote }}
        {{- else if .Values.domain }}
        reset: "https://console.{{ .Values.domain }}/password-reset"
        {{- else }}
        reset: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.verifysubscriber }}
        verifysubscriber: {{ .Values.openlane.coreConfiguration.email.urls.verifysubscriber | quote }}
        {{- else if .Values.domain }}
        verifysubscriber: "https://console.{{ .Values.domain }}/subscriber-verify"
        {{- else }}
        verifysubscriber: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.verifybilling }}
        verifybilling: {{ .Values.openlane.coreConfiguration.email.urls.verifybilling | quote }}
        {{- else if .Values.domain }}
        verifybilling: "https://console.{{ .Values.domain }}/verify-billing"
        {{- else }}
        verifybilling: ""
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.email.urls.questionnaire }}
        questionnaire: {{ .Values.openlane.coreConfiguration.email.urls.questionnaire | quote }}
        {{- else if .Values.domain }}
        questionnaire: "https://console.{{ .Values.domain }}/questionnaire"
        {{- else }}
        questionnaire: ""
        {{- end }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.email.templatespath }}
      templatespath: {{ .Values.openlane.coreConfiguration.email.templatespath | quote }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.sessions }}
    sessions:
      {{- if .Values.openlane.coreConfiguration.sessions.domain }}
      domain: {{ .Values.openlane.coreConfiguration.sessions.domain | quote }}
      {{- else if .Values.domain }}
      domain: "{{ .Values.domain }}"
      {{- else }}
      domain: ""
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.sessions.maxage }}
      maxage: {{ .Values.openlane.coreConfiguration.sessions.maxage }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.sessions.secure }}
      secure: {{ .Values.openlane.coreConfiguration.sessions.secure }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.sessions.httponly }}
      httponly: {{ .Values.openlane.coreConfiguration.sessions.httponly }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.sessions.samesite }}
      samesite: {{ .Values.openlane.coreConfiguration.sessions.samesite | quote }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.totp }}
    totp:
      {{- if .Values.openlane.coreConfiguration.totp.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.totp.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.totp.codelength }}
      codelength: {{ .Values.openlane.coreConfiguration.totp.codelength }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.totp.issuer }}
      issuer: {{ .Values.openlane.coreConfiguration.totp.issuer | quote }}
      {{- else if .Values.domain }}
      issuer: "{{ .Values.domain }}"
      {{- else }}
      issuer: ""
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.totp.redis }}
      redis: {{ .Values.openlane.coreConfiguration.totp.redis }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.totp.recoverycodecount }}
      recoverycodecount: {{ .Values.openlane.coreConfiguration.totp.recoverycodecount }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.totp.recoverycodelength }}
      recoverycodelength: {{ .Values.openlane.coreConfiguration.totp.recoverycodelength }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.ratelimit }}
    ratelimit:
      {{- if .Values.openlane.coreConfiguration.ratelimit.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.ratelimit.enabled }}
      {{- end }}
      {{- $sliceValue := (.Values.openlane.coreConfiguration.ratelimit.options | default (list)) }}
      {{- if gt (len $sliceValue) 0 }}
      options:
      {{- toYaml $sliceValue | nindent 8 }}
      {{- end }}
      {{- $sliceValue := (.Values.openlane.coreConfiguration.ratelimit.headers | default (list)) }}
      {{- if gt (len $sliceValue) 0 }}
      headers:
      {{- toYaml $sliceValue | nindent 8 }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.forwardedindexfrombehind }}
      forwardedindexfrombehind: {{ .Values.openlane.coreConfiguration.ratelimit.forwardedindexfrombehind }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.includepath }}
      includepath: {{ .Values.openlane.coreConfiguration.ratelimit.includepath }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.includemethod }}
      includemethod: {{ .Values.openlane.coreConfiguration.ratelimit.includemethod }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.keyprefix }}
      keyprefix: {{ .Values.openlane.coreConfiguration.ratelimit.keyprefix | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.denystatus }}
      denystatus: {{ .Values.openlane.coreConfiguration.ratelimit.denystatus }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.denymessage }}
      denymessage: {{ .Values.openlane.coreConfiguration.ratelimit.denymessage | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.sendretryafterheader }}
      sendretryafterheader: {{ .Values.openlane.coreConfiguration.ratelimit.sendretryafterheader }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.ratelimit.dryrun }}
      dryrun: {{ .Values.openlane.coreConfiguration.ratelimit.dryrun }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.objectstorage }}
    objectstorage:
      {{- if .Values.openlane.coreConfiguration.objectstorage.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.objectstorage.enabled }}
      {{- end }}
      {{- $sliceValue := (.Values.openlane.coreConfiguration.objectstorage.keys | default (list)) }}
      {{- if gt (len $sliceValue) 0 }}
      keys:
      {{- toYaml $sliceValue | nindent 8 }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.objectstorage.maxsizemb }}
      maxsizemb: {{ .Values.openlane.coreConfiguration.objectstorage.maxsizemb }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.objectstorage.maxmemorymb }}
      maxmemorymb: {{ .Values.openlane.coreConfiguration.objectstorage.maxmemorymb }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.objectstorage.devmode }}
      devmode: {{ .Values.openlane.coreConfiguration.objectstorage.devmode }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.objectstorage.providers }}
      providers:
        {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3 }}
        s3:
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3.enabled }}
          enabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.s3.enabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3.ensureavailable }}
          ensureavailable: {{ .Values.openlane.coreConfiguration.objectstorage.providers.s3.ensureavailable }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3.region }}
          region: {{ .Values.openlane.coreConfiguration.objectstorage.providers.s3.region | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3.bucket }}
          bucket: {{ .Values.openlane.coreConfiguration.objectstorage.providers.s3.bucket | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3.endpoint }}
          endpoint: {{ .Values.openlane.coreConfiguration.objectstorage.providers.s3.endpoint | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3.proxypresignenabled }}
          proxypresignenabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.s3.proxypresignenabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.s3.baseurl }}
          baseurl: {{ .Values.openlane.coreConfiguration.objectstorage.providers.s3.baseurl | quote }}
          {{- end }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2 }}
        r2:
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2.enabled }}
          enabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.r2.enabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2.ensureavailable }}
          ensureavailable: {{ .Values.openlane.coreConfiguration.objectstorage.providers.r2.ensureavailable }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2.region }}
          region: {{ .Values.openlane.coreConfiguration.objectstorage.providers.r2.region | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2.bucket }}
          bucket: {{ .Values.openlane.coreConfiguration.objectstorage.providers.r2.bucket | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2.endpoint }}
          endpoint: {{ .Values.openlane.coreConfiguration.objectstorage.providers.r2.endpoint | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2.proxypresignenabled }}
          proxypresignenabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.r2.proxypresignenabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.r2.baseurl }}
          baseurl: {{ .Values.openlane.coreConfiguration.objectstorage.providers.r2.baseurl | quote }}
          {{- end }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk }}
        disk:
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk.enabled }}
          enabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.disk.enabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk.ensureavailable }}
          ensureavailable: {{ .Values.openlane.coreConfiguration.objectstorage.providers.disk.ensureavailable }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk.region }}
          region: {{ .Values.openlane.coreConfiguration.objectstorage.providers.disk.region | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk.bucket }}
          bucket: {{ .Values.openlane.coreConfiguration.objectstorage.providers.disk.bucket | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk.endpoint }}
          endpoint: {{ .Values.openlane.coreConfiguration.objectstorage.providers.disk.endpoint | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk.proxypresignenabled }}
          proxypresignenabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.disk.proxypresignenabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.disk.baseurl }}
          baseurl: {{ .Values.openlane.coreConfiguration.objectstorage.providers.disk.baseurl | quote }}
          {{- end }}
        {{- end }}
        {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database }}
        database:
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database.enabled }}
          enabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.database.enabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database.ensureavailable }}
          ensureavailable: {{ .Values.openlane.coreConfiguration.objectstorage.providers.database.ensureavailable }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database.region }}
          region: {{ .Values.openlane.coreConfiguration.objectstorage.providers.database.region | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database.bucket }}
          bucket: {{ .Values.openlane.coreConfiguration.objectstorage.providers.database.bucket | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database.endpoint }}
          endpoint: {{ .Values.openlane.coreConfiguration.objectstorage.providers.database.endpoint | quote }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database.proxypresignenabled }}
          proxypresignenabled: {{ .Values.openlane.coreConfiguration.objectstorage.providers.database.proxypresignenabled }}
          {{- end }}
          {{- if .Values.openlane.coreConfiguration.objectstorage.providers.database.baseurl }}
          baseurl: {{ .Values.openlane.coreConfiguration.objectstorage.providers.database.baseurl | quote }}
          {{- end }}
        {{- end }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.subscription }}
    subscription:
      {{- if .Values.openlane.coreConfiguration.subscription.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.subscription.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.subscription.stripewebhookurl }}
      stripewebhookurl: {{ .Values.openlane.coreConfiguration.subscription.stripewebhookurl | quote }}
      {{- else if .Values.domain }}
      stripewebhookurl: "https://api.{{ .Values.domain }}/v1/stripe/webhook"
      {{- else }}
      stripewebhookurl: "https://api.theopenlane.io/stripe/webhook"
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.subscription.stripebillingportalsuccessurl }}
      stripebillingportalsuccessurl: {{ .Values.openlane.coreConfiguration.subscription.stripebillingportalsuccessurl | quote }}
      {{- else if .Values.domain }}
      stripebillingportalsuccessurl: "https://console.{{ .Values.domain }}/organization-settings/billing"
      {{- else }}
      stripebillingportalsuccessurl: "https://console.theopenlane.io/organization-settings/billing"
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.subscription.stripecancellationreturnurl }}
      stripecancellationreturnurl: {{ .Values.openlane.coreConfiguration.subscription.stripecancellationreturnurl | quote }}
      {{- else if .Values.domain }}
      stripecancellationreturnurl: "https://console.{{ .Values.domain }}/organization-settings/billing"
      {{- else }}
      stripecancellationreturnurl: "https://console.theopenlane.io/organization-settings/billing"
      {{- end }}
      {{- $sliceValue := (.Values.openlane.coreConfiguration.subscription.stripewebhookevents | default (list)) }}
      {{- if gt (len $sliceValue) 0 }}
      stripewebhookevents:
      {{- toYaml $sliceValue | nindent 8 }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.subscription.stripewebhookapiversion }}
      stripewebhookapiversion: {{ .Values.openlane.coreConfiguration.subscription.stripewebhookapiversion | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.subscription.stripewebhookdiscardapiversion }}
      stripewebhookdiscardapiversion: {{ .Values.openlane.coreConfiguration.subscription.stripewebhookdiscardapiversion | quote }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.keywatcher }}
    keywatcher:
      {{- if .Values.openlane.coreConfiguration.keywatcher.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.keywatcher.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.keywatcher.keydir }}
      keydir: {{ .Values.openlane.coreConfiguration.keywatcher.keydir | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.keywatcher.externalsecretsintegration }}
      externalsecretsintegration: {{ .Values.openlane.coreConfiguration.keywatcher.externalsecretsintegration }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.slack }}
    slack:
      {{- if .Values.openlane.coreConfiguration.slack.newsubscribermessagefile }}
      newsubscribermessagefile: {{ .Values.openlane.coreConfiguration.slack.newsubscribermessagefile | quote }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.slack.newusermessagefile }}
      newusermessagefile: {{ .Values.openlane.coreConfiguration.slack.newusermessagefile | quote }}
      {{- end }}
    {{- end }}
    {{- if .Values.openlane.coreConfiguration.integrationoauthprovider }}
    integrationoauthprovider:
      {{- if .Values.openlane.coreConfiguration.integrationoauthprovider.enabled }}
      enabled: {{ .Values.openlane.coreConfiguration.integrationoauthprovider.enabled }}
      {{- end }}
      {{- if .Values.openlane.coreConfiguration.integrationoauthprovider.successredirecturl }}
      successredirecturl: {{ .Values.openlane.coreConfiguration.integrationoauthprovider.successredirecturl | quote }}
      {{- else if .Values.domain }}
      successredirecturl: "https://console.{{ .Values.domain }}/organization-settings/integrations"
      {{- else }}
      successredirecturl: ""
      {{- end }}
    {{- end }}
{{- end }}
