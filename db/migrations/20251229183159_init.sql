-- Create "api_tokens" table
CREATE TABLE "api_tokens" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "name" character varying NOT NULL, "token" character varying NOT NULL, "expires_at" timestamptz NULL, "description" character varying NULL, "scopes" jsonb NULL, "last_used_at" timestamptz NULL, "is_active" boolean NULL DEFAULT true, "revoked_reason" character varying NULL, "revoked_by" character varying NULL, "revoked_at" timestamptz NULL, "sso_authorizations" jsonb NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "api_tokens_token_key" to table: "api_tokens"
CREATE UNIQUE INDEX "api_tokens_token_key" ON "api_tokens" ("token");
-- Create index "apitoken_owner_id" to table: "api_tokens"
CREATE INDEX "apitoken_owner_id" ON "api_tokens" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "apitoken_token" to table: "api_tokens"
CREATE INDEX "apitoken_token" ON "api_tokens" ("token");
-- Create "action_plans" table
CREATE TABLE "action_plans" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "revision" character varying NULL DEFAULT 'v0.0.1', "name" character varying NOT NULL, "status" character varying NULL DEFAULT 'DRAFT', "action_plan_type" character varying NULL, "details" text NULL, "details_json" jsonb NULL, "approval_required" boolean NULL DEFAULT true, "review_due" timestamptz NULL, "review_frequency" character varying NULL DEFAULT 'YEARLY', "summary" character varying NULL, "tag_suggestions" jsonb NULL, "dismissed_tag_suggestions" jsonb NULL, "control_suggestions" jsonb NULL, "dismissed_control_suggestions" jsonb NULL, "improvement_suggestions" jsonb NULL, "dismissed_improvement_suggestions" jsonb NULL, "url" character varying NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "action_plan_kind_name" character varying NULL, "workflow_eligible_marker" boolean NULL DEFAULT true, "title" character varying NOT NULL, "description" text NULL, "due_date" timestamptz NULL, "completed_at" timestamptz NULL, "priority" character varying NULL, "requires_approval" boolean NOT NULL DEFAULT false, "blocked" boolean NOT NULL DEFAULT false, "blocker_reason" text NULL, "metadata" jsonb NULL, "raw_payload" jsonb NULL, "source" character varying NULL, "approver_id" character varying NULL, "delegate_id" character varying NULL, "action_plan_kind_id" character varying NULL, "file_id" character varying NULL, "custom_type_enum_action_plans" character varying NULL, "owner_id" character varying NULL, "subcontrol_action_plans" character varying NULL, "user_action_plans" character varying NULL, PRIMARY KEY ("id"));
-- Create index "actionplan_owner_id" to table: "action_plans"
CREATE INDEX "actionplan_owner_id" ON "action_plans" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "assessments" table
CREATE TABLE "assessments" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "name" character varying NOT NULL, "assessment_type" character varying NOT NULL DEFAULT 'INTERNAL', "jsonconfig" jsonb NULL, "uischema" jsonb NULL, "response_due_duration" bigint NULL, "owner_id" character varying NULL, "template_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "assessment_name_owner_id" to table: "assessments"
CREATE UNIQUE INDEX "assessment_name_owner_id" ON "assessments" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "assessment_owner_id" to table: "assessments"
CREATE INDEX "assessment_owner_id" ON "assessments" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "assessment_responses" table
CREATE TABLE "assessment_responses" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "email" character varying NOT NULL, "send_attempts" bigint NOT NULL DEFAULT 1, "status" character varying NOT NULL DEFAULT 'SENT', "assigned_at" timestamptz NOT NULL, "started_at" timestamptz NOT NULL, "completed_at" timestamptz NULL, "due_date" timestamptz NULL, "assessment_id" character varying NOT NULL, "document_data_id" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "assessmentresponse_assessment_id_email" to table: "assessment_responses"
CREATE UNIQUE INDEX "assessmentresponse_assessment_id_email" ON "assessment_responses" ("assessment_id", "email") WHERE (deleted_at IS NULL);
-- Create index "assessmentresponse_assigned_at" to table: "assessment_responses"
CREATE INDEX "assessmentresponse_assigned_at" ON "assessment_responses" ("assigned_at");
-- Create index "assessmentresponse_completed_at" to table: "assessment_responses"
CREATE INDEX "assessmentresponse_completed_at" ON "assessment_responses" ("completed_at");
-- Create index "assessmentresponse_due_date" to table: "assessment_responses"
CREATE INDEX "assessmentresponse_due_date" ON "assessment_responses" ("due_date");
-- Create index "assessmentresponse_owner_id" to table: "assessment_responses"
CREATE INDEX "assessmentresponse_owner_id" ON "assessment_responses" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "assessmentresponse_status" to table: "assessment_responses"
CREATE INDEX "assessmentresponse_status" ON "assessment_responses" ("status");
-- Create "assets" table
CREATE TABLE "assets" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "asset_type" character varying NOT NULL DEFAULT 'TECHNOLOGY', "name" character varying NOT NULL, "description" character varying NULL, "identifier" character varying NULL, "website" character varying NULL, "cpe" character varying NULL, "categories" jsonb NULL, "finding_assets" character varying NULL, "owner_id" character varying NULL, "remediation_assets" character varying NULL, "review_assets" character varying NULL, "risk_assets" character varying NULL, "vulnerability_assets" character varying NULL, PRIMARY KEY ("id"));
-- Create index "asset_name_owner_id" to table: "assets"
CREATE UNIQUE INDEX "asset_name_owner_id" ON "assets" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "asset_owner_id" to table: "assets"
CREATE INDEX "asset_owner_id" ON "assets" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "contacts" table
CREATE TABLE "contacts" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "full_name" character varying NULL, "title" character varying NULL, "company" character varying NULL, "email" character varying NULL, "phone_number" character varying NULL, "address" character varying NULL, "status" character varying NOT NULL DEFAULT 'ACTIVE', "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "contact_owner_id" to table: "contacts"
CREATE INDEX "contact_owner_id" ON "contacts" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "controls" table
CREATE TABLE "controls" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "title" character varying NULL, "description" text NULL, "description_json" jsonb NULL, "aliases" jsonb NULL, "reference_id" character varying NULL, "auditor_reference_id" character varying NULL, "status" character varying NULL DEFAULT 'NOT_IMPLEMENTED', "source" character varying NULL DEFAULT 'USER_DEFINED', "reference_framework" character varying NULL, "reference_framework_revision" character varying NULL, "control_type" character varying NULL DEFAULT 'PREVENTATIVE', "category" character varying NULL, "category_id" character varying NULL, "subcategory" character varying NULL, "mapped_categories" jsonb NULL, "assessment_objectives" jsonb NULL, "assessment_methods" jsonb NULL, "control_questions" jsonb NULL, "implementation_guidance" jsonb NULL, "example_evidence" jsonb NULL, "references" jsonb NULL, "testing_procedures" jsonb NULL, "evidence_requests" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "control_kind_name" character varying NULL, "workflow_eligible_marker" boolean NULL DEFAULT true, "ref_code" character varying NOT NULL, "control_owner_id" character varying NULL, "delegate_id" character varying NULL, "responsible_party_id" character varying NULL, "control_kind_id" character varying NULL, "custom_type_enum_controls" character varying NULL, "owner_id" character varying NULL, "remediation_controls" character varying NULL, "review_controls" character varying NULL, "standard_id" character varying NULL, "vulnerability_controls" character varying NULL, PRIMARY KEY ("id"));
-- Create index "control_auditor_reference_id_deleted_at_owner_id" to table: "controls"
CREATE INDEX "control_auditor_reference_id_deleted_at_owner_id" ON "controls" ("auditor_reference_id", "deleted_at", "owner_id");
-- Create index "control_display_id_owner_id" to table: "controls"
CREATE UNIQUE INDEX "control_display_id_owner_id" ON "controls" ("display_id", "owner_id");
-- Create index "control_owner_id" to table: "controls"
CREATE INDEX "control_owner_id" ON "controls" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "control_ref_code_owner_id" to table: "controls"
CREATE UNIQUE INDEX "control_ref_code_owner_id" ON "controls" ("ref_code", "owner_id") WHERE ((deleted_at IS NULL) AND (owner_id IS NOT NULL) AND (standard_id IS NULL));
-- Create index "control_reference_id_deleted_at_owner_id" to table: "controls"
CREATE INDEX "control_reference_id_deleted_at_owner_id" ON "controls" ("reference_id", "deleted_at", "owner_id");
-- Create index "control_standard_id_deleted_at_owner_id" to table: "controls"
CREATE INDEX "control_standard_id_deleted_at_owner_id" ON "controls" ("standard_id", "deleted_at", "owner_id");
-- Create index "control_standard_id_ref_code" to table: "controls"
CREATE UNIQUE INDEX "control_standard_id_ref_code" ON "controls" ("standard_id", "ref_code") WHERE ((deleted_at IS NULL) AND (owner_id IS NULL));
-- Create index "control_standard_id_ref_code_owner_id" to table: "controls"
CREATE UNIQUE INDEX "control_standard_id_ref_code_owner_id" ON "controls" ("standard_id", "ref_code", "owner_id") WHERE ((deleted_at IS NULL) AND (owner_id IS NOT NULL) AND (standard_id IS NOT NULL));
-- Create "control_implementations" table
CREATE TABLE "control_implementations" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "status" character varying NULL DEFAULT 'DRAFT', "implementation_date" timestamptz NULL, "verified" boolean NULL, "verification_date" timestamptz NULL, "details" text NULL, "details_json" jsonb NULL, "evidence_control_implementations" character varying NULL, "internal_policy_control_implementations" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "controlimplementation_owner_id" to table: "control_implementations"
CREATE INDEX "controlimplementation_owner_id" ON "control_implementations" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "control_objectives" table
CREATE TABLE "control_objectives" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "revision" character varying NULL DEFAULT 'v0.0.1', "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "desired_outcome" text NULL, "desired_outcome_json" jsonb NULL, "status" character varying NULL DEFAULT 'DRAFT', "source" character varying NULL DEFAULT 'USER_DEFINED', "control_objective_type" character varying NULL, "category" character varying NULL, "subcategory" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "controlobjective_display_id_owner_id" to table: "control_objectives"
CREATE UNIQUE INDEX "controlobjective_display_id_owner_id" ON "control_objectives" ("display_id", "owner_id");
-- Create index "controlobjective_owner_id" to table: "control_objectives"
CREATE INDEX "controlobjective_owner_id" ON "control_objectives" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "custom_domains" table
CREATE TABLE "custom_domains" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "cname_record" character varying NOT NULL, "mappable_domain_id" character varying NOT NULL, "dns_verification_id" character varying NULL, "dns_verification_custom_domains" character varying NULL, "mappable_domain_custom_domains" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "customdomain_cname_record" to table: "custom_domains"
CREATE UNIQUE INDEX "customdomain_cname_record" ON "custom_domains" ("cname_record") WHERE (deleted_at IS NULL);
-- Create index "customdomain_owner_id" to table: "custom_domains"
CREATE INDEX "customdomain_owner_id" ON "custom_domains" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "custom_type_enums" table
CREATE TABLE "custom_type_enums" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "object_type" character varying NOT NULL, "field" character varying NOT NULL DEFAULT 'kind', "name" citext NOT NULL, "description" character varying NULL, "color" character varying NULL, "icon" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "customtypeenum_name_owner_id" to table: "custom_type_enums"
CREATE UNIQUE INDEX "customtypeenum_name_owner_id" ON "custom_type_enums" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "customtypeenum_object_type" to table: "custom_type_enums"
CREATE INDEX "customtypeenum_object_type" ON "custom_type_enums" ("object_type");
-- Create index "customtypeenum_owner_id" to table: "custom_type_enums"
CREATE INDEX "customtypeenum_owner_id" ON "custom_type_enums" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "dns_verifications" table
CREATE TABLE "dns_verifications" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "cloudflare_hostname_id" character varying NOT NULL, "dns_txt_record" character varying NOT NULL, "dns_txt_value" character varying NOT NULL, "dns_verification_status" character varying NOT NULL DEFAULT 'pending', "dns_verification_status_reason" character varying NULL, "acme_challenge_path" character varying NULL, "expected_acme_challenge_value" character varying NULL, "acme_challenge_status" character varying NOT NULL DEFAULT 'initializing', "acme_challenge_status_reason" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "dnsverification_cloudflare_hostname_id" to table: "dns_verifications"
CREATE UNIQUE INDEX "dnsverification_cloudflare_hostname_id" ON "dns_verifications" ("cloudflare_hostname_id") WHERE (deleted_at IS NULL);
-- Create index "dnsverification_owner_id" to table: "dns_verifications"
CREATE INDEX "dnsverification_owner_id" ON "dns_verifications" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "directory_accounts" table
CREATE TABLE "directory_accounts" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "external_id" character varying NOT NULL, "secondary_key" character varying NULL, "canonical_email" character varying NULL, "display_name" character varying NULL, "given_name" character varying NULL, "family_name" character varying NULL, "job_title" character varying NULL, "department" character varying NULL, "organization_unit" character varying NULL, "account_type" character varying NULL DEFAULT 'USER', "status" character varying NOT NULL DEFAULT 'ACTIVE', "mfa_state" character varying NOT NULL DEFAULT 'UNKNOWN', "last_seen_ip" character varying NULL, "last_login_at" timestamptz NULL, "observed_at" timestamptz NOT NULL, "profile_hash" character varying NOT NULL DEFAULT '', "profile" jsonb NULL, "raw_profile_file_id" character varying NULL, "source_version" character varying NULL, "integration_id" character varying NOT NULL, "directory_sync_run_id" character varying NOT NULL, "directory_sync_run_directory_accounts" character varying NULL, "integration_directory_accounts" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "directoryaccount_directory_sync_run_id_canonical_email" to table: "directory_accounts"
CREATE INDEX "directoryaccount_directory_sync_run_id_canonical_email" ON "directory_accounts" ("directory_sync_run_id", "canonical_email");
-- Create index "directoryaccount_display_id_owner_id" to table: "directory_accounts"
CREATE UNIQUE INDEX "directoryaccount_display_id_owner_id" ON "directory_accounts" ("display_id", "owner_id");
-- Create index "directoryaccount_integration_i_fdd1dd4536589b023ef42f9092fecf7d" to table: "directory_accounts"
CREATE UNIQUE INDEX "directoryaccount_integration_i_fdd1dd4536589b023ef42f9092fecf7d" ON "directory_accounts" ("integration_id", "external_id", "directory_sync_run_id");
-- Create index "directoryaccount_integration_id_canonical_email" to table: "directory_accounts"
CREATE INDEX "directoryaccount_integration_id_canonical_email" ON "directory_accounts" ("integration_id", "canonical_email");
-- Create index "directoryaccount_owner_id_canonical_email" to table: "directory_accounts"
CREATE INDEX "directoryaccount_owner_id_canonical_email" ON "directory_accounts" ("owner_id", "canonical_email");
-- Create "directory_groups" table
CREATE TABLE "directory_groups" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "external_id" character varying NOT NULL, "email" character varying NULL, "display_name" character varying NULL, "description" character varying NULL, "classification" character varying NOT NULL DEFAULT 'TEAM', "status" character varying NOT NULL DEFAULT 'ACTIVE', "external_sharing_allowed" boolean NULL DEFAULT false, "member_count" bigint NULL, "observed_at" timestamptz NOT NULL, "profile_hash" character varying NOT NULL DEFAULT '', "profile" jsonb NULL, "raw_profile_file_id" character varying NULL, "source_version" character varying NULL, "integration_id" character varying NOT NULL, "directory_sync_run_id" character varying NOT NULL, "directory_sync_run_directory_groups" character varying NULL, "integration_directory_groups" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "directorygroup_directory_sync_run_id_email" to table: "directory_groups"
CREATE INDEX "directorygroup_directory_sync_run_id_email" ON "directory_groups" ("directory_sync_run_id", "email");
-- Create index "directorygroup_display_id_owner_id" to table: "directory_groups"
CREATE UNIQUE INDEX "directorygroup_display_id_owner_id" ON "directory_groups" ("display_id", "owner_id");
-- Create index "directorygroup_integration_id_email" to table: "directory_groups"
CREATE INDEX "directorygroup_integration_id_email" ON "directory_groups" ("integration_id", "email");
-- Create index "directorygroup_integration_id_external_id_directory_sync_run_id" to table: "directory_groups"
CREATE UNIQUE INDEX "directorygroup_integration_id_external_id_directory_sync_run_id" ON "directory_groups" ("integration_id", "external_id", "directory_sync_run_id");
-- Create index "directorygroup_owner_id_email" to table: "directory_groups"
CREATE INDEX "directorygroup_owner_id_email" ON "directory_groups" ("owner_id", "email");
-- Create "directory_memberships" table
CREATE TABLE "directory_memberships" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "display_id" character varying NOT NULL, "role" character varying NULL DEFAULT 'MEMBER', "source" character varying NULL, "first_seen_at" timestamptz NULL, "last_seen_at" timestamptz NULL, "observed_at" timestamptz NOT NULL, "last_confirmed_run_id" character varying NULL, "metadata" jsonb NULL, "integration_id" character varying NOT NULL, "directory_sync_run_id" character varying NOT NULL, "directory_account_id" character varying NOT NULL, "directory_group_id" character varying NOT NULL, "directory_sync_run_directory_memberships" character varying NULL, "integration_directory_memberships" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "directorymembership_directory__c4933b3aba6a8094684cc9c233f43482" to table: "directory_memberships"
CREATE UNIQUE INDEX "directorymembership_directory__c4933b3aba6a8094684cc9c233f43482" ON "directory_memberships" ("directory_account_id", "directory_group_id", "directory_sync_run_id");
-- Create index "directorymembership_directory_account_id_directory_group_id" to table: "directory_memberships"
CREATE UNIQUE INDEX "directorymembership_directory_account_id_directory_group_id" ON "directory_memberships" ("directory_account_id", "directory_group_id");
-- Create index "directorymembership_directory_sync_run_id" to table: "directory_memberships"
CREATE INDEX "directorymembership_directory_sync_run_id" ON "directory_memberships" ("directory_sync_run_id");
-- Create index "directorymembership_display_id_owner_id" to table: "directory_memberships"
CREATE UNIQUE INDEX "directorymembership_display_id_owner_id" ON "directory_memberships" ("display_id", "owner_id");
-- Create index "directorymembership_integration_id_directory_sync_run_id" to table: "directory_memberships"
CREATE INDEX "directorymembership_integration_id_directory_sync_run_id" ON "directory_memberships" ("integration_id", "directory_sync_run_id");
-- Create "directory_sync_runs" table
CREATE TABLE "directory_sync_runs" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "display_id" character varying NOT NULL, "status" character varying NOT NULL DEFAULT 'PENDING', "started_at" timestamptz NOT NULL, "completed_at" timestamptz NULL, "source_cursor" character varying NULL, "full_count" bigint NOT NULL DEFAULT 0, "delta_count" bigint NOT NULL DEFAULT 0, "error" text NULL, "raw_manifest_file_id" character varying NULL, "stats" jsonb NULL, "integration_id" character varying NOT NULL, "integration_directory_sync_runs" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "directorysyncrun_display_id_owner_id" to table: "directory_sync_runs"
CREATE UNIQUE INDEX "directorysyncrun_display_id_owner_id" ON "directory_sync_runs" ("display_id", "owner_id");
-- Create index "directorysyncrun_integration_id_started_at" to table: "directory_sync_runs"
CREATE INDEX "directorysyncrun_integration_id_started_at" ON "directory_sync_runs" ("integration_id", "started_at");
-- Create "discussions" table
CREATE TABLE "discussions" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "external_id" character varying NULL, "is_resolved" boolean NOT NULL DEFAULT false, "control_discussions" character varying NULL, "internal_policy_discussions" character varying NULL, "owner_id" character varying NULL, "procedure_discussions" character varying NULL, "risk_discussions" character varying NULL, "subcontrol_discussions" character varying NULL, PRIMARY KEY ("id"));
-- Create index "discussion_owner_id" to table: "discussions"
CREATE INDEX "discussion_owner_id" ON "discussions" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "discussions_external_id_key" to table: "discussions"
CREATE UNIQUE INDEX "discussions_external_id_key" ON "discussions" ("external_id");
-- Create "document_data" table
CREATE TABLE "document_data" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "data" jsonb NOT NULL, "owner_id" character varying NULL, "template_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "documentdata_owner_id" to table: "document_data"
CREATE INDEX "documentdata_owner_id" ON "document_data" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "email_verification_tokens" table
CREATE TABLE "email_verification_tokens" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "token" character varying NOT NULL, "ttl" timestamptz NOT NULL, "email" character varying NOT NULL, "secret" bytea NOT NULL, "owner_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "email_verification_tokens_token_key" to table: "email_verification_tokens"
CREATE UNIQUE INDEX "email_verification_tokens_token_key" ON "email_verification_tokens" ("token");
-- Create index "emailverificationtoken_token" to table: "email_verification_tokens"
CREATE UNIQUE INDEX "emailverificationtoken_token" ON "email_verification_tokens" ("token") WHERE (deleted_at IS NULL);
-- Create "entities" table
CREATE TABLE "entities" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" citext NULL, "display_name" character varying NULL, "description" character varying NULL, "domains" jsonb NULL, "status" character varying NULL DEFAULT 'active', "entity_type_id" character varying NULL, "entity_type_entities" character varying NULL, "finding_entities" character varying NULL, "owner_id" character varying NULL, "remediation_entities" character varying NULL, "review_entities" character varying NULL, "risk_entities" character varying NULL, "scan_entities" character varying NULL, "vulnerability_entities" character varying NULL, PRIMARY KEY ("id"));
-- Create index "entity_name_owner_id" to table: "entities"
CREATE UNIQUE INDEX "entity_name_owner_id" ON "entities" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "entity_owner_id" to table: "entities"
CREATE INDEX "entity_owner_id" ON "entities" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "entity_types" table
CREATE TABLE "entity_types" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" citext NOT NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "entitytype_name_owner_id" to table: "entity_types"
CREATE UNIQUE INDEX "entitytype_name_owner_id" ON "entity_types" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "entitytype_owner_id" to table: "entity_types"
CREATE INDEX "entitytype_owner_id" ON "entity_types" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "events" table
CREATE TABLE "events" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "tags" jsonb NULL, "event_id" character varying NULL, "correlation_id" character varying NULL, "event_type" character varying NOT NULL, "metadata" jsonb NULL, "directory_membership_events" character varying NULL, "export_events" character varying NULL, PRIMARY KEY ("id"));
-- Create "evidences" table
CREATE TABLE "evidences" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "workflow_eligible_marker" boolean NULL DEFAULT true, "name" character varying NOT NULL, "description" character varying NULL, "collection_procedure" text NULL, "creation_date" timestamptz NOT NULL, "renewal_date" timestamptz NULL, "source" character varying NULL, "is_automated" boolean NULL DEFAULT false, "url" character varying NULL, "status" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "evidence_display_id_owner_id" to table: "evidences"
CREATE UNIQUE INDEX "evidence_display_id_owner_id" ON "evidences" ("display_id", "owner_id");
-- Create index "evidence_owner_id" to table: "evidences"
CREATE INDEX "evidence_owner_id" ON "evidences" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "exports" table
CREATE TABLE "exports" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "export_type" character varying NOT NULL, "format" character varying NOT NULL DEFAULT 'CSV', "status" character varying NOT NULL DEFAULT 'PENDING', "requestor_id" character varying NULL, "fields" jsonb NULL, "filters" character varying NULL, "error_message" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "export_owner_id" to table: "exports"
CREATE INDEX "export_owner_id" ON "exports" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "files" table
CREATE TABLE "files" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "provided_file_name" character varying NOT NULL, "provided_file_extension" character varying NOT NULL, "provided_file_size" bigint NULL, "persisted_file_size" bigint NULL, "detected_mime_type" character varying NULL, "md5_hash" character varying NULL, "detected_content_type" character varying NOT NULL, "store_key" character varying NULL, "category_type" character varying NULL, "uri" character varying NULL, "storage_scheme" character varying NULL, "storage_volume" character varying NULL, "storage_path" character varying NULL, "file_contents" bytea NULL, "metadata" jsonb NULL, "storage_region" character varying NULL, "storage_provider" character varying NULL, "last_accessed_at" timestamptz NULL, "export_files" character varying NULL, "finding_files" character varying NULL, "integration_files" character varying NULL, "note_files" character varying NULL, "remediation_files" character varying NULL, "review_files" character varying NULL, "vulnerability_files" character varying NULL, PRIMARY KEY ("id"));
-- Create "file_download_tokens" table
CREATE TABLE "file_download_tokens" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "token" character varying NULL, "ttl" timestamptz NULL, "user_id" character varying NULL, "organization_id" character varying NULL, "file_id" character varying NULL, "secret" bytea NULL, "owner_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "file_download_tokens_token_key" to table: "file_download_tokens"
CREATE UNIQUE INDEX "file_download_tokens_token_key" ON "file_download_tokens" ("token");
-- Create index "filedownloadtoken_token" to table: "file_download_tokens"
CREATE UNIQUE INDEX "filedownloadtoken_token" ON "file_download_tokens" ("token") WHERE (deleted_at IS NULL);
-- Create "findings" table
CREATE TABLE "findings" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "external_id" character varying NULL, "external_owner_id" character varying NULL, "source" character varying NULL, "resource_name" character varying NULL, "display_name" character varying NULL, "state" character varying NULL, "category" character varying NULL, "categories" jsonb NULL, "finding_class" character varying NULL, "severity" character varying NULL, "numeric_severity" double precision NULL, "score" double precision NULL, "impact" double precision NULL, "exploitability" double precision NULL, "priority" character varying NULL, "open" boolean NULL DEFAULT true, "blocks_production" boolean NULL, "production" boolean NULL, "public" boolean NULL, "validated" boolean NULL, "assessment_id" character varying NULL, "description" text NULL, "recommendation" text NULL, "recommended_actions" text NULL, "references" jsonb NULL, "steps_to_reproduce" jsonb NULL, "targets" jsonb NULL, "target_details" jsonb NULL, "vector" character varying NULL, "remediation_sla" bigint NULL, "status" character varying NULL, "event_time" timestamptz NULL, "reported_at" timestamptz NULL, "source_updated_at" timestamptz NULL, "external_uri" character varying NULL, "metadata" jsonb NULL, "raw_payload" jsonb NULL, "owner_id" character varying NULL, "remediation_findings" character varying NULL, "review_findings" character varying NULL, "vulnerability_findings" character varying NULL, PRIMARY KEY ("id"));
-- Create index "finding_display_id_owner_id" to table: "findings"
CREATE UNIQUE INDEX "finding_display_id_owner_id" ON "findings" ("display_id", "owner_id");
-- Create index "finding_external_id_external_owner_id_owner_id" to table: "findings"
CREATE UNIQUE INDEX "finding_external_id_external_owner_id_owner_id" ON "findings" ("external_id", "external_owner_id", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "finding_owner_id" to table: "findings"
CREATE INDEX "finding_owner_id" ON "findings" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "finding_controls" table
CREATE TABLE "finding_controls" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "external_standard" character varying NULL, "external_standard_version" character varying NULL, "external_control_id" character varying NULL, "source" character varying NULL, "metadata" jsonb NULL, "discovered_at" timestamptz NULL, "finding_id" character varying NOT NULL, "control_id" character varying NOT NULL, "standard_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "findingcontrol_finding_id_control_id" to table: "finding_controls"
CREATE UNIQUE INDEX "findingcontrol_finding_id_control_id" ON "finding_controls" ("finding_id", "control_id");
-- Create "groups" table
CREATE TABLE "groups" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "name" citext NOT NULL, "description" character varying NULL, "is_managed" boolean NULL DEFAULT false, "gravatar_logo_url" character varying NULL, "logo_url" character varying NULL, "display_name" character varying NOT NULL DEFAULT '', "scim_external_id" character varying NULL, "scim_display_name" character varying NULL, "scim_active" boolean NULL DEFAULT true, "scim_group_mailing" character varying NULL, "assessment_blocked_groups" character varying NULL, "assessment_editors" character varying NULL, "assessment_viewers" character varying NULL, "asset_blocked_groups" character varying NULL, "asset_editors" character varying NULL, "asset_viewers" character varying NULL, "finding_blocked_groups" character varying NULL, "finding_editors" character varying NULL, "finding_viewers" character varying NULL, "organization_control_creators" character varying NULL, "organization_control_implementation_creators" character varying NULL, "organization_control_objective_creators" character varying NULL, "organization_evidence_creators" character varying NULL, "organization_group_creators" character varying NULL, "organization_internal_policy_creators" character varying NULL, "organization_mapped_control_creators" character varying NULL, "organization_narrative_creators" character varying NULL, "organization_procedure_creators" character varying NULL, "organization_program_creators" character varying NULL, "organization_risk_creators" character varying NULL, "organization_scheduled_job_creators" character varying NULL, "organization_standard_creators" character varying NULL, "organization_template_creators" character varying NULL, "organization_subprocessor_creators" character varying NULL, "organization_trust_center_doc_creators" character varying NULL, "organization_trust_center_subprocessor_creators" character varying NULL, "owner_id" character varying NULL, "remediation_blocked_groups" character varying NULL, "remediation_editors" character varying NULL, "remediation_viewers" character varying NULL, "review_blocked_groups" character varying NULL, "review_editors" character varying NULL, "review_viewers" character varying NULL, "vulnerability_blocked_groups" character varying NULL, "vulnerability_editors" character varying NULL, "vulnerability_viewers" character varying NULL, "workflow_definition_groups" character varying NULL, PRIMARY KEY ("id"));
-- Create index "group_display_id_owner_id" to table: "groups"
CREATE UNIQUE INDEX "group_display_id_owner_id" ON "groups" ("display_id", "owner_id");
-- Create index "group_name_owner_id" to table: "groups"
CREATE UNIQUE INDEX "group_name_owner_id" ON "groups" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "group_owner_id" to table: "groups"
CREATE INDEX "group_owner_id" ON "groups" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "group_memberships" table
CREATE TABLE "group_memberships" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "role" character varying NOT NULL DEFAULT 'MEMBER', "group_id" character varying NOT NULL, "user_id" character varying NOT NULL, "group_membership_org_membership" character varying NULL, PRIMARY KEY ("id"));
-- Create index "groupmembership_user_id_group_id" to table: "group_memberships"
CREATE UNIQUE INDEX "groupmembership_user_id_group_id" ON "group_memberships" ("user_id", "group_id");
-- Create "group_settings" table
CREATE TABLE "group_settings" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "visibility" character varying NOT NULL DEFAULT 'PUBLIC', "join_policy" character varying NOT NULL DEFAULT 'INVITE_OR_APPLICATION', "sync_to_slack" boolean NULL DEFAULT false, "sync_to_github" boolean NULL DEFAULT false, "group_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "group_settings_group_id_key" to table: "group_settings"
CREATE UNIQUE INDEX "group_settings_group_id_key" ON "group_settings" ("group_id");
-- Create "hushes" table
CREATE TABLE "hushes" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "description" character varying NULL, "kind" character varying NULL, "secret_name" character varying NULL, "secret_value" character varying NULL, "credential_set" jsonb NULL, "metadata" jsonb NULL, "last_used_at" timestamptz NULL, "expires_at" timestamptz NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "hush_owner_id" to table: "hushes"
CREATE INDEX "hush_owner_id" ON "hushes" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "impersonation_events" table
CREATE TABLE "impersonation_events" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "impersonation_type" character varying NOT NULL, "action" character varying NOT NULL, "reason" character varying NULL, "ip_address" character varying NULL, "user_agent" character varying NULL, "scopes" jsonb NULL, "organization_id" character varying NOT NULL, "user_id" character varying NOT NULL, "target_user_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create "integrations" table
CREATE TABLE "integrations" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "description" character varying NULL, "kind" character varying NULL, "integration_type" character varying NULL, "metadata" jsonb NULL, "file_integrations" character varying NULL, "group_integrations" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "integration_owner_id" to table: "integrations"
CREATE INDEX "integration_owner_id" ON "integrations" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "internal_policies" table
CREATE TABLE "internal_policies" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "revision" character varying NULL DEFAULT 'v0.0.1', "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "status" character varying NULL DEFAULT 'DRAFT', "policy_type" character varying NULL, "details" text NULL, "details_json" jsonb NULL, "approval_required" boolean NULL DEFAULT true, "review_due" timestamptz NULL, "review_frequency" character varying NULL DEFAULT 'YEARLY', "summary" character varying NULL, "tag_suggestions" jsonb NULL, "dismissed_tag_suggestions" jsonb NULL, "control_suggestions" jsonb NULL, "dismissed_control_suggestions" jsonb NULL, "improvement_suggestions" jsonb NULL, "dismissed_improvement_suggestions" jsonb NULL, "url" character varying NULL, "internal_policy_kind_name" character varying NULL, "workflow_eligible_marker" boolean NULL DEFAULT true, "custom_type_enum_internal_policies" character varying NULL, "approver_id" character varying NULL, "delegate_id" character varying NULL, "internal_policy_kind_id" character varying NULL, "file_id" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "internalpolicy_display_id_owner_id" to table: "internal_policies"
CREATE UNIQUE INDEX "internalpolicy_display_id_owner_id" ON "internal_policies" ("display_id", "owner_id");
-- Create index "internalpolicy_owner_id" to table: "internal_policies"
CREATE INDEX "internalpolicy_owner_id" ON "internal_policies" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "invites" table
CREATE TABLE "invites" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "token" character varying NOT NULL, "expires" timestamptz NULL, "recipient" character varying NOT NULL, "status" character varying NOT NULL DEFAULT 'INVITATION_SENT', "role" character varying NOT NULL DEFAULT 'MEMBER', "send_attempts" bigint NOT NULL DEFAULT 1, "requestor_id" character varying NULL, "secret" bytea NOT NULL, "ownership_transfer" boolean NULL DEFAULT false, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "invite_owner_id" to table: "invites"
CREATE INDEX "invite_owner_id" ON "invites" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "invite_recipient_owner_id" to table: "invites"
CREATE UNIQUE INDEX "invite_recipient_owner_id" ON "invites" ("recipient", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "invites_token_key" to table: "invites"
CREATE UNIQUE INDEX "invites_token_key" ON "invites" ("token");
-- Create "job_results" table
CREATE TABLE "job_results" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "status" character varying NOT NULL, "exit_code" bigint NOT NULL, "finished_at" timestamptz NOT NULL, "started_at" timestamptz NOT NULL, "log" text NULL, "scheduled_job_id" character varying NOT NULL, "file_id" character varying NOT NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "jobresult_owner_id" to table: "job_results"
CREATE INDEX "jobresult_owner_id" ON "job_results" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "job_runners" table
CREATE TABLE "job_runners" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "status" character varying NOT NULL DEFAULT 'OFFLINE', "ip_address" character varying NULL, "last_seen" timestamptz NULL, "version" character varying NULL, "os" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "jobrunner_display_id_owner_id" to table: "job_runners"
CREATE UNIQUE INDEX "jobrunner_display_id_owner_id" ON "job_runners" ("display_id", "owner_id");
-- Create index "jobrunner_owner_id" to table: "job_runners"
CREATE INDEX "jobrunner_owner_id" ON "job_runners" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "job_runner_registration_tokens" table
CREATE TABLE "job_runner_registration_tokens" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "token" character varying NOT NULL, "expires_at" timestamptz NOT NULL, "last_used_at" timestamptz NULL, "job_runner_id" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "job_runner_registration_tokens_token_key" to table: "job_runner_registration_tokens"
CREATE UNIQUE INDEX "job_runner_registration_tokens_token_key" ON "job_runner_registration_tokens" ("token");
-- Create index "jobrunnerregistrationtoken_owner_id" to table: "job_runner_registration_tokens"
CREATE INDEX "jobrunnerregistrationtoken_owner_id" ON "job_runner_registration_tokens" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "job_runner_tokens" table
CREATE TABLE "job_runner_tokens" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "token" character varying NOT NULL, "expires_at" timestamptz NULL, "last_used_at" timestamptz NULL, "is_active" boolean NULL DEFAULT true, "revoked_reason" character varying NULL, "revoked_by" character varying NULL, "revoked_at" timestamptz NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "job_runner_tokens_token_key" to table: "job_runner_tokens"
CREATE UNIQUE INDEX "job_runner_tokens_token_key" ON "job_runner_tokens" ("token");
-- Create index "jobrunnertoken_owner_id" to table: "job_runner_tokens"
CREATE INDEX "jobrunnertoken_owner_id" ON "job_runner_tokens" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "jobrunnertoken_token_expires_at_is_active" to table: "job_runner_tokens"
CREATE INDEX "jobrunnertoken_token_expires_at_is_active" ON "job_runner_tokens" ("token", "expires_at", "is_active");
-- Create "job_templates" table
CREATE TABLE "job_templates" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "title" character varying NOT NULL, "description" character varying NULL, "platform" character varying NOT NULL, "windmill_path" character varying NULL, "download_url" character varying NOT NULL, "configuration" jsonb NULL, "cron" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "jobtemplate_display_id_owner_id" to table: "job_templates"
CREATE UNIQUE INDEX "jobtemplate_display_id_owner_id" ON "job_templates" ("display_id", "owner_id");
-- Create index "jobtemplate_owner_id" to table: "job_templates"
CREATE INDEX "jobtemplate_owner_id" ON "job_templates" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "mappable_domains" table
CREATE TABLE "mappable_domains" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "name" character varying NOT NULL, "zone_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "mappabledomain_name" to table: "mappable_domains"
CREATE UNIQUE INDEX "mappabledomain_name" ON "mappable_domains" ("name") WHERE (deleted_at IS NULL);
-- Create "mapped_controls" table
CREATE TABLE "mapped_controls" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "mapping_type" character varying NOT NULL DEFAULT 'EQUAL', "relation" character varying NULL, "confidence" bigint NULL, "source" character varying NULL DEFAULT 'MANUAL', "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "mappedcontrol_owner_id" to table: "mapped_controls"
CREATE INDEX "mappedcontrol_owner_id" ON "mapped_controls" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "narratives" table
CREATE TABLE "narratives" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "description" text NULL, "details" text NULL, "control_objective_narratives" character varying NULL, "owner_id" character varying NULL, "subcontrol_narratives" character varying NULL, PRIMARY KEY ("id"));
-- Create index "narrative_display_id_owner_id" to table: "narratives"
CREATE UNIQUE INDEX "narrative_display_id_owner_id" ON "narratives" ("display_id", "owner_id");
-- Create index "narrative_owner_id" to table: "narratives"
CREATE INDEX "narrative_owner_id" ON "narratives" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "notes" table
CREATE TABLE "notes" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "text" text NOT NULL, "text_json" jsonb NULL, "note_ref" character varying NULL, "is_edited" boolean NOT NULL DEFAULT false, "control_comments" character varying NULL, "discussion_id" character varying NULL, "entity_notes" character varying NULL, "evidence_comments" character varying NULL, "finding_comments" character varying NULL, "internal_policy_comments" character varying NULL, "owner_id" character varying NULL, "procedure_comments" character varying NULL, "program_notes" character varying NULL, "remediation_comments" character varying NULL, "review_comments" character varying NULL, "risk_comments" character varying NULL, "subcontrol_comments" character varying NULL, "task_comments" character varying NULL, "trust_center_posts" character varying NULL, "vulnerability_comments" character varying NULL, PRIMARY KEY ("id"));
-- Create index "note_display_id_owner_id" to table: "notes"
CREATE UNIQUE INDEX "note_display_id_owner_id" ON "notes" ("display_id", "owner_id");
-- Create index "note_owner_id" to table: "notes"
CREATE INDEX "note_owner_id" ON "notes" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "notifications" table
CREATE TABLE "notifications" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "tags" jsonb NULL, "notification_type" character varying NOT NULL, "object_type" character varying NOT NULL, "title" character varying NOT NULL, "body" text NOT NULL, "data" jsonb NULL, "read_at" timestamptz NULL, "channels" jsonb NULL, "topic" character varying NULL, "owner_id" character varying NULL, "user_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "notification_user_id_read_at_owner_id" to table: "notifications"
CREATE INDEX "notification_user_id_read_at_owner_id" ON "notifications" ("user_id", "read_at", "owner_id");
-- Create "onboardings" table
CREATE TABLE "onboardings" ("id" character varying NOT NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "company_name" character varying NOT NULL, "domains" jsonb NULL, "company_details" jsonb NULL, "user_details" jsonb NULL, "compliance" jsonb NULL, "organization_id" character varying NULL, PRIMARY KEY ("id"));
-- Create "org_memberships" table
CREATE TABLE "org_memberships" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "role" character varying NOT NULL DEFAULT 'MEMBER', "organization_id" character varying NOT NULL, "user_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "orgmembership_user_id_organization_id" to table: "org_memberships"
CREATE UNIQUE INDEX "orgmembership_user_id_organization_id" ON "org_memberships" ("user_id", "organization_id");
-- Create "org_modules" table
CREATE TABLE "org_modules" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "module" character varying NOT NULL, "price" jsonb NULL, "stripe_price_id" character varying NULL, "status" character varying NULL, "visibility" character varying NULL, "active" boolean NOT NULL DEFAULT true, "module_lookup_key" character varying NULL, "price_id" character varying NULL, "org_product_org_modules" character varying NULL, "subscription_id" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "orgmodule_owner_id" to table: "org_modules"
CREATE INDEX "orgmodule_owner_id" ON "org_modules" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "org_prices" table
CREATE TABLE "org_prices" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "price" jsonb NULL, "stripe_price_id" character varying NULL, "status" character varying NULL, "active" boolean NOT NULL DEFAULT true, "product_id" character varying NULL, "subscription_id" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "orgprice_owner_id" to table: "org_prices"
CREATE INDEX "orgprice_owner_id" ON "org_prices" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "org_products" table
CREATE TABLE "org_products" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "module" character varying NOT NULL, "stripe_product_id" character varying NULL, "status" character varying NULL, "active" boolean NOT NULL DEFAULT true, "price_id" character varying NULL, "org_module_org_products" character varying NULL, "subscription_id" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "orgproduct_owner_id" to table: "org_products"
CREATE INDEX "orgproduct_owner_id" ON "org_products" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "org_subscriptions" table
CREATE TABLE "org_subscriptions" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "stripe_subscription_id" character varying NULL, "stripe_subscription_status" character varying NULL, "active" boolean NOT NULL DEFAULT true, "expires_at" timestamptz NULL, "trial_expires_at" timestamptz NULL, "days_until_due" character varying NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "orgsubscription_owner_id" to table: "org_subscriptions"
CREATE INDEX "orgsubscription_owner_id" ON "org_subscriptions" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "organizations" table
CREATE TABLE "organizations" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "name" citext NOT NULL, "display_name" character varying NOT NULL DEFAULT '', "description" character varying NULL, "personal_org" boolean NULL DEFAULT false, "avatar_remote_url" character varying NULL, "avatar_updated_at" timestamptz NULL, "dedicated_db" boolean NOT NULL DEFAULT false, "stripe_customer_id" character varying NULL, "parent_organization_id" character varying NULL, "avatar_local_file_id" character varying NULL, PRIMARY KEY ("id"), CONSTRAINT "organizations_organizations_children" FOREIGN KEY ("parent_organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- Create index "organization_name" to table: "organizations"
CREATE UNIQUE INDEX "organization_name" ON "organizations" ("name") WHERE (deleted_at IS NULL);
-- Create index "organizations_stripe_customer_id_key" to table: "organizations"
CREATE UNIQUE INDEX "organizations_stripe_customer_id_key" ON "organizations" ("stripe_customer_id");
-- Create "organization_settings" table
CREATE TABLE "organization_settings" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "domains" jsonb NULL, "billing_contact" character varying NULL, "billing_email" character varying NULL, "billing_phone" character varying NULL, "billing_address" jsonb NULL, "tax_identifier" character varying NULL, "geo_location" character varying NULL DEFAULT 'AMER', "billing_notifications_enabled" boolean NOT NULL DEFAULT true, "allowed_email_domains" jsonb NULL, "allow_matching_domains_autojoin" boolean NULL DEFAULT false, "identity_provider" character varying NULL DEFAULT 'NONE', "identity_provider_client_id" character varying NULL, "identity_provider_client_secret" character varying NULL, "identity_provider_metadata_endpoint" character varying NULL, "identity_provider_auth_tested" boolean NOT NULL DEFAULT false, "identity_provider_entity_id" character varying NULL, "oidc_discovery_endpoint" character varying NULL, "saml_signin_url" character varying NULL, "saml_issuer" character varying NULL, "saml_cert" text NULL, "identity_provider_login_enforced" boolean NOT NULL DEFAULT false, "multifactor_auth_enforced" boolean NULL DEFAULT false, "compliance_webhook_token" character varying NULL, "payment_method_added" boolean NOT NULL DEFAULT false, "organization_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "organization_settings_compliance_webhook_token_key" to table: "organization_settings"
CREATE UNIQUE INDEX "organization_settings_compliance_webhook_token_key" ON "organization_settings" ("compliance_webhook_token");
-- Create index "organization_settings_organization_id_key" to table: "organization_settings"
CREATE UNIQUE INDEX "organization_settings_organization_id_key" ON "organization_settings" ("organization_id");
-- Create "password_reset_tokens" table
CREATE TABLE "password_reset_tokens" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "token" character varying NOT NULL, "ttl" timestamptz NOT NULL, "email" character varying NOT NULL, "secret" bytea NOT NULL, "owner_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "password_reset_tokens_token_key" to table: "password_reset_tokens"
CREATE UNIQUE INDEX "password_reset_tokens_token_key" ON "password_reset_tokens" ("token");
-- Create index "passwordresettoken_token" to table: "password_reset_tokens"
CREATE UNIQUE INDEX "passwordresettoken_token" ON "password_reset_tokens" ("token") WHERE (deleted_at IS NULL);
-- Create "personal_access_tokens" table
CREATE TABLE "personal_access_tokens" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "name" character varying NOT NULL, "token" character varying NOT NULL, "expires_at" timestamptz NULL, "description" character varying NULL, "scopes" jsonb NULL, "sso_authorizations" jsonb NULL, "last_used_at" timestamptz NULL, "is_active" boolean NULL DEFAULT true, "revoked_reason" character varying NULL, "revoked_by" character varying NULL, "revoked_at" timestamptz NULL, "owner_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "personal_access_tokens_token_key" to table: "personal_access_tokens"
CREATE UNIQUE INDEX "personal_access_tokens_token_key" ON "personal_access_tokens" ("token");
-- Create index "personalaccesstoken_token" to table: "personal_access_tokens"
CREATE INDEX "personalaccesstoken_token" ON "personal_access_tokens" ("token");
-- Create "procedures" table
CREATE TABLE "procedures" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "revision" character varying NULL DEFAULT 'v0.0.1', "name" character varying NOT NULL, "status" character varying NULL DEFAULT 'DRAFT', "procedure_type" character varying NULL, "details" text NULL, "details_json" jsonb NULL, "approval_required" boolean NULL DEFAULT true, "review_due" timestamptz NULL, "review_frequency" character varying NULL DEFAULT 'YEARLY', "summary" character varying NULL, "tag_suggestions" jsonb NULL, "dismissed_tag_suggestions" jsonb NULL, "control_suggestions" jsonb NULL, "dismissed_control_suggestions" jsonb NULL, "improvement_suggestions" jsonb NULL, "dismissed_improvement_suggestions" jsonb NULL, "url" character varying NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "procedure_kind_name" character varying NULL, "workflow_eligible_marker" boolean NULL DEFAULT true, "control_objective_procedures" character varying NULL, "custom_type_enum_procedures" character varying NULL, "owner_id" character varying NULL, "approver_id" character varying NULL, "delegate_id" character varying NULL, "procedure_kind_id" character varying NULL, "file_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "procedure_display_id_owner_id" to table: "procedures"
CREATE UNIQUE INDEX "procedure_display_id_owner_id" ON "procedures" ("display_id", "owner_id");
-- Create index "procedure_owner_id" to table: "procedures"
CREATE INDEX "procedure_owner_id" ON "procedures" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "programs" table
CREATE TABLE "programs" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "program_kind_name" character varying NULL, "name" character varying NOT NULL, "description" character varying NULL, "status" character varying NOT NULL DEFAULT 'NOT_STARTED', "program_type" character varying NOT NULL DEFAULT 'FRAMEWORK', "framework_name" character varying NULL, "start_date" timestamptz NULL, "end_date" timestamptz NULL, "auditor_ready" boolean NOT NULL DEFAULT false, "auditor_write_comments" boolean NOT NULL DEFAULT false, "auditor_read_comments" boolean NOT NULL DEFAULT false, "audit_firm" character varying NULL, "auditor" character varying NULL, "auditor_email" character varying NULL, "custom_type_enum_programs" character varying NULL, "finding_programs" character varying NULL, "owner_id" character varying NULL, "program_kind_id" character varying NULL, "remediation_programs" character varying NULL, "review_programs" character varying NULL, "program_owner_id" character varying NULL, "vulnerability_programs" character varying NULL, PRIMARY KEY ("id"));
-- Create index "program_display_id_owner_id" to table: "programs"
CREATE UNIQUE INDEX "program_display_id_owner_id" ON "programs" ("display_id", "owner_id");
-- Create index "program_owner_id" to table: "programs"
CREATE INDEX "program_owner_id" ON "programs" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "program_memberships" table
CREATE TABLE "program_memberships" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "role" character varying NOT NULL DEFAULT 'MEMBER', "program_id" character varying NOT NULL, "user_id" character varying NOT NULL, "program_membership_org_membership" character varying NULL, PRIMARY KEY ("id"));
-- Create index "programmembership_user_id_program_id" to table: "program_memberships"
CREATE UNIQUE INDEX "programmembership_user_id_program_id" ON "program_memberships" ("user_id", "program_id");
-- Create "remediations" table
CREATE TABLE "remediations" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "external_id" character varying NULL, "external_owner_id" character varying NULL, "title" character varying NULL, "state" character varying NULL, "intent" character varying NULL, "summary" text NULL, "explanation" text NULL, "instructions" text NULL, "owner_reference" character varying NULL, "repository_uri" character varying NULL, "pull_request_uri" character varying NULL, "ticket_reference" character varying NULL, "due_at" timestamptz NULL, "completed_at" timestamptz NULL, "pr_generated_at" timestamptz NULL, "error" text NULL, "source" character varying NULL, "external_uri" character varying NULL, "metadata" jsonb NULL, "finding_remediations" character varying NULL, "owner_id" character varying NULL, "review_remediations" character varying NULL, "vulnerability_remediations" character varying NULL, PRIMARY KEY ("id"));
-- Create index "remediation_display_id_owner_id" to table: "remediations"
CREATE UNIQUE INDEX "remediation_display_id_owner_id" ON "remediations" ("display_id", "owner_id");
-- Create index "remediation_external_id_external_owner_id_owner_id" to table: "remediations"
CREATE UNIQUE INDEX "remediation_external_id_external_owner_id_owner_id" ON "remediations" ("external_id", "external_owner_id", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "remediation_owner_id" to table: "remediations"
CREATE INDEX "remediation_owner_id" ON "remediations" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "reviews" table
CREATE TABLE "reviews" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "external_id" character varying NULL, "external_owner_id" character varying NULL, "title" character varying NOT NULL, "state" character varying NULL, "category" character varying NULL, "classification" character varying NULL, "summary" text NULL, "details" text NULL, "reporter" character varying NULL, "approved" boolean NULL DEFAULT false, "reviewed_at" timestamptz NULL, "reported_at" timestamptz NULL, "approved_at" timestamptz NULL, "source" character varying NULL, "external_uri" character varying NULL, "metadata" jsonb NULL, "raw_payload" jsonb NULL, "finding_reviews" character varying NULL, "owner_id" character varying NULL, "remediation_reviews" character varying NULL, "reviewer_id" character varying NULL, "vulnerability_reviews" character varying NULL, PRIMARY KEY ("id"));
-- Create index "review_external_id_external_owner_id_owner_id" to table: "reviews"
CREATE UNIQUE INDEX "review_external_id_external_owner_id_owner_id" ON "reviews" ("external_id", "external_owner_id", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "review_owner_id" to table: "reviews"
CREATE INDEX "review_owner_id" ON "reviews" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "risks" table
CREATE TABLE "risks" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "risk_kind_name" character varying NULL, "risk_category_name" character varying NULL, "name" character varying NOT NULL, "status" character varying NULL DEFAULT 'IDENTIFIED', "risk_type" character varying NULL, "category" character varying NULL, "impact" character varying NULL DEFAULT 'MODERATE', "likelihood" character varying NULL DEFAULT 'LIKELY', "score" bigint NULL, "mitigation" text NULL, "mitigation_json" jsonb NULL, "details" text NULL, "details_json" jsonb NULL, "business_costs" text NULL, "business_costs_json" jsonb NULL, "control_objective_risks" character varying NULL, "custom_type_enum_risks" character varying NULL, "custom_type_enum_risk_categories" character varying NULL, "finding_risks" character varying NULL, "owner_id" character varying NULL, "remediation_risks" character varying NULL, "review_risks" character varying NULL, "risk_kind_id" character varying NULL, "risk_category_id" character varying NULL, "stakeholder_id" character varying NULL, "delegate_id" character varying NULL, "vulnerability_risks" character varying NULL, PRIMARY KEY ("id"));
-- Create index "risk_display_id_owner_id" to table: "risks"
CREATE UNIQUE INDEX "risk_display_id_owner_id" ON "risks" ("display_id", "owner_id");
-- Create index "risk_owner_id" to table: "risks"
CREATE INDEX "risk_owner_id" ON "risks" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "scans" table
CREATE TABLE "scans" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "target" character varying NOT NULL, "scan_type" character varying NOT NULL DEFAULT 'DOMAIN', "metadata" jsonb NULL, "status" character varying NOT NULL DEFAULT 'PROCESSING', "control_scans" character varying NULL, "entity_scans" character varying NULL, "finding_scans" character varying NULL, "owner_id" character varying NULL, "risk_scans" character varying NULL, "vulnerability_scans" character varying NULL, PRIMARY KEY ("id"));
-- Create index "scan_owner_id" to table: "scans"
CREATE INDEX "scan_owner_id" ON "scans" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "scheduled_jobs" table
CREATE TABLE "scheduled_jobs" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "active" boolean NOT NULL DEFAULT true, "configuration" jsonb NULL, "cron" character varying NULL, "job_id" character varying NOT NULL, "owner_id" character varying NULL, "job_runner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "scheduledjob_display_id_owner_id" to table: "scheduled_jobs"
CREATE UNIQUE INDEX "scheduledjob_display_id_owner_id" ON "scheduled_jobs" ("display_id", "owner_id");
-- Create index "scheduledjob_owner_id" to table: "scheduled_jobs"
CREATE INDEX "scheduledjob_owner_id" ON "scheduled_jobs" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "scheduled_job_runs" table
CREATE TABLE "scheduled_job_runs" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "status" character varying NOT NULL DEFAULT 'PENDING', "expected_execution_time" timestamptz NOT NULL, "script" character varying NOT NULL, "owner_id" character varying NULL, "scheduled_job_id" character varying NOT NULL, "job_runner_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "scheduledjobrun_owner_id" to table: "scheduled_job_runs"
CREATE INDEX "scheduledjobrun_owner_id" ON "scheduled_job_runs" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "standards" table
CREATE TABLE "standards" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "revision" character varying NULL DEFAULT 'v0.0.1', "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "short_name" character varying NULL, "framework" text NULL, "description" text NULL, "governing_body_logo_url" character varying NULL, "governing_body" character varying NULL, "domains" jsonb NULL, "link" character varying NULL, "status" character varying NULL DEFAULT 'ACTIVE', "is_public" boolean NULL DEFAULT false, "free_to_use" boolean NULL DEFAULT false, "standard_type" character varying NULL, "version" character varying NULL, "owner_id" character varying NULL, "logo_file_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "standard_owner_id" to table: "standards"
CREATE INDEX "standard_owner_id" ON "standards" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "subcontrols" table
CREATE TABLE "subcontrols" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "title" character varying NULL, "description" text NULL, "description_json" jsonb NULL, "aliases" jsonb NULL, "reference_id" character varying NULL, "auditor_reference_id" character varying NULL, "status" character varying NULL DEFAULT 'NOT_IMPLEMENTED', "source" character varying NULL DEFAULT 'USER_DEFINED', "reference_framework" character varying NULL, "reference_framework_revision" character varying NULL, "control_type" character varying NULL DEFAULT 'PREVENTATIVE', "category" character varying NULL, "category_id" character varying NULL, "subcategory" character varying NULL, "mapped_categories" jsonb NULL, "assessment_objectives" jsonb NULL, "assessment_methods" jsonb NULL, "control_questions" jsonb NULL, "implementation_guidance" jsonb NULL, "example_evidence" jsonb NULL, "references" jsonb NULL, "testing_procedures" jsonb NULL, "evidence_requests" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "subcontrol_kind_name" character varying NULL, "workflow_eligible_marker" boolean NULL DEFAULT true, "ref_code" character varying NOT NULL, "control_id" character varying NOT NULL, "custom_type_enum_subcontrols" character varying NULL, "finding_subcontrols" character varying NULL, "owner_id" character varying NULL, "program_subcontrols" character varying NULL, "remediation_subcontrols" character varying NULL, "review_subcontrols" character varying NULL, "control_owner_id" character varying NULL, "delegate_id" character varying NULL, "responsible_party_id" character varying NULL, "subcontrol_kind_id" character varying NULL, "user_subcontrols" character varying NULL, "vulnerability_subcontrols" character varying NULL, PRIMARY KEY ("id"));
-- Create index "subcontrol_auditor_reference_id_deleted_at_owner_id" to table: "subcontrols"
CREATE INDEX "subcontrol_auditor_reference_id_deleted_at_owner_id" ON "subcontrols" ("auditor_reference_id", "deleted_at", "owner_id");
-- Create index "subcontrol_control_id_ref_code" to table: "subcontrols"
CREATE UNIQUE INDEX "subcontrol_control_id_ref_code" ON "subcontrols" ("control_id", "ref_code") WHERE (deleted_at IS NULL);
-- Create index "subcontrol_control_id_ref_code_owner_id" to table: "subcontrols"
CREATE INDEX "subcontrol_control_id_ref_code_owner_id" ON "subcontrols" ("control_id", "ref_code", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "subcontrol_display_id_owner_id" to table: "subcontrols"
CREATE UNIQUE INDEX "subcontrol_display_id_owner_id" ON "subcontrols" ("display_id", "owner_id");
-- Create index "subcontrol_owner_id" to table: "subcontrols"
CREATE INDEX "subcontrol_owner_id" ON "subcontrols" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "subcontrol_reference_id_deleted_at_owner_id" to table: "subcontrols"
CREATE INDEX "subcontrol_reference_id_deleted_at_owner_id" ON "subcontrols" ("reference_id", "deleted_at", "owner_id");
-- Create "subprocessors" table
CREATE TABLE "subprocessors" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "description" text NULL, "logo_remote_url" character varying NULL, "owner_id" character varying NULL, "logo_file_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "subprocessor_name_owner_id" to table: "subprocessors"
CREATE UNIQUE INDEX "subprocessor_name_owner_id" ON "subprocessors" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "subprocessor_owner_id" to table: "subprocessors"
CREATE INDEX "subprocessor_owner_id" ON "subprocessors" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "subscribers" table
CREATE TABLE "subscribers" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "email" character varying NOT NULL, "phone_number" character varying NULL, "verified_email" boolean NOT NULL DEFAULT false, "verified_phone" boolean NOT NULL DEFAULT false, "active" boolean NOT NULL DEFAULT false, "token" character varying NOT NULL, "ttl" timestamptz NOT NULL, "secret" bytea NOT NULL, "unsubscribed" boolean NOT NULL DEFAULT false, "send_attempts" bigint NOT NULL DEFAULT 1, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "subscriber_email_owner_id" to table: "subscribers"
CREATE UNIQUE INDEX "subscriber_email_owner_id" ON "subscribers" ("email", "owner_id") WHERE ((deleted_at IS NULL) AND (unsubscribed = false));
-- Create index "subscriber_owner_id" to table: "subscribers"
CREATE INDEX "subscriber_owner_id" ON "subscribers" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "subscribers_token_key" to table: "subscribers"
CREATE UNIQUE INDEX "subscribers_token_key" ON "subscribers" ("token");
-- Create "tfa_settings" table
CREATE TABLE "tfa_settings" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tfa_secret" character varying NULL, "verified" boolean NOT NULL DEFAULT false, "recovery_codes" jsonb NULL, "phone_otp_allowed" boolean NULL DEFAULT false, "email_otp_allowed" boolean NULL DEFAULT false, "totp_allowed" boolean NULL DEFAULT false, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "tfasetting_owner_id" to table: "tfa_settings"
CREATE UNIQUE INDEX "tfasetting_owner_id" ON "tfa_settings" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "tag_definitions" table
CREATE TABLE "tag_definitions" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" citext NOT NULL, "aliases" jsonb NULL, "slug" citext NULL, "description" character varying NULL, "color" character varying NULL, "owner_id" character varying NULL, "workflow_definition_tag_definitions" character varying NULL, PRIMARY KEY ("id"));
-- Create index "tagdefinition_name_owner_id" to table: "tag_definitions"
CREATE UNIQUE INDEX "tagdefinition_name_owner_id" ON "tag_definitions" ("name", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "tagdefinition_owner_id" to table: "tag_definitions"
CREATE INDEX "tagdefinition_owner_id" ON "tag_definitions" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "tagdefinition_slug_owner_id" to table: "tag_definitions"
CREATE UNIQUE INDEX "tagdefinition_slug_owner_id" ON "tag_definitions" ("slug", "owner_id") WHERE (deleted_at IS NULL);
-- Create "tasks" table
CREATE TABLE "tasks" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "task_kind_name" character varying NULL, "title" character varying NOT NULL, "details" text NULL, "details_json" jsonb NULL, "status" character varying NOT NULL DEFAULT 'OPEN', "category" character varying NULL, "due" timestamptz NULL, "completed" timestamptz NULL, "system_generated" boolean NOT NULL DEFAULT false, "idempotency_key" character varying NULL, "external_reference_url" jsonb NULL, "custom_type_enum_tasks" character varying NULL, "finding_tasks" character varying NULL, "integration_tasks" character varying NULL, "owner_id" character varying NULL, "remediation_tasks" character varying NULL, "review_tasks" character varying NULL, "task_kind_id" character varying NULL, "parent_task_id" character varying NULL, "assigner_id" character varying NULL, "assignee_id" character varying NULL, "vulnerability_tasks" character varying NULL, PRIMARY KEY ("id"), CONSTRAINT "tasks_tasks_tasks" FOREIGN KEY ("parent_task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- Create index "task_display_id_owner_id" to table: "tasks"
CREATE UNIQUE INDEX "task_display_id_owner_id" ON "tasks" ("display_id", "owner_id");
-- Create index "task_owner_id" to table: "tasks"
CREATE INDEX "task_owner_id" ON "tasks" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "templates" table
CREATE TABLE "templates" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "template_type" character varying NOT NULL DEFAULT 'DOCUMENT', "description" character varying NULL, "kind" character varying NULL DEFAULT 'QUESTIONNAIRE', "jsonconfig" jsonb NOT NULL, "uischema" jsonb NULL, "owner_id" character varying NULL, "trust_center_id" character varying NULL, PRIMARY KEY ("id"), CONSTRAINT "templates_check" CHECK ((trust_center_id IS NOT NULL) OR ((kind)::text <> 'TRUSTCENTER_NDA'::text)));
-- Create index "template_name_owner_id_template_type" to table: "templates"
CREATE UNIQUE INDEX "template_name_owner_id_template_type" ON "templates" ("name", "owner_id", "template_type") WHERE (deleted_at IS NULL);
-- Create index "template_owner_id" to table: "templates"
CREATE INDEX "template_owner_id" ON "templates" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "template_trust_center_id" to table: "templates"
CREATE UNIQUE INDEX "template_trust_center_id" ON "templates" ("trust_center_id") WHERE ((deleted_at IS NULL) AND ((kind)::text = 'TRUSTCENTER_NDA'::text));
-- Create "trust_centers" table
CREATE TABLE "trust_centers" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "slug" character varying NULL, "pirsch_domain_id" character varying NULL, "pirsch_identification_code" character varying NULL, "preview_status" character varying NULL DEFAULT 'NONE', "owner_id" character varying NULL, "custom_domain_id" character varying NULL, "preview_domain_id" character varying NULL, "trust_center_setting" character varying NULL, "trust_center_preview_setting" character varying NULL, "trust_center_watermark_config" character varying NULL, PRIMARY KEY ("id"));
-- Create index "trustcenter_owner_id" to table: "trust_centers"
CREATE INDEX "trustcenter_owner_id" ON "trust_centers" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "trustcenter_slug" to table: "trust_centers"
CREATE UNIQUE INDEX "trustcenter_slug" ON "trust_centers" ("slug") WHERE (deleted_at IS NULL);
-- Create "trust_center_compliances" table
CREATE TABLE "trust_center_compliances" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "standard_id" character varying NOT NULL, "trust_center_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "trustcentercompliance_standard_id_trust_center_id" to table: "trust_center_compliances"
CREATE UNIQUE INDEX "trustcentercompliance_standard_id_trust_center_id" ON "trust_center_compliances" ("standard_id", "trust_center_id") WHERE (deleted_at IS NULL);
-- Create "trust_center_docs" table
CREATE TABLE "trust_center_docs" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "title" character varying NOT NULL, "category" character varying NOT NULL, "watermarking_enabled" boolean NULL, "watermark_status" character varying NULL DEFAULT 'DISABLED', "visibility" character varying NULL DEFAULT 'NOT_VISIBLE', "standard_id" character varying NULL, "trust_center_id" character varying NULL, "file_id" character varying NULL, "original_file_id" character varying NULL, PRIMARY KEY ("id"));
-- Create "trust_center_settings" table
CREATE TABLE "trust_center_settings" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "trust_center_id" character varying NULL, "title" character varying NULL, "overview" character varying NULL, "logo_remote_url" character varying NULL, "favicon_remote_url" character varying NULL, "theme_mode" character varying NULL DEFAULT 'EASY', "primary_color" character varying NULL, "font" character varying NULL, "foreground_color" character varying NULL, "background_color" character varying NULL, "accent_color" character varying NULL, "secondary_background_color" character varying NULL, "secondary_foreground_color" character varying NULL, "environment" character varying NULL DEFAULT 'LIVE', "logo_local_file_id" character varying NULL, "favicon_local_file_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "trustcentersetting_trust_center_id_environment" to table: "trust_center_settings"
CREATE UNIQUE INDEX "trustcentersetting_trust_center_id_environment" ON "trust_center_settings" ("trust_center_id", "environment") WHERE (deleted_at IS NULL);
-- Create "trust_center_subprocessors" table
CREATE TABLE "trust_center_subprocessors" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "countries" jsonb NULL, "category" character varying NOT NULL, "subprocessor_id" character varying NOT NULL, "trust_center_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "trustcentersubprocessor_subprocessor_id_trust_center_id" to table: "trust_center_subprocessors"
CREATE UNIQUE INDEX "trustcentersubprocessor_subprocessor_id_trust_center_id" ON "trust_center_subprocessors" ("subprocessor_id", "trust_center_id") WHERE (deleted_at IS NULL);
-- Create "trust_center_watermark_configs" table
CREATE TABLE "trust_center_watermark_configs" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "trust_center_id" character varying NULL, "is_enabled" boolean NULL DEFAULT true, "text" character varying NULL, "font_size" double precision NULL DEFAULT 48, "opacity" double precision NULL DEFAULT 0.3, "rotation" double precision NULL DEFAULT 45, "color" character varying NULL DEFAULT '#808080', "font" character varying NULL DEFAULT 'HELVETICA', "owner_id" character varying NULL, "logo_id" character varying NULL, PRIMARY KEY ("id"), CONSTRAINT "text_or_logo_id_not_null" CHECK ((text IS NOT NULL) OR (logo_id IS NOT NULL)));
-- Create index "trustcenterwatermarkconfig_owner_id" to table: "trust_center_watermark_configs"
CREATE INDEX "trustcenterwatermarkconfig_owner_id" ON "trust_center_watermark_configs" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "trustcenterwatermarkconfig_trust_center_id" to table: "trust_center_watermark_configs"
CREATE UNIQUE INDEX "trustcenterwatermarkconfig_trust_center_id" ON "trust_center_watermark_configs" ("trust_center_id") WHERE (deleted_at IS NULL);
-- Create "trustcenter_entities" table
CREATE TABLE "trustcenter_entities" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "url" character varying NULL, "name" character varying NOT NULL, "file_trustcenter_entities" character varying NULL, "trust_center_trustcenter_entities" character varying NULL, "logo_file_id" character varying NULL, "trust_center_id" character varying NULL, "entity_type_id" character varying NULL, PRIMARY KEY ("id"));
-- Create "users" table
CREATE TABLE "users" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "email" character varying NOT NULL, "first_name" character varying NULL, "last_name" character varying NULL, "display_name" character varying NOT NULL, "avatar_remote_url" character varying NULL, "avatar_updated_at" timestamptz NULL, "last_seen" timestamptz NULL, "last_login_provider" character varying NULL, "password" character varying NULL, "sub" character varying NULL, "auth_provider" character varying NOT NULL DEFAULT 'CREDENTIALS', "role" character varying NULL DEFAULT 'USER', "scim_external_id" character varying NULL, "scim_username" character varying NULL, "scim_active" boolean NULL DEFAULT true, "scim_preferred_language" character varying NULL, "scim_locale" character varying NULL, "avatar_local_file_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "user_email" to table: "users"
CREATE UNIQUE INDEX "user_email" ON "users" ("email") WHERE (deleted_at IS NULL);
-- Create index "users_display_id_key" to table: "users"
CREATE UNIQUE INDEX "users_display_id_key" ON "users" ("display_id");
-- Create index "users_sub_key" to table: "users"
CREATE UNIQUE INDEX "users_sub_key" ON "users" ("sub");
-- Create "user_settings" table
CREATE TABLE "user_settings" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "locked" boolean NOT NULL DEFAULT false, "silenced_at" timestamptz NULL, "suspended_at" timestamptz NULL, "status" character varying NOT NULL DEFAULT 'ACTIVE', "email_confirmed" boolean NOT NULL DEFAULT false, "is_webauthn_allowed" boolean NULL DEFAULT false, "is_tfa_enabled" boolean NULL DEFAULT false, "phone_number" character varying NULL, "user_id" character varying NULL, "user_setting_default_org" character varying NULL, PRIMARY KEY ("id"));
-- Create index "user_settings_user_id_key" to table: "user_settings"
CREATE UNIQUE INDEX "user_settings_user_id_key" ON "user_settings" ("user_id");
-- Create "vulnerabilities" table
CREATE TABLE "vulnerabilities" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "external_owner_id" character varying NULL, "external_id" character varying NOT NULL, "cve_id" character varying NULL, "source" character varying NULL, "display_name" character varying NULL, "category" character varying NULL, "severity" character varying NULL, "score" double precision NULL, "impact" double precision NULL, "exploitability" double precision NULL, "priority" character varying NULL, "status" character varying NULL, "summary" text NULL, "description" text NULL, "vector" character varying NULL, "remediation_sla" bigint NULL, "open" boolean NULL DEFAULT true, "blocking" boolean NULL DEFAULT false, "production" boolean NULL, "public" boolean NULL, "validated" boolean NULL, "references" jsonb NULL, "impacts" jsonb NULL, "published_at" timestamptz NULL, "discovered_at" timestamptz NULL, "source_updated_at" timestamptz NULL, "external_uri" character varying NULL, "metadata" jsonb NULL, "raw_payload" jsonb NULL, "finding_vulnerabilities" character varying NULL, "owner_id" character varying NULL, "remediation_vulnerabilities" character varying NULL, "review_vulnerabilities" character varying NULL, PRIMARY KEY ("id"));
-- Create index "vulnerability_cve_id_owner_id" to table: "vulnerabilities"
CREATE UNIQUE INDEX "vulnerability_cve_id_owner_id" ON "vulnerabilities" ("cve_id", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "vulnerability_display_id_owner_id" to table: "vulnerabilities"
CREATE UNIQUE INDEX "vulnerability_display_id_owner_id" ON "vulnerabilities" ("display_id", "owner_id");
-- Create index "vulnerability_external_id_owner_id" to table: "vulnerabilities"
CREATE UNIQUE INDEX "vulnerability_external_id_owner_id" ON "vulnerabilities" ("external_id", "owner_id") WHERE (deleted_at IS NULL);
-- Create index "vulnerability_owner_id" to table: "vulnerabilities"
CREATE INDEX "vulnerability_owner_id" ON "vulnerabilities" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "webauthns" table
CREATE TABLE "webauthns" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "tags" jsonb NULL, "credential_id" bytea NULL, "public_key" bytea NULL, "attestation_type" character varying NULL, "aaguid" bytea NOT NULL, "sign_count" integer NOT NULL, "transports" jsonb NOT NULL, "backup_eligible" boolean NOT NULL DEFAULT false, "backup_state" boolean NOT NULL DEFAULT false, "user_present" boolean NOT NULL DEFAULT false, "user_verified" boolean NOT NULL DEFAULT false, "owner_id" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create index "webauthns_credential_id_key" to table: "webauthns"
CREATE UNIQUE INDEX "webauthns_credential_id_key" ON "webauthns" ("credential_id");
-- Create "workflow_assignments" table
CREATE TABLE "workflow_assignments" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "assignment_key" character varying NOT NULL, "role" character varying NOT NULL DEFAULT 'APPROVER', "label" character varying NULL, "required" boolean NOT NULL DEFAULT true, "status" character varying NOT NULL DEFAULT 'PENDING', "metadata" jsonb NULL, "decided_at" timestamptz NULL, "notes" text NULL, "owner_id" character varying NULL, "workflow_instance_id" character varying NOT NULL, "actor_user_id" character varying NULL, "actor_group_id" character varying NULL, "workflow_instance_workflow_assignments" character varying NULL, PRIMARY KEY ("id"));
-- Create index "workflowassignment_display_id_owner_id" to table: "workflow_assignments"
CREATE UNIQUE INDEX "workflowassignment_display_id_owner_id" ON "workflow_assignments" ("display_id", "owner_id");
-- Create index "workflowassignment_owner_id" to table: "workflow_assignments"
CREATE INDEX "workflowassignment_owner_id" ON "workflow_assignments" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "workflowassignment_workflow_instance_id_assignment_key" to table: "workflow_assignments"
CREATE UNIQUE INDEX "workflowassignment_workflow_instance_id_assignment_key" ON "workflow_assignments" ("workflow_instance_id", "assignment_key");
-- Create "workflow_assignment_targets" table
CREATE TABLE "workflow_assignment_targets" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "target_type" character varying NOT NULL, "resolver_key" character varying NULL, "owner_id" character varying NULL, "workflow_assignment_workflow_assignment_targets" character varying NULL, "workflow_assignment_id" character varying NOT NULL, "target_user_id" character varying NULL, "target_group_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "workflowassignmenttarget_display_id_owner_id" to table: "workflow_assignment_targets"
CREATE UNIQUE INDEX "workflowassignmenttarget_display_id_owner_id" ON "workflow_assignment_targets" ("display_id", "owner_id");
-- Create index "workflowassignmenttarget_owner_id" to table: "workflow_assignment_targets"
CREATE INDEX "workflowassignmenttarget_owner_id" ON "workflow_assignment_targets" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "workflowassignmenttarget_workf_699c5ebc2d2baaa6c7e976bd177928fc" to table: "workflow_assignment_targets"
CREATE UNIQUE INDEX "workflowassignmenttarget_workf_699c5ebc2d2baaa6c7e976bd177928fc" ON "workflow_assignment_targets" ("workflow_assignment_id", "target_type", "target_user_id", "target_group_id", "resolver_key") WHERE (deleted_at IS NULL);
-- Create index "workflowassignmenttarget_workflow_assignment_id" to table: "workflow_assignment_targets"
CREATE INDEX "workflowassignmenttarget_workflow_assignment_id" ON "workflow_assignment_targets" ("workflow_assignment_id") WHERE (deleted_at IS NULL);
-- Create "workflow_definitions" table
CREATE TABLE "workflow_definitions" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "system_owned" boolean NULL DEFAULT false, "internal_notes" character varying NULL, "system_internal_id" character varying NULL, "name" character varying NOT NULL, "description" text NULL, "workflow_kind" character varying NOT NULL, "schema_type" character varying NOT NULL, "revision" bigint NOT NULL DEFAULT 1, "draft" boolean NOT NULL DEFAULT true, "published_at" timestamptz NULL, "cooldown_seconds" bigint NOT NULL DEFAULT 0, "is_default" boolean NOT NULL DEFAULT false, "active" boolean NOT NULL DEFAULT true, "trigger_operations" jsonb NULL, "trigger_fields" jsonb NULL, "approval_fields" jsonb NULL, "approval_edges" jsonb NULL, "approval_submission_mode" character varying NULL DEFAULT 'MANUAL_SUBMIT', "definition_json" jsonb NULL, "tracked_fields" jsonb NULL, "owner_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "workflowdefinition_display_id_owner_id" to table: "workflow_definitions"
CREATE UNIQUE INDEX "workflowdefinition_display_id_owner_id" ON "workflow_definitions" ("display_id", "owner_id");
-- Create index "workflowdefinition_owner_id" to table: "workflow_definitions"
CREATE INDEX "workflowdefinition_owner_id" ON "workflow_definitions" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "workflow_events" table
CREATE TABLE "workflow_events" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "event_type" character varying NOT NULL, "payload" jsonb NULL, "owner_id" character varying NULL, "workflow_instance_id" character varying NOT NULL, "workflow_instance_workflow_events" character varying NULL, PRIMARY KEY ("id"));
-- Create index "workflowevent_display_id_owner_id" to table: "workflow_events"
CREATE UNIQUE INDEX "workflowevent_display_id_owner_id" ON "workflow_events" ("display_id", "owner_id");
-- Create index "workflowevent_owner_id" to table: "workflow_events"
CREATE INDEX "workflowevent_owner_id" ON "workflow_events" ("owner_id") WHERE (deleted_at IS NULL);
-- Create "workflow_instances" table
CREATE TABLE "workflow_instances" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "display_id" character varying NOT NULL, "tags" jsonb NULL, "state" character varying NOT NULL DEFAULT 'RUNNING', "context" jsonb NULL, "last_evaluated_at" timestamptz NULL, "definition_snapshot" jsonb NULL, "current_action_index" bigint NOT NULL DEFAULT 0, "owner_id" character varying NULL, "workflow_definition_id" character varying NOT NULL, "control_id" character varying NULL, "internal_policy_id" character varying NULL, "evidence_id" character varying NULL, "subcontrol_id" character varying NULL, "action_plan_id" character varying NULL, "procedure_id" character varying NULL, "workflow_proposal_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "workflowinstance_display_id_owner_id" to table: "workflow_instances"
CREATE UNIQUE INDEX "workflowinstance_display_id_owner_id" ON "workflow_instances" ("display_id", "owner_id");
-- Create index "workflowinstance_owner_id" to table: "workflow_instances"
CREATE INDEX "workflowinstance_owner_id" ON "workflow_instances" ("owner_id") WHERE (deleted_at IS NULL);
-- Create index "workflowinstance_workflow_definition_id" to table: "workflow_instances"
CREATE INDEX "workflowinstance_workflow_definition_id" ON "workflow_instances" ("workflow_definition_id") WHERE (deleted_at IS NULL);
-- Create "workflow_object_refs" table
CREATE TABLE "workflow_object_refs" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "display_id" character varying NOT NULL, "owner_id" character varying NULL, "workflow_instance_workflow_object_refs" character varying NULL, "workflow_instance_id" character varying NOT NULL, "control_id" character varying NULL, "task_id" character varying NULL, "internal_policy_id" character varying NULL, "finding_id" character varying NULL, "directory_account_id" character varying NULL, "directory_group_id" character varying NULL, "directory_membership_id" character varying NULL, "evidence_id" character varying NULL, "subcontrol_id" character varying NULL, "action_plan_id" character varying NULL, "procedure_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "workflowobjectref_display_id_owner_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_display_id_owner_id" ON "workflow_object_refs" ("display_id", "owner_id");
-- Create index "workflowobjectref_workflow_instance_id_action_plan_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_action_plan_id" ON "workflow_object_refs" ("workflow_instance_id", "action_plan_id");
-- Create index "workflowobjectref_workflow_instance_id_control_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_control_id" ON "workflow_object_refs" ("workflow_instance_id", "control_id");
-- Create index "workflowobjectref_workflow_instance_id_directory_account_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_directory_account_id" ON "workflow_object_refs" ("workflow_instance_id", "directory_account_id");
-- Create index "workflowobjectref_workflow_instance_id_directory_group_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_directory_group_id" ON "workflow_object_refs" ("workflow_instance_id", "directory_group_id");
-- Create index "workflowobjectref_workflow_instance_id_directory_membership_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_directory_membership_id" ON "workflow_object_refs" ("workflow_instance_id", "directory_membership_id");
-- Create index "workflowobjectref_workflow_instance_id_evidence_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_evidence_id" ON "workflow_object_refs" ("workflow_instance_id", "evidence_id");
-- Create index "workflowobjectref_workflow_instance_id_finding_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_finding_id" ON "workflow_object_refs" ("workflow_instance_id", "finding_id");
-- Create index "workflowobjectref_workflow_instance_id_internal_policy_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_internal_policy_id" ON "workflow_object_refs" ("workflow_instance_id", "internal_policy_id");
-- Create index "workflowobjectref_workflow_instance_id_procedure_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_procedure_id" ON "workflow_object_refs" ("workflow_instance_id", "procedure_id");
-- Create index "workflowobjectref_workflow_instance_id_subcontrol_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_subcontrol_id" ON "workflow_object_refs" ("workflow_instance_id", "subcontrol_id");
-- Create index "workflowobjectref_workflow_instance_id_task_id" to table: "workflow_object_refs"
CREATE UNIQUE INDEX "workflowobjectref_workflow_instance_id_task_id" ON "workflow_object_refs" ("workflow_instance_id", "task_id");
-- Create "workflow_proposals" table
CREATE TABLE "workflow_proposals" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "tags" jsonb NULL, "domain_key" character varying NOT NULL, "state" character varying NOT NULL DEFAULT 'DRAFT', "revision" bigint NOT NULL DEFAULT 1, "changes" jsonb NULL, "proposed_hash" character varying NULL, "approved_hash" character varying NULL, "submitted_at" timestamptz NULL, "owner_id" character varying NULL, "workflow_object_ref_id" character varying NOT NULL, "submitted_by_user_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "workflowproposal_workflow_object_ref_id_domain_key" to table: "workflow_proposals"
CREATE UNIQUE INDEX "workflowproposal_workflow_object_ref_id_domain_key" ON "workflow_proposals" ("workflow_object_ref_id", "domain_key") WHERE ((state)::text = ANY ((ARRAY['DRAFT'::character varying, 'SUBMITTED'::character varying])::text[]));
-- Create "action_plan_tasks" table
CREATE TABLE "action_plan_tasks" ("action_plan_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("action_plan_id", "task_id"));
-- Create "contact_files" table
CREATE TABLE "contact_files" ("contact_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("contact_id", "file_id"));
-- Create "control_control_objectives" table
CREATE TABLE "control_control_objectives" ("control_id" character varying NOT NULL, "control_objective_id" character varying NOT NULL, PRIMARY KEY ("control_id", "control_objective_id"));
-- Create "control_tasks" table
CREATE TABLE "control_tasks" ("control_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("control_id", "task_id"));
-- Create "control_narratives" table
CREATE TABLE "control_narratives" ("control_id" character varying NOT NULL, "narrative_id" character varying NOT NULL, PRIMARY KEY ("control_id", "narrative_id"));
-- Create "control_risks" table
CREATE TABLE "control_risks" ("control_id" character varying NOT NULL, "risk_id" character varying NOT NULL, PRIMARY KEY ("control_id", "risk_id"));
-- Create "control_action_plans" table
CREATE TABLE "control_action_plans" ("control_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("control_id", "action_plan_id"));
-- Create "control_procedures" table
CREATE TABLE "control_procedures" ("control_id" character varying NOT NULL, "procedure_id" character varying NOT NULL, PRIMARY KEY ("control_id", "procedure_id"));
-- Create "control_blocked_groups" table
CREATE TABLE "control_blocked_groups" ("control_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_id", "group_id"));
-- Create "control_editors" table
CREATE TABLE "control_editors" ("control_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_id", "group_id"));
-- Create "control_assets" table
CREATE TABLE "control_assets" ("control_id" character varying NOT NULL, "asset_id" character varying NOT NULL, PRIMARY KEY ("control_id", "asset_id"));
-- Create "control_control_implementations" table
CREATE TABLE "control_control_implementations" ("control_id" character varying NOT NULL, "control_implementation_id" character varying NOT NULL, PRIMARY KEY ("control_id", "control_implementation_id"));
-- Create "control_implementation_blocked_groups" table
CREATE TABLE "control_implementation_blocked_groups" ("control_implementation_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_implementation_id", "group_id"));
-- Create "control_implementation_editors" table
CREATE TABLE "control_implementation_editors" ("control_implementation_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_implementation_id", "group_id"));
-- Create "control_implementation_viewers" table
CREATE TABLE "control_implementation_viewers" ("control_implementation_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_implementation_id", "group_id"));
-- Create "control_implementation_tasks" table
CREATE TABLE "control_implementation_tasks" ("control_implementation_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("control_implementation_id", "task_id"));
-- Create "control_objective_blocked_groups" table
CREATE TABLE "control_objective_blocked_groups" ("control_objective_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_objective_id", "group_id"));
-- Create "control_objective_editors" table
CREATE TABLE "control_objective_editors" ("control_objective_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_objective_id", "group_id"));
-- Create "control_objective_viewers" table
CREATE TABLE "control_objective_viewers" ("control_objective_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("control_objective_id", "group_id"));
-- Create "control_objective_tasks" table
CREATE TABLE "control_objective_tasks" ("control_objective_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("control_objective_id", "task_id"));
-- Create "document_data_files" table
CREATE TABLE "document_data_files" ("document_data_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("document_data_id", "file_id"));
-- Create "entity_blocked_groups" table
CREATE TABLE "entity_blocked_groups" ("entity_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("entity_id", "group_id"));
-- Create "entity_editors" table
CREATE TABLE "entity_editors" ("entity_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("entity_id", "group_id"));
-- Create "entity_viewers" table
CREATE TABLE "entity_viewers" ("entity_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("entity_id", "group_id"));
-- Create "entity_contacts" table
CREATE TABLE "entity_contacts" ("entity_id" character varying NOT NULL, "contact_id" character varying NOT NULL, PRIMARY KEY ("entity_id", "contact_id"));
-- Create "entity_documents" table
CREATE TABLE "entity_documents" ("entity_id" character varying NOT NULL, "document_data_id" character varying NOT NULL, PRIMARY KEY ("entity_id", "document_data_id"));
-- Create "entity_files" table
CREATE TABLE "entity_files" ("entity_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("entity_id", "file_id"));
-- Create "entity_assets" table
CREATE TABLE "entity_assets" ("entity_id" character varying NOT NULL, "asset_id" character varying NOT NULL, PRIMARY KEY ("entity_id", "asset_id"));
-- Create "evidence_controls" table
CREATE TABLE "evidence_controls" ("evidence_id" character varying NOT NULL, "control_id" character varying NOT NULL, PRIMARY KEY ("evidence_id", "control_id"));
-- Create "evidence_subcontrols" table
CREATE TABLE "evidence_subcontrols" ("evidence_id" character varying NOT NULL, "subcontrol_id" character varying NOT NULL, PRIMARY KEY ("evidence_id", "subcontrol_id"));
-- Create "evidence_control_objectives" table
CREATE TABLE "evidence_control_objectives" ("evidence_id" character varying NOT NULL, "control_objective_id" character varying NOT NULL, PRIMARY KEY ("evidence_id", "control_objective_id"));
-- Create "evidence_files" table
CREATE TABLE "evidence_files" ("evidence_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("evidence_id", "file_id"));
-- Create "file_events" table
CREATE TABLE "file_events" ("file_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("file_id", "event_id"));
-- Create "file_secrets" table
CREATE TABLE "file_secrets" ("file_id" character varying NOT NULL, "hush_id" character varying NOT NULL, PRIMARY KEY ("file_id", "hush_id"));
-- Create "finding_action_plans" table
CREATE TABLE "finding_action_plans" ("finding_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("finding_id", "action_plan_id"));
-- Create "group_events" table
CREATE TABLE "group_events" ("group_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("group_id", "event_id"));
-- Create "group_files" table
CREATE TABLE "group_files" ("group_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("group_id", "file_id"));
-- Create "group_tasks" table
CREATE TABLE "group_tasks" ("group_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("group_id", "task_id"));
-- Create "group_membership_events" table
CREATE TABLE "group_membership_events" ("group_membership_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("group_membership_id", "event_id"));
-- Create "hush_events" table
CREATE TABLE "hush_events" ("hush_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("hush_id", "event_id"));
-- Create "integration_secrets" table
CREATE TABLE "integration_secrets" ("integration_id" character varying NOT NULL, "hush_id" character varying NOT NULL, PRIMARY KEY ("integration_id", "hush_id"));
-- Create "integration_events" table
CREATE TABLE "integration_events" ("integration_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("integration_id", "event_id"));
-- Create "integration_findings" table
CREATE TABLE "integration_findings" ("integration_id" character varying NOT NULL, "finding_id" character varying NOT NULL, PRIMARY KEY ("integration_id", "finding_id"));
-- Create "integration_vulnerabilities" table
CREATE TABLE "integration_vulnerabilities" ("integration_id" character varying NOT NULL, "vulnerability_id" character varying NOT NULL, PRIMARY KEY ("integration_id", "vulnerability_id"));
-- Create "integration_reviews" table
CREATE TABLE "integration_reviews" ("integration_id" character varying NOT NULL, "review_id" character varying NOT NULL, PRIMARY KEY ("integration_id", "review_id"));
-- Create "integration_remediations" table
CREATE TABLE "integration_remediations" ("integration_id" character varying NOT NULL, "remediation_id" character varying NOT NULL, PRIMARY KEY ("integration_id", "remediation_id"));
-- Create "integration_action_plans" table
CREATE TABLE "integration_action_plans" ("integration_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("integration_id", "action_plan_id"));
-- Create "internal_policy_blocked_groups" table
CREATE TABLE "internal_policy_blocked_groups" ("internal_policy_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "group_id"));
-- Create "internal_policy_editors" table
CREATE TABLE "internal_policy_editors" ("internal_policy_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "group_id"));
-- Create "internal_policy_control_objectives" table
CREATE TABLE "internal_policy_control_objectives" ("internal_policy_id" character varying NOT NULL, "control_objective_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "control_objective_id"));
-- Create "internal_policy_controls" table
CREATE TABLE "internal_policy_controls" ("internal_policy_id" character varying NOT NULL, "control_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "control_id"));
-- Create "internal_policy_subcontrols" table
CREATE TABLE "internal_policy_subcontrols" ("internal_policy_id" character varying NOT NULL, "subcontrol_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "subcontrol_id"));
-- Create "internal_policy_procedures" table
CREATE TABLE "internal_policy_procedures" ("internal_policy_id" character varying NOT NULL, "procedure_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "procedure_id"));
-- Create "internal_policy_narratives" table
CREATE TABLE "internal_policy_narratives" ("internal_policy_id" character varying NOT NULL, "narrative_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "narrative_id"));
-- Create "internal_policy_tasks" table
CREATE TABLE "internal_policy_tasks" ("internal_policy_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "task_id"));
-- Create "internal_policy_risks" table
CREATE TABLE "internal_policy_risks" ("internal_policy_id" character varying NOT NULL, "risk_id" character varying NOT NULL, PRIMARY KEY ("internal_policy_id", "risk_id"));
-- Create "invite_events" table
CREATE TABLE "invite_events" ("invite_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("invite_id", "event_id"));
-- Create "invite_groups" table
CREATE TABLE "invite_groups" ("invite_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("invite_id", "group_id"));
-- Create "job_runner_job_runner_tokens" table
CREATE TABLE "job_runner_job_runner_tokens" ("job_runner_id" character varying NOT NULL, "job_runner_token_id" character varying NOT NULL, PRIMARY KEY ("job_runner_id", "job_runner_token_id"));
-- Create "mapped_control_blocked_groups" table
CREATE TABLE "mapped_control_blocked_groups" ("mapped_control_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("mapped_control_id", "group_id"));
-- Create "mapped_control_editors" table
CREATE TABLE "mapped_control_editors" ("mapped_control_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("mapped_control_id", "group_id"));
-- Create "mapped_control_from_controls" table
CREATE TABLE "mapped_control_from_controls" ("mapped_control_id" character varying NOT NULL, "control_id" character varying NOT NULL, PRIMARY KEY ("mapped_control_id", "control_id"));
-- Create "mapped_control_to_controls" table
CREATE TABLE "mapped_control_to_controls" ("mapped_control_id" character varying NOT NULL, "control_id" character varying NOT NULL, PRIMARY KEY ("mapped_control_id", "control_id"));
-- Create "mapped_control_from_subcontrols" table
CREATE TABLE "mapped_control_from_subcontrols" ("mapped_control_id" character varying NOT NULL, "subcontrol_id" character varying NOT NULL, PRIMARY KEY ("mapped_control_id", "subcontrol_id"));
-- Create "mapped_control_to_subcontrols" table
CREATE TABLE "mapped_control_to_subcontrols" ("mapped_control_id" character varying NOT NULL, "subcontrol_id" character varying NOT NULL, PRIMARY KEY ("mapped_control_id", "subcontrol_id"));
-- Create "narrative_blocked_groups" table
CREATE TABLE "narrative_blocked_groups" ("narrative_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("narrative_id", "group_id"));
-- Create "narrative_editors" table
CREATE TABLE "narrative_editors" ("narrative_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("narrative_id", "group_id"));
-- Create "narrative_viewers" table
CREATE TABLE "narrative_viewers" ("narrative_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("narrative_id", "group_id"));
-- Create "org_membership_events" table
CREATE TABLE "org_membership_events" ("org_membership_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("org_membership_id", "event_id"));
-- Create "org_module_org_prices" table
CREATE TABLE "org_module_org_prices" ("org_module_id" character varying NOT NULL, "org_price_id" character varying NOT NULL, PRIMARY KEY ("org_module_id", "org_price_id"));
-- Create "org_product_org_prices" table
CREATE TABLE "org_product_org_prices" ("org_product_id" character varying NOT NULL, "org_price_id" character varying NOT NULL, PRIMARY KEY ("org_product_id", "org_price_id"));
-- Create "org_subscription_events" table
CREATE TABLE "org_subscription_events" ("org_subscription_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("org_subscription_id", "event_id"));
-- Create "organization_personal_access_tokens" table
CREATE TABLE "organization_personal_access_tokens" ("organization_id" character varying NOT NULL, "personal_access_token_id" character varying NOT NULL, PRIMARY KEY ("organization_id", "personal_access_token_id"));
-- Create "organization_files" table
CREATE TABLE "organization_files" ("organization_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("organization_id", "file_id"));
-- Create "organization_events" table
CREATE TABLE "organization_events" ("organization_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("organization_id", "event_id"));
-- Create "organization_setting_files" table
CREATE TABLE "organization_setting_files" ("organization_setting_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("organization_setting_id", "file_id"));
-- Create "personal_access_token_events" table
CREATE TABLE "personal_access_token_events" ("personal_access_token_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("personal_access_token_id", "event_id"));
-- Create "procedure_blocked_groups" table
CREATE TABLE "procedure_blocked_groups" ("procedure_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("procedure_id", "group_id"));
-- Create "procedure_editors" table
CREATE TABLE "procedure_editors" ("procedure_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("procedure_id", "group_id"));
-- Create "procedure_narratives" table
CREATE TABLE "procedure_narratives" ("procedure_id" character varying NOT NULL, "narrative_id" character varying NOT NULL, PRIMARY KEY ("procedure_id", "narrative_id"));
-- Create "procedure_risks" table
CREATE TABLE "procedure_risks" ("procedure_id" character varying NOT NULL, "risk_id" character varying NOT NULL, PRIMARY KEY ("procedure_id", "risk_id"));
-- Create "procedure_tasks" table
CREATE TABLE "procedure_tasks" ("procedure_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("procedure_id", "task_id"));
-- Create "program_blocked_groups" table
CREATE TABLE "program_blocked_groups" ("program_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("program_id", "group_id"));
-- Create "program_editors" table
CREATE TABLE "program_editors" ("program_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("program_id", "group_id"));
-- Create "program_viewers" table
CREATE TABLE "program_viewers" ("program_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("program_id", "group_id"));
-- Create "program_controls" table
CREATE TABLE "program_controls" ("program_id" character varying NOT NULL, "control_id" character varying NOT NULL, PRIMARY KEY ("program_id", "control_id"));
-- Create "program_control_objectives" table
CREATE TABLE "program_control_objectives" ("program_id" character varying NOT NULL, "control_objective_id" character varying NOT NULL, PRIMARY KEY ("program_id", "control_objective_id"));
-- Create "program_internal_policies" table
CREATE TABLE "program_internal_policies" ("program_id" character varying NOT NULL, "internal_policy_id" character varying NOT NULL, PRIMARY KEY ("program_id", "internal_policy_id"));
-- Create "program_procedures" table
CREATE TABLE "program_procedures" ("program_id" character varying NOT NULL, "procedure_id" character varying NOT NULL, PRIMARY KEY ("program_id", "procedure_id"));
-- Create "program_risks" table
CREATE TABLE "program_risks" ("program_id" character varying NOT NULL, "risk_id" character varying NOT NULL, PRIMARY KEY ("program_id", "risk_id"));
-- Create "program_tasks" table
CREATE TABLE "program_tasks" ("program_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("program_id", "task_id"));
-- Create "program_files" table
CREATE TABLE "program_files" ("program_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("program_id", "file_id"));
-- Create "program_evidence" table
CREATE TABLE "program_evidence" ("program_id" character varying NOT NULL, "evidence_id" character varying NOT NULL, PRIMARY KEY ("program_id", "evidence_id"));
-- Create "program_narratives" table
CREATE TABLE "program_narratives" ("program_id" character varying NOT NULL, "narrative_id" character varying NOT NULL, PRIMARY KEY ("program_id", "narrative_id"));
-- Create "program_action_plans" table
CREATE TABLE "program_action_plans" ("program_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("program_id", "action_plan_id"));
-- Create "remediation_action_plans" table
CREATE TABLE "remediation_action_plans" ("remediation_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("remediation_id", "action_plan_id"));
-- Create "review_action_plans" table
CREATE TABLE "review_action_plans" ("review_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("review_id", "action_plan_id"));
-- Create "risk_blocked_groups" table
CREATE TABLE "risk_blocked_groups" ("risk_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("risk_id", "group_id"));
-- Create "risk_editors" table
CREATE TABLE "risk_editors" ("risk_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("risk_id", "group_id"));
-- Create "risk_viewers" table
CREATE TABLE "risk_viewers" ("risk_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("risk_id", "group_id"));
-- Create "risk_action_plans" table
CREATE TABLE "risk_action_plans" ("risk_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("risk_id", "action_plan_id"));
-- Create "risk_tasks" table
CREATE TABLE "risk_tasks" ("risk_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("risk_id", "task_id"));
-- Create "scan_blocked_groups" table
CREATE TABLE "scan_blocked_groups" ("scan_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("scan_id", "group_id"));
-- Create "scan_editors" table
CREATE TABLE "scan_editors" ("scan_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("scan_id", "group_id"));
-- Create "scan_viewers" table
CREATE TABLE "scan_viewers" ("scan_id" character varying NOT NULL, "group_id" character varying NOT NULL, PRIMARY KEY ("scan_id", "group_id"));
-- Create "scan_assets" table
CREATE TABLE "scan_assets" ("scan_id" character varying NOT NULL, "asset_id" character varying NOT NULL, PRIMARY KEY ("scan_id", "asset_id"));
-- Create "scheduled_job_controls" table
CREATE TABLE "scheduled_job_controls" ("scheduled_job_id" character varying NOT NULL, "control_id" character varying NOT NULL, PRIMARY KEY ("scheduled_job_id", "control_id"));
-- Create "scheduled_job_subcontrols" table
CREATE TABLE "scheduled_job_subcontrols" ("scheduled_job_id" character varying NOT NULL, "subcontrol_id" character varying NOT NULL, PRIMARY KEY ("scheduled_job_id", "subcontrol_id"));
-- Create "subcontrol_control_objectives" table
CREATE TABLE "subcontrol_control_objectives" ("subcontrol_id" character varying NOT NULL, "control_objective_id" character varying NOT NULL, PRIMARY KEY ("subcontrol_id", "control_objective_id"));
-- Create "subcontrol_tasks" table
CREATE TABLE "subcontrol_tasks" ("subcontrol_id" character varying NOT NULL, "task_id" character varying NOT NULL, PRIMARY KEY ("subcontrol_id", "task_id"));
-- Create "subcontrol_risks" table
CREATE TABLE "subcontrol_risks" ("subcontrol_id" character varying NOT NULL, "risk_id" character varying NOT NULL, PRIMARY KEY ("subcontrol_id", "risk_id"));
-- Create "subcontrol_procedures" table
CREATE TABLE "subcontrol_procedures" ("subcontrol_id" character varying NOT NULL, "procedure_id" character varying NOT NULL, PRIMARY KEY ("subcontrol_id", "procedure_id"));
-- Create "subcontrol_control_implementations" table
CREATE TABLE "subcontrol_control_implementations" ("subcontrol_id" character varying NOT NULL, "control_implementation_id" character varying NOT NULL, PRIMARY KEY ("subcontrol_id", "control_implementation_id"));
-- Create "subscriber_events" table
CREATE TABLE "subscriber_events" ("subscriber_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("subscriber_id", "event_id"));
-- Create "task_evidence" table
CREATE TABLE "task_evidence" ("task_id" character varying NOT NULL, "evidence_id" character varying NOT NULL, PRIMARY KEY ("task_id", "evidence_id"));
-- Create "template_files" table
CREATE TABLE "template_files" ("template_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("template_id", "file_id"));
-- Create "trust_center_setting_files" table
CREATE TABLE "trust_center_setting_files" ("trust_center_setting_id" character varying NOT NULL, "file_id" character varying NOT NULL, PRIMARY KEY ("trust_center_setting_id", "file_id"));
-- Create "user_events" table
CREATE TABLE "user_events" ("user_id" character varying NOT NULL, "event_id" character varying NOT NULL, PRIMARY KEY ("user_id", "event_id"));
-- Create "vulnerability_action_plans" table
CREATE TABLE "vulnerability_action_plans" ("vulnerability_id" character varying NOT NULL, "action_plan_id" character varying NOT NULL, PRIMARY KEY ("vulnerability_id", "action_plan_id"));
-- Modify "api_tokens" table
ALTER TABLE "api_tokens" ADD CONSTRAINT "api_tokens_organizations_api_tokens" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "action_plans" table
ALTER TABLE "action_plans" ADD CONSTRAINT "action_plans_custom_type_enums_action_plan_kind" FOREIGN KEY ("action_plan_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_custom_type_enums_action_plans" FOREIGN KEY ("custom_type_enum_action_plans") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_files_file" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_groups_approver" FOREIGN KEY ("approver_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_groups_delegate" FOREIGN KEY ("delegate_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_organizations_action_plans" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_subcontrols_action_plans" FOREIGN KEY ("subcontrol_action_plans") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_users_action_plans" FOREIGN KEY ("user_action_plans") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "assessments" table
ALTER TABLE "assessments" ADD CONSTRAINT "assessments_organizations_assessments" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "assessments_templates_assessments" FOREIGN KEY ("template_id") REFERENCES "templates" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "assessment_responses" table
ALTER TABLE "assessment_responses" ADD CONSTRAINT "assessment_responses_assessments_assessment_responses" FOREIGN KEY ("assessment_id") REFERENCES "assessments" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "assessment_responses_document_data_document" FOREIGN KEY ("document_data_id") REFERENCES "document_data" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "assessment_responses_organizations_assessment_responses" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "assets" table
ALTER TABLE "assets" ADD CONSTRAINT "assets_findings_assets" FOREIGN KEY ("finding_assets") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "assets_organizations_assets" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "assets_remediations_assets" FOREIGN KEY ("remediation_assets") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "assets_reviews_assets" FOREIGN KEY ("review_assets") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "assets_risks_assets" FOREIGN KEY ("risk_assets") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "assets_vulnerabilities_assets" FOREIGN KEY ("vulnerability_assets") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "contacts" table
ALTER TABLE "contacts" ADD CONSTRAINT "contacts_organizations_contacts" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "controls" table
ALTER TABLE "controls" ADD CONSTRAINT "controls_custom_type_enums_control_kind" FOREIGN KEY ("control_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_custom_type_enums_controls" FOREIGN KEY ("custom_type_enum_controls") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_entities_responsible_party" FOREIGN KEY ("responsible_party_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_groups_control_owner" FOREIGN KEY ("control_owner_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_groups_delegate" FOREIGN KEY ("delegate_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_organizations_controls" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_remediations_controls" FOREIGN KEY ("remediation_controls") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_reviews_controls" FOREIGN KEY ("review_controls") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_standards_controls" FOREIGN KEY ("standard_id") REFERENCES "standards" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_vulnerabilities_controls" FOREIGN KEY ("vulnerability_controls") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "control_implementations" table
ALTER TABLE "control_implementations" ADD CONSTRAINT "control_implementations_evidences_control_implementations" FOREIGN KEY ("evidence_control_implementations") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "control_implementations_intern_78a7d74302db6f99776c0594111f170b" FOREIGN KEY ("internal_policy_control_implementations") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "control_implementations_organizations_control_implementations" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "control_objectives" table
ALTER TABLE "control_objectives" ADD CONSTRAINT "control_objectives_organizations_control_objectives" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "custom_domains" table
ALTER TABLE "custom_domains" ADD CONSTRAINT "custom_domains_dns_verifications_custom_domains" FOREIGN KEY ("dns_verification_custom_domains") REFERENCES "dns_verifications" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "custom_domains_dns_verifications_dns_verification" FOREIGN KEY ("dns_verification_id") REFERENCES "dns_verifications" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "custom_domains_mappable_domains_custom_domains" FOREIGN KEY ("mappable_domain_custom_domains") REFERENCES "mappable_domains" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "custom_domains_mappable_domains_mappable_domain" FOREIGN KEY ("mappable_domain_id") REFERENCES "mappable_domains" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "custom_domains_organizations_custom_domains" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "custom_type_enums" table
ALTER TABLE "custom_type_enums" ADD CONSTRAINT "custom_type_enums_organizations_custom_type_enums" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "dns_verifications" table
ALTER TABLE "dns_verifications" ADD CONSTRAINT "dns_verifications_organizations_dns_verifications" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "directory_accounts" table
ALTER TABLE "directory_accounts" ADD CONSTRAINT "directory_accounts_directory_sync_runs_directory_accounts" FOREIGN KEY ("directory_sync_run_directory_accounts") REFERENCES "directory_sync_runs" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "directory_accounts_directory_sync_runs_directory_sync_run" FOREIGN KEY ("directory_sync_run_id") REFERENCES "directory_sync_runs" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_accounts_integrations_directory_accounts" FOREIGN KEY ("integration_directory_accounts") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "directory_accounts_integrations_integration" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_accounts_organizations_directory_accounts" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "directory_groups" table
ALTER TABLE "directory_groups" ADD CONSTRAINT "directory_groups_directory_sync_runs_directory_groups" FOREIGN KEY ("directory_sync_run_directory_groups") REFERENCES "directory_sync_runs" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "directory_groups_directory_sync_runs_directory_sync_run" FOREIGN KEY ("directory_sync_run_id") REFERENCES "directory_sync_runs" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_groups_integrations_directory_groups" FOREIGN KEY ("integration_directory_groups") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "directory_groups_integrations_integration" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_groups_organizations_directory_groups" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "directory_memberships" table
ALTER TABLE "directory_memberships" ADD CONSTRAINT "directory_memberships_directory_accounts_directory_account" FOREIGN KEY ("directory_account_id") REFERENCES "directory_accounts" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_memberships_directory_groups_directory_group" FOREIGN KEY ("directory_group_id") REFERENCES "directory_groups" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_memberships_directory_sync_runs_directory_memberships" FOREIGN KEY ("directory_sync_run_directory_memberships") REFERENCES "directory_sync_runs" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "directory_memberships_directory_sync_runs_directory_sync_run" FOREIGN KEY ("directory_sync_run_id") REFERENCES "directory_sync_runs" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_memberships_integrations_directory_memberships" FOREIGN KEY ("integration_directory_memberships") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "directory_memberships_integrations_integration" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_memberships_organizations_directory_memberships" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "directory_sync_runs" table
ALTER TABLE "directory_sync_runs" ADD CONSTRAINT "directory_sync_runs_integrations_directory_sync_runs" FOREIGN KEY ("integration_directory_sync_runs") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "directory_sync_runs_integrations_integration" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "directory_sync_runs_organizations_directory_sync_runs" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "discussions" table
ALTER TABLE "discussions" ADD CONSTRAINT "discussions_controls_discussions" FOREIGN KEY ("control_discussions") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "discussions_internal_policies_discussions" FOREIGN KEY ("internal_policy_discussions") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "discussions_organizations_discussions" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "discussions_procedures_discussions" FOREIGN KEY ("procedure_discussions") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "discussions_risks_discussions" FOREIGN KEY ("risk_discussions") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "discussions_subcontrols_discussions" FOREIGN KEY ("subcontrol_discussions") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "document_data" table
ALTER TABLE "document_data" ADD CONSTRAINT "document_data_organizations_documents" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "document_data_templates_documents" FOREIGN KEY ("template_id") REFERENCES "templates" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "email_verification_tokens" table
ALTER TABLE "email_verification_tokens" ADD CONSTRAINT "email_verification_tokens_users_email_verification_tokens" FOREIGN KEY ("owner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "entities" table
ALTER TABLE "entities" ADD CONSTRAINT "entities_entity_types_entities" FOREIGN KEY ("entity_type_entities") REFERENCES "entity_types" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_entity_types_entity_type" FOREIGN KEY ("entity_type_id") REFERENCES "entity_types" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_findings_entities" FOREIGN KEY ("finding_entities") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_organizations_entities" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_remediations_entities" FOREIGN KEY ("remediation_entities") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_reviews_entities" FOREIGN KEY ("review_entities") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_risks_entities" FOREIGN KEY ("risk_entities") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_scans_entities" FOREIGN KEY ("scan_entities") REFERENCES "scans" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_vulnerabilities_entities" FOREIGN KEY ("vulnerability_entities") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "entity_types" table
ALTER TABLE "entity_types" ADD CONSTRAINT "entity_types_organizations_entity_types" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "events" table
ALTER TABLE "events" ADD CONSTRAINT "events_directory_memberships_events" FOREIGN KEY ("directory_membership_events") REFERENCES "directory_memberships" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "events_exports_events" FOREIGN KEY ("export_events") REFERENCES "exports" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "evidences" table
ALTER TABLE "evidences" ADD CONSTRAINT "evidences_organizations_evidence" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "exports" table
ALTER TABLE "exports" ADD CONSTRAINT "exports_organizations_exports" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "files" table
ALTER TABLE "files" ADD CONSTRAINT "files_exports_files" FOREIGN KEY ("export_files") REFERENCES "exports" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_findings_files" FOREIGN KEY ("finding_files") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_integrations_files" FOREIGN KEY ("integration_files") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_notes_files" FOREIGN KEY ("note_files") REFERENCES "notes" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_remediations_files" FOREIGN KEY ("remediation_files") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_reviews_files" FOREIGN KEY ("review_files") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_vulnerabilities_files" FOREIGN KEY ("vulnerability_files") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "file_download_tokens" table
ALTER TABLE "file_download_tokens" ADD CONSTRAINT "file_download_tokens_users_file_download_tokens" FOREIGN KEY ("owner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "findings" table
ALTER TABLE "findings" ADD CONSTRAINT "findings_organizations_findings" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "findings_remediations_findings" FOREIGN KEY ("remediation_findings") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "findings_reviews_findings" FOREIGN KEY ("review_findings") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "findings_vulnerabilities_findings" FOREIGN KEY ("vulnerability_findings") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "finding_controls" table
ALTER TABLE "finding_controls" ADD CONSTRAINT "finding_controls_controls_control" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "finding_controls_findings_finding" FOREIGN KEY ("finding_id") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "finding_controls_standards_standard" FOREIGN KEY ("standard_id") REFERENCES "standards" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "groups" table
ALTER TABLE "groups" ADD CONSTRAINT "groups_assessments_blocked_groups" FOREIGN KEY ("assessment_blocked_groups") REFERENCES "assessments" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_assessments_editors" FOREIGN KEY ("assessment_editors") REFERENCES "assessments" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_assessments_viewers" FOREIGN KEY ("assessment_viewers") REFERENCES "assessments" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_assets_blocked_groups" FOREIGN KEY ("asset_blocked_groups") REFERENCES "assets" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_assets_editors" FOREIGN KEY ("asset_editors") REFERENCES "assets" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_assets_viewers" FOREIGN KEY ("asset_viewers") REFERENCES "assets" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_findings_blocked_groups" FOREIGN KEY ("finding_blocked_groups") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_findings_editors" FOREIGN KEY ("finding_editors") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_findings_viewers" FOREIGN KEY ("finding_viewers") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_control_creators" FOREIGN KEY ("organization_control_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_control_implementation_creators" FOREIGN KEY ("organization_control_implementation_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_control_objective_creators" FOREIGN KEY ("organization_control_objective_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_evidence_creators" FOREIGN KEY ("organization_evidence_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_group_creators" FOREIGN KEY ("organization_group_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_groups" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_internal_policy_creators" FOREIGN KEY ("organization_internal_policy_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_mapped_control_creators" FOREIGN KEY ("organization_mapped_control_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_narrative_creators" FOREIGN KEY ("organization_narrative_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_procedure_creators" FOREIGN KEY ("organization_procedure_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_program_creators" FOREIGN KEY ("organization_program_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_risk_creators" FOREIGN KEY ("organization_risk_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_scheduled_job_creators" FOREIGN KEY ("organization_scheduled_job_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_standard_creators" FOREIGN KEY ("organization_standard_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_subprocessor_creators" FOREIGN KEY ("organization_subprocessor_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_template_creators" FOREIGN KEY ("organization_template_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_trust_center_doc_creators" FOREIGN KEY ("organization_trust_center_doc_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_organizations_trust_center_subprocessor_creators" FOREIGN KEY ("organization_trust_center_subprocessor_creators") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_remediations_blocked_groups" FOREIGN KEY ("remediation_blocked_groups") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_remediations_editors" FOREIGN KEY ("remediation_editors") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_remediations_viewers" FOREIGN KEY ("remediation_viewers") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_reviews_blocked_groups" FOREIGN KEY ("review_blocked_groups") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_reviews_editors" FOREIGN KEY ("review_editors") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_reviews_viewers" FOREIGN KEY ("review_viewers") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_vulnerabilities_blocked_groups" FOREIGN KEY ("vulnerability_blocked_groups") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_vulnerabilities_editors" FOREIGN KEY ("vulnerability_editors") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_vulnerabilities_viewers" FOREIGN KEY ("vulnerability_viewers") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_workflow_definitions_groups" FOREIGN KEY ("workflow_definition_groups") REFERENCES "workflow_definitions" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "group_memberships" table
ALTER TABLE "group_memberships" ADD CONSTRAINT "group_memberships_groups_group" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "group_memberships_org_memberships_org_membership" FOREIGN KEY ("group_membership_org_membership") REFERENCES "org_memberships" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "group_memberships_users_user" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "group_settings" table
ALTER TABLE "group_settings" ADD CONSTRAINT "group_settings_groups_setting" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "hushes" table
ALTER TABLE "hushes" ADD CONSTRAINT "hushes_organizations_secrets" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "impersonation_events" table
ALTER TABLE "impersonation_events" ADD CONSTRAINT "impersonation_events_organizations_impersonation_events" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "impersonation_events_users_impersonation_events" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "impersonation_events_users_targeted_impersonations" FOREIGN KEY ("target_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "integrations" table
ALTER TABLE "integrations" ADD CONSTRAINT "integrations_files_integrations" FOREIGN KEY ("file_integrations") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "integrations_groups_integrations" FOREIGN KEY ("group_integrations") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "integrations_organizations_integrations" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "internal_policies" table
ALTER TABLE "internal_policies" ADD CONSTRAINT "internal_policies_custom_type_enums_internal_policies" FOREIGN KEY ("custom_type_enum_internal_policies") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_custom_type_enums_internal_policy_kind" FOREIGN KEY ("internal_policy_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_files_file" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_groups_approver" FOREIGN KEY ("approver_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_groups_delegate" FOREIGN KEY ("delegate_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_organizations_internal_policies" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "invites" table
ALTER TABLE "invites" ADD CONSTRAINT "invites_organizations_invites" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "job_results" table
ALTER TABLE "job_results" ADD CONSTRAINT "job_results_files_file" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "job_results_organizations_job_results" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "job_results_scheduled_jobs_scheduled_job" FOREIGN KEY ("scheduled_job_id") REFERENCES "scheduled_jobs" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "job_runners" table
ALTER TABLE "job_runners" ADD CONSTRAINT "job_runners_organizations_job_runners" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "job_runner_registration_tokens" table
ALTER TABLE "job_runner_registration_tokens" ADD CONSTRAINT "job_runner_registration_tokens_daddf3e078805108b2d174df258ddb4b" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "job_runner_registration_tokens_job_runners_job_runner" FOREIGN KEY ("job_runner_id") REFERENCES "job_runners" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "job_runner_tokens" table
ALTER TABLE "job_runner_tokens" ADD CONSTRAINT "job_runner_tokens_organizations_job_runner_tokens" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "job_templates" table
ALTER TABLE "job_templates" ADD CONSTRAINT "job_templates_organizations_job_templates" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "mapped_controls" table
ALTER TABLE "mapped_controls" ADD CONSTRAINT "mapped_controls_organizations_mapped_controls" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "narratives" table
ALTER TABLE "narratives" ADD CONSTRAINT "narratives_control_objectives_narratives" FOREIGN KEY ("control_objective_narratives") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "narratives_organizations_narratives" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "narratives_subcontrols_narratives" FOREIGN KEY ("subcontrol_narratives") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "notes" table
ALTER TABLE "notes" ADD CONSTRAINT "notes_controls_comments" FOREIGN KEY ("control_comments") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_discussions_comments" FOREIGN KEY ("discussion_id") REFERENCES "discussions" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_entities_notes" FOREIGN KEY ("entity_notes") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_evidences_comments" FOREIGN KEY ("evidence_comments") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_findings_comments" FOREIGN KEY ("finding_comments") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_internal_policies_comments" FOREIGN KEY ("internal_policy_comments") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_organizations_notes" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_procedures_comments" FOREIGN KEY ("procedure_comments") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_programs_notes" FOREIGN KEY ("program_notes") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_remediations_comments" FOREIGN KEY ("remediation_comments") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_reviews_comments" FOREIGN KEY ("review_comments") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_risks_comments" FOREIGN KEY ("risk_comments") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_subcontrols_comments" FOREIGN KEY ("subcontrol_comments") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_tasks_comments" FOREIGN KEY ("task_comments") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_trust_centers_posts" FOREIGN KEY ("trust_center_posts") REFERENCES "trust_centers" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_vulnerabilities_comments" FOREIGN KEY ("vulnerability_comments") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "notifications" table
ALTER TABLE "notifications" ADD CONSTRAINT "notifications_organizations_notifications" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notifications_users_notifications" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "onboardings" table
ALTER TABLE "onboardings" ADD CONSTRAINT "onboardings_organizations_organization" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "org_memberships" table
ALTER TABLE "org_memberships" ADD CONSTRAINT "org_memberships_organizations_organization" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "org_memberships_users_user" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "org_modules" table
ALTER TABLE "org_modules" ADD CONSTRAINT "org_modules_org_products_org_modules" FOREIGN KEY ("org_product_org_modules") REFERENCES "org_products" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_modules_org_subscriptions_modules" FOREIGN KEY ("subscription_id") REFERENCES "org_subscriptions" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_modules_organizations_org_modules" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "org_prices" table
ALTER TABLE "org_prices" ADD CONSTRAINT "org_prices_org_subscriptions_prices" FOREIGN KEY ("subscription_id") REFERENCES "org_subscriptions" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_prices_organizations_org_prices" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "org_products" table
ALTER TABLE "org_products" ADD CONSTRAINT "org_products_org_modules_org_products" FOREIGN KEY ("org_module_org_products") REFERENCES "org_modules" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_products_org_subscriptions_products" FOREIGN KEY ("subscription_id") REFERENCES "org_subscriptions" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_products_organizations_org_products" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "org_subscriptions" table
ALTER TABLE "org_subscriptions" ADD CONSTRAINT "org_subscriptions_organizations_org_subscriptions" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "organizations" table
ALTER TABLE "organizations" ADD CONSTRAINT "organizations_files_avatar_file" FOREIGN KEY ("avatar_local_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "organization_settings" table
ALTER TABLE "organization_settings" ADD CONSTRAINT "organization_settings_organizations_setting" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "password_reset_tokens" table
ALTER TABLE "password_reset_tokens" ADD CONSTRAINT "password_reset_tokens_users_password_reset_tokens" FOREIGN KEY ("owner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "personal_access_tokens" table
ALTER TABLE "personal_access_tokens" ADD CONSTRAINT "personal_access_tokens_users_personal_access_tokens" FOREIGN KEY ("owner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "procedures" table
ALTER TABLE "procedures" ADD CONSTRAINT "procedures_control_objectives_procedures" FOREIGN KEY ("control_objective_procedures") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_custom_type_enums_procedure_kind" FOREIGN KEY ("procedure_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_custom_type_enums_procedures" FOREIGN KEY ("custom_type_enum_procedures") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_files_file" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_groups_approver" FOREIGN KEY ("approver_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_groups_delegate" FOREIGN KEY ("delegate_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_organizations_procedures" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "programs" table
ALTER TABLE "programs" ADD CONSTRAINT "programs_custom_type_enums_program_kind" FOREIGN KEY ("program_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_custom_type_enums_programs" FOREIGN KEY ("custom_type_enum_programs") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_findings_programs" FOREIGN KEY ("finding_programs") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_organizations_programs" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_remediations_programs" FOREIGN KEY ("remediation_programs") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_reviews_programs" FOREIGN KEY ("review_programs") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_users_programs_owned" FOREIGN KEY ("program_owner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_vulnerabilities_programs" FOREIGN KEY ("vulnerability_programs") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "program_memberships" table
ALTER TABLE "program_memberships" ADD CONSTRAINT "program_memberships_org_memberships_org_membership" FOREIGN KEY ("program_membership_org_membership") REFERENCES "org_memberships" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "program_memberships_programs_program" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "program_memberships_users_user" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "remediations" table
ALTER TABLE "remediations" ADD CONSTRAINT "remediations_findings_remediations" FOREIGN KEY ("finding_remediations") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "remediations_organizations_remediations" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "remediations_reviews_remediations" FOREIGN KEY ("review_remediations") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "remediations_vulnerabilities_remediations" FOREIGN KEY ("vulnerability_remediations") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "reviews" table
ALTER TABLE "reviews" ADD CONSTRAINT "reviews_findings_reviews" FOREIGN KEY ("finding_reviews") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "reviews_organizations_reviews" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "reviews_remediations_reviews" FOREIGN KEY ("remediation_reviews") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "reviews_users_reviewer" FOREIGN KEY ("reviewer_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "reviews_vulnerabilities_reviews" FOREIGN KEY ("vulnerability_reviews") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "risks" table
ALTER TABLE "risks" ADD CONSTRAINT "risks_control_objectives_risks" FOREIGN KEY ("control_objective_risks") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_custom_type_enums_risk_categories" FOREIGN KEY ("custom_type_enum_risk_categories") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_custom_type_enums_risk_category" FOREIGN KEY ("risk_category_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_custom_type_enums_risk_kind" FOREIGN KEY ("risk_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_custom_type_enums_risks" FOREIGN KEY ("custom_type_enum_risks") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_findings_risks" FOREIGN KEY ("finding_risks") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_groups_delegate" FOREIGN KEY ("delegate_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_groups_stakeholder" FOREIGN KEY ("stakeholder_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_organizations_risks" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_remediations_risks" FOREIGN KEY ("remediation_risks") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_reviews_risks" FOREIGN KEY ("review_risks") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_vulnerabilities_risks" FOREIGN KEY ("vulnerability_risks") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "scans" table
ALTER TABLE "scans" ADD CONSTRAINT "scans_controls_scans" FOREIGN KEY ("control_scans") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "scans_entities_scans" FOREIGN KEY ("entity_scans") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "scans_findings_scans" FOREIGN KEY ("finding_scans") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "scans_organizations_scans" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "scans_risks_scans" FOREIGN KEY ("risk_scans") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "scans_vulnerabilities_scans" FOREIGN KEY ("vulnerability_scans") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "scheduled_jobs" table
ALTER TABLE "scheduled_jobs" ADD CONSTRAINT "scheduled_jobs_job_runners_job_runner" FOREIGN KEY ("job_runner_id") REFERENCES "job_runners" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "scheduled_jobs_job_templates_scheduled_jobs" FOREIGN KEY ("job_id") REFERENCES "job_templates" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "scheduled_jobs_organizations_scheduled_jobs" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "scheduled_job_runs" table
ALTER TABLE "scheduled_job_runs" ADD CONSTRAINT "scheduled_job_runs_job_runners_job_runner" FOREIGN KEY ("job_runner_id") REFERENCES "job_runners" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "scheduled_job_runs_organizations_scheduled_job_runs" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "scheduled_job_runs_scheduled_jobs_scheduled_job" FOREIGN KEY ("scheduled_job_id") REFERENCES "scheduled_jobs" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "standards" table
ALTER TABLE "standards" ADD CONSTRAINT "standards_files_logo_file" FOREIGN KEY ("logo_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "standards_organizations_standards" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "subcontrols" table
ALTER TABLE "subcontrols" ADD CONSTRAINT "subcontrols_controls_subcontrols" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "subcontrols_custom_type_enums_subcontrol_kind" FOREIGN KEY ("subcontrol_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_custom_type_enums_subcontrols" FOREIGN KEY ("custom_type_enum_subcontrols") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_entities_responsible_party" FOREIGN KEY ("responsible_party_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_findings_subcontrols" FOREIGN KEY ("finding_subcontrols") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_groups_control_owner" FOREIGN KEY ("control_owner_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_groups_delegate" FOREIGN KEY ("delegate_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_organizations_subcontrols" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_programs_subcontrols" FOREIGN KEY ("program_subcontrols") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_remediations_subcontrols" FOREIGN KEY ("remediation_subcontrols") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_reviews_subcontrols" FOREIGN KEY ("review_subcontrols") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_users_subcontrols" FOREIGN KEY ("user_subcontrols") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_vulnerabilities_subcontrols" FOREIGN KEY ("vulnerability_subcontrols") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "subprocessors" table
ALTER TABLE "subprocessors" ADD CONSTRAINT "subprocessors_files_logo_file" FOREIGN KEY ("logo_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subprocessors_organizations_subprocessors" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "subscribers" table
ALTER TABLE "subscribers" ADD CONSTRAINT "subscribers_organizations_subscribers" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "tfa_settings" table
ALTER TABLE "tfa_settings" ADD CONSTRAINT "tfa_settings_users_tfa_settings" FOREIGN KEY ("owner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "tag_definitions" table
ALTER TABLE "tag_definitions" ADD CONSTRAINT "tag_definitions_organizations_tag_definitions" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tag_definitions_workflow_definitions_tag_definitions" FOREIGN KEY ("workflow_definition_tag_definitions") REFERENCES "workflow_definitions" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "tasks" table
ALTER TABLE "tasks" ADD CONSTRAINT "tasks_custom_type_enums_task_kind" FOREIGN KEY ("task_kind_id") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_custom_type_enums_tasks" FOREIGN KEY ("custom_type_enum_tasks") REFERENCES "custom_type_enums" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_findings_tasks" FOREIGN KEY ("finding_tasks") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_integrations_tasks" FOREIGN KEY ("integration_tasks") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_organizations_tasks" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_remediations_tasks" FOREIGN KEY ("remediation_tasks") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_reviews_tasks" FOREIGN KEY ("review_tasks") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_users_assignee_tasks" FOREIGN KEY ("assignee_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_users_assigner_tasks" FOREIGN KEY ("assigner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_vulnerabilities_tasks" FOREIGN KEY ("vulnerability_tasks") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "templates" table
ALTER TABLE "templates" ADD CONSTRAINT "templates_organizations_templates" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "templates_trust_centers_templates" FOREIGN KEY ("trust_center_id") REFERENCES "trust_centers" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "trust_centers" table
ALTER TABLE "trust_centers" ADD CONSTRAINT "trust_centers_custom_domains_custom_domain" FOREIGN KEY ("custom_domain_id") REFERENCES "custom_domains" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_centers_custom_domains_preview_domain" FOREIGN KEY ("preview_domain_id") REFERENCES "custom_domains" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_centers_organizations_trust_centers" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_centers_trust_center_settings_preview_setting" FOREIGN KEY ("trust_center_preview_setting") REFERENCES "trust_center_settings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_centers_trust_center_settings_setting" FOREIGN KEY ("trust_center_setting") REFERENCES "trust_center_settings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_centers_trust_center_watermark_configs_watermark_config" FOREIGN KEY ("trust_center_watermark_config") REFERENCES "trust_center_watermark_configs" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "trust_center_compliances" table
ALTER TABLE "trust_center_compliances" ADD CONSTRAINT "trust_center_compliances_standards_trust_center_compliances" FOREIGN KEY ("standard_id") REFERENCES "standards" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "trust_center_compliances_trust_centers_trust_center_compliances" FOREIGN KEY ("trust_center_id") REFERENCES "trust_centers" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "trust_center_docs" table
ALTER TABLE "trust_center_docs" ADD CONSTRAINT "trust_center_docs_files_file" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_center_docs_files_original_file" FOREIGN KEY ("original_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_center_docs_standards_trust_center_docs" FOREIGN KEY ("standard_id") REFERENCES "standards" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_center_docs_trust_centers_trust_center_docs" FOREIGN KEY ("trust_center_id") REFERENCES "trust_centers" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "trust_center_settings" table
ALTER TABLE "trust_center_settings" ADD CONSTRAINT "trust_center_settings_files_favicon_file" FOREIGN KEY ("favicon_local_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_center_settings_files_logo_file" FOREIGN KEY ("logo_local_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "trust_center_subprocessors" table
ALTER TABLE "trust_center_subprocessors" ADD CONSTRAINT "trust_center_subprocessors_sub_24055b695e9bd0e49b3edea05d355a0b" FOREIGN KEY ("subprocessor_id") REFERENCES "subprocessors" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "trust_center_subprocessors_tru_bb0fd7936579c86ecda7d42ebfe60199" FOREIGN KEY ("trust_center_id") REFERENCES "trust_centers" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "trust_center_watermark_configs" table
ALTER TABLE "trust_center_watermark_configs" ADD CONSTRAINT "trust_center_watermark_configs_e2f038ca8412a7e2b03e1fad46be2f7f" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trust_center_watermark_configs_files_file" FOREIGN KEY ("logo_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "trustcenter_entities" table
ALTER TABLE "trustcenter_entities" ADD CONSTRAINT "trustcenter_entities_entity_types_entity_type" FOREIGN KEY ("entity_type_id") REFERENCES "entity_types" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trustcenter_entities_files_logo_file" FOREIGN KEY ("logo_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trustcenter_entities_files_trustcenter_entities" FOREIGN KEY ("file_trustcenter_entities") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trustcenter_entities_trust_centers_trust_center" FOREIGN KEY ("trust_center_id") REFERENCES "trust_centers" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "trustcenter_entities_trust_centers_trustcenter_entities" FOREIGN KEY ("trust_center_trustcenter_entities") REFERENCES "trust_centers" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "users" table
ALTER TABLE "users" ADD CONSTRAINT "users_files_avatar_file" FOREIGN KEY ("avatar_local_file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "user_settings" table
ALTER TABLE "user_settings" ADD CONSTRAINT "user_settings_organizations_default_org" FOREIGN KEY ("user_setting_default_org") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "user_settings_users_setting" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "vulnerabilities" table
ALTER TABLE "vulnerabilities" ADD CONSTRAINT "vulnerabilities_findings_vulnerabilities" FOREIGN KEY ("finding_vulnerabilities") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "vulnerabilities_organizations_vulnerabilities" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "vulnerabilities_remediations_vulnerabilities" FOREIGN KEY ("remediation_vulnerabilities") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "vulnerabilities_reviews_vulnerabilities" FOREIGN KEY ("review_vulnerabilities") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "webauthns" table
ALTER TABLE "webauthns" ADD CONSTRAINT "webauthns_users_webauthns" FOREIGN KEY ("owner_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "workflow_assignments" table
ALTER TABLE "workflow_assignments" ADD CONSTRAINT "workflow_assignments_groups_group" FOREIGN KEY ("actor_group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignments_organizations_workflow_assignments" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignments_users_user" FOREIGN KEY ("actor_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignments_workflow_instances_workflow_assignments" FOREIGN KEY ("workflow_instance_workflow_assignments") REFERENCES "workflow_instances" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignments_workflow_instances_workflow_instance" FOREIGN KEY ("workflow_instance_id") REFERENCES "workflow_instances" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "workflow_assignment_targets" table
ALTER TABLE "workflow_assignment_targets" ADD CONSTRAINT "workflow_assignment_targets_groups_group" FOREIGN KEY ("target_group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignment_targets_or_8bb74468c70e1b9fcce1d5b038516f9a" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignment_targets_users_user" FOREIGN KEY ("target_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignment_targets_wo_35919ebc89c62ef82cb5889ff40ce351" FOREIGN KEY ("workflow_assignment_workflow_assignment_targets") REFERENCES "workflow_assignments" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_assignment_targets_wo_6077e6f4bf744947c345bb2733c1c240" FOREIGN KEY ("workflow_assignment_id") REFERENCES "workflow_assignments" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "workflow_definitions" table
ALTER TABLE "workflow_definitions" ADD CONSTRAINT "workflow_definitions_organizations_workflow_definitions" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "workflow_events" table
ALTER TABLE "workflow_events" ADD CONSTRAINT "workflow_events_organizations_workflow_events" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_events_workflow_instances_workflow_events" FOREIGN KEY ("workflow_instance_workflow_events") REFERENCES "workflow_instances" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_events_workflow_instances_workflow_instance" FOREIGN KEY ("workflow_instance_id") REFERENCES "workflow_instances" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "workflow_instances" table
ALTER TABLE "workflow_instances" ADD CONSTRAINT "workflow_instances_action_plans_action_plan" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_instances_controls_control" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_instances_evidences_evidence" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_instances_internal_policies_internal_policy" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_instances_organizations_workflow_instances" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_instances_procedures_procedure" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_instances_subcontrols_subcontrol" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_instances_workflow_definitions_workflow_definition" FOREIGN KEY ("workflow_definition_id") REFERENCES "workflow_definitions" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "workflow_instances_workflow_proposals_workflow_proposal" FOREIGN KEY ("workflow_proposal_id") REFERENCES "workflow_proposals" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "workflow_object_refs" table
ALTER TABLE "workflow_object_refs" ADD CONSTRAINT "workflow_object_refs_action_plans_action_plan" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_controls_control" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_directory_accounts_directory_account" FOREIGN KEY ("directory_account_id") REFERENCES "directory_accounts" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_directory_groups_directory_group" FOREIGN KEY ("directory_group_id") REFERENCES "directory_groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_directory_memberships_directory_membership" FOREIGN KEY ("directory_membership_id") REFERENCES "directory_memberships" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_evidences_evidence" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_findings_finding" FOREIGN KEY ("finding_id") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_internal_policies_internal_policy" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_organizations_workflow_object_refs" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_procedures_procedure" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_subcontrols_subcontrol" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_tasks_task" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_object_refs_workflow_instances_workflow_instance" FOREIGN KEY ("workflow_instance_id") REFERENCES "workflow_instances" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, ADD CONSTRAINT "workflow_object_refs_workflow_instances_workflow_object_refs" FOREIGN KEY ("workflow_instance_workflow_object_refs") REFERENCES "workflow_instances" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "workflow_proposals" table
ALTER TABLE "workflow_proposals" ADD CONSTRAINT "workflow_proposals_organizations_workflow_proposals" FOREIGN KEY ("owner_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_proposals_users_user" FOREIGN KEY ("submitted_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "workflow_proposals_workflow_object_refs_workflow_object_ref" FOREIGN KEY ("workflow_object_ref_id") REFERENCES "workflow_object_refs" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION;
-- Modify "action_plan_tasks" table
ALTER TABLE "action_plan_tasks" ADD CONSTRAINT "action_plan_tasks_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "action_plan_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "contact_files" table
ALTER TABLE "contact_files" ADD CONSTRAINT "contact_files_contact_id" FOREIGN KEY ("contact_id") REFERENCES "contacts" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "contact_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_control_objectives" table
ALTER TABLE "control_control_objectives" ADD CONSTRAINT "control_control_objectives_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_control_objectives_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_tasks" table
ALTER TABLE "control_tasks" ADD CONSTRAINT "control_tasks_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_narratives" table
ALTER TABLE "control_narratives" ADD CONSTRAINT "control_narratives_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_narratives_narrative_id" FOREIGN KEY ("narrative_id") REFERENCES "narratives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_risks" table
ALTER TABLE "control_risks" ADD CONSTRAINT "control_risks_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_risks_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_action_plans" table
ALTER TABLE "control_action_plans" ADD CONSTRAINT "control_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_action_plans_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_procedures" table
ALTER TABLE "control_procedures" ADD CONSTRAINT "control_procedures_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_procedures_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_blocked_groups" table
ALTER TABLE "control_blocked_groups" ADD CONSTRAINT "control_blocked_groups_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_editors" table
ALTER TABLE "control_editors" ADD CONSTRAINT "control_editors_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_assets" table
ALTER TABLE "control_assets" ADD CONSTRAINT "control_assets_asset_id" FOREIGN KEY ("asset_id") REFERENCES "assets" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_assets_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_control_implementations" table
ALTER TABLE "control_control_implementations" ADD CONSTRAINT "control_control_implementations_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_control_implementations_control_implementation_id" FOREIGN KEY ("control_implementation_id") REFERENCES "control_implementations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_implementation_blocked_groups" table
ALTER TABLE "control_implementation_blocked_groups" ADD CONSTRAINT "control_implementation_blocked_groups_control_implementation_id" FOREIGN KEY ("control_implementation_id") REFERENCES "control_implementations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_implementation_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_implementation_editors" table
ALTER TABLE "control_implementation_editors" ADD CONSTRAINT "control_implementation_editors_control_implementation_id" FOREIGN KEY ("control_implementation_id") REFERENCES "control_implementations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_implementation_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_implementation_viewers" table
ALTER TABLE "control_implementation_viewers" ADD CONSTRAINT "control_implementation_viewers_control_implementation_id" FOREIGN KEY ("control_implementation_id") REFERENCES "control_implementations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_implementation_viewers_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_implementation_tasks" table
ALTER TABLE "control_implementation_tasks" ADD CONSTRAINT "control_implementation_tasks_control_implementation_id" FOREIGN KEY ("control_implementation_id") REFERENCES "control_implementations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_implementation_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_objective_blocked_groups" table
ALTER TABLE "control_objective_blocked_groups" ADD CONSTRAINT "control_objective_blocked_groups_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_objective_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_objective_editors" table
ALTER TABLE "control_objective_editors" ADD CONSTRAINT "control_objective_editors_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_objective_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_objective_viewers" table
ALTER TABLE "control_objective_viewers" ADD CONSTRAINT "control_objective_viewers_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_objective_viewers_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "control_objective_tasks" table
ALTER TABLE "control_objective_tasks" ADD CONSTRAINT "control_objective_tasks_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "control_objective_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "document_data_files" table
ALTER TABLE "document_data_files" ADD CONSTRAINT "document_data_files_document_data_id" FOREIGN KEY ("document_data_id") REFERENCES "document_data" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "document_data_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "entity_blocked_groups" table
ALTER TABLE "entity_blocked_groups" ADD CONSTRAINT "entity_blocked_groups_entity_id" FOREIGN KEY ("entity_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "entity_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "entity_editors" table
ALTER TABLE "entity_editors" ADD CONSTRAINT "entity_editors_entity_id" FOREIGN KEY ("entity_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "entity_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "entity_viewers" table
ALTER TABLE "entity_viewers" ADD CONSTRAINT "entity_viewers_entity_id" FOREIGN KEY ("entity_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "entity_viewers_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "entity_contacts" table
ALTER TABLE "entity_contacts" ADD CONSTRAINT "entity_contacts_contact_id" FOREIGN KEY ("contact_id") REFERENCES "contacts" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "entity_contacts_entity_id" FOREIGN KEY ("entity_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "entity_documents" table
ALTER TABLE "entity_documents" ADD CONSTRAINT "entity_documents_document_data_id" FOREIGN KEY ("document_data_id") REFERENCES "document_data" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "entity_documents_entity_id" FOREIGN KEY ("entity_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "entity_files" table
ALTER TABLE "entity_files" ADD CONSTRAINT "entity_files_entity_id" FOREIGN KEY ("entity_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "entity_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "entity_assets" table
ALTER TABLE "entity_assets" ADD CONSTRAINT "entity_assets_asset_id" FOREIGN KEY ("asset_id") REFERENCES "assets" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "entity_assets_entity_id" FOREIGN KEY ("entity_id") REFERENCES "entities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "evidence_controls" table
ALTER TABLE "evidence_controls" ADD CONSTRAINT "evidence_controls_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "evidence_controls_evidence_id" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "evidence_subcontrols" table
ALTER TABLE "evidence_subcontrols" ADD CONSTRAINT "evidence_subcontrols_evidence_id" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "evidence_subcontrols_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "evidence_control_objectives" table
ALTER TABLE "evidence_control_objectives" ADD CONSTRAINT "evidence_control_objectives_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "evidence_control_objectives_evidence_id" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "evidence_files" table
ALTER TABLE "evidence_files" ADD CONSTRAINT "evidence_files_evidence_id" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "evidence_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "file_events" table
ALTER TABLE "file_events" ADD CONSTRAINT "file_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "file_events_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "file_secrets" table
ALTER TABLE "file_secrets" ADD CONSTRAINT "file_secrets_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "file_secrets_hush_id" FOREIGN KEY ("hush_id") REFERENCES "hushes" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "finding_action_plans" table
ALTER TABLE "finding_action_plans" ADD CONSTRAINT "finding_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "finding_action_plans_finding_id" FOREIGN KEY ("finding_id") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "group_events" table
ALTER TABLE "group_events" ADD CONSTRAINT "group_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "group_events_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "group_files" table
ALTER TABLE "group_files" ADD CONSTRAINT "group_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "group_files_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "group_tasks" table
ALTER TABLE "group_tasks" ADD CONSTRAINT "group_tasks_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "group_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "group_membership_events" table
ALTER TABLE "group_membership_events" ADD CONSTRAINT "group_membership_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "group_membership_events_group_membership_id" FOREIGN KEY ("group_membership_id") REFERENCES "group_memberships" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "hush_events" table
ALTER TABLE "hush_events" ADD CONSTRAINT "hush_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "hush_events_hush_id" FOREIGN KEY ("hush_id") REFERENCES "hushes" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "integration_secrets" table
ALTER TABLE "integration_secrets" ADD CONSTRAINT "integration_secrets_hush_id" FOREIGN KEY ("hush_id") REFERENCES "hushes" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "integration_secrets_integration_id" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "integration_events" table
ALTER TABLE "integration_events" ADD CONSTRAINT "integration_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "integration_events_integration_id" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "integration_findings" table
ALTER TABLE "integration_findings" ADD CONSTRAINT "integration_findings_finding_id" FOREIGN KEY ("finding_id") REFERENCES "findings" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "integration_findings_integration_id" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "integration_vulnerabilities" table
ALTER TABLE "integration_vulnerabilities" ADD CONSTRAINT "integration_vulnerabilities_integration_id" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "integration_vulnerabilities_vulnerability_id" FOREIGN KEY ("vulnerability_id") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "integration_reviews" table
ALTER TABLE "integration_reviews" ADD CONSTRAINT "integration_reviews_integration_id" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "integration_reviews_review_id" FOREIGN KEY ("review_id") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "integration_remediations" table
ALTER TABLE "integration_remediations" ADD CONSTRAINT "integration_remediations_integration_id" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "integration_remediations_remediation_id" FOREIGN KEY ("remediation_id") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "integration_action_plans" table
ALTER TABLE "integration_action_plans" ADD CONSTRAINT "integration_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "integration_action_plans_integration_id" FOREIGN KEY ("integration_id") REFERENCES "integrations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_blocked_groups" table
ALTER TABLE "internal_policy_blocked_groups" ADD CONSTRAINT "internal_policy_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_blocked_groups_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_editors" table
ALTER TABLE "internal_policy_editors" ADD CONSTRAINT "internal_policy_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_editors_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_control_objectives" table
ALTER TABLE "internal_policy_control_objectives" ADD CONSTRAINT "internal_policy_control_objectives_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_control_objectives_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_controls" table
ALTER TABLE "internal_policy_controls" ADD CONSTRAINT "internal_policy_controls_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_controls_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_subcontrols" table
ALTER TABLE "internal_policy_subcontrols" ADD CONSTRAINT "internal_policy_subcontrols_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_subcontrols_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_procedures" table
ALTER TABLE "internal_policy_procedures" ADD CONSTRAINT "internal_policy_procedures_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_procedures_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_narratives" table
ALTER TABLE "internal_policy_narratives" ADD CONSTRAINT "internal_policy_narratives_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_narratives_narrative_id" FOREIGN KEY ("narrative_id") REFERENCES "narratives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_tasks" table
ALTER TABLE "internal_policy_tasks" ADD CONSTRAINT "internal_policy_tasks_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "internal_policy_risks" table
ALTER TABLE "internal_policy_risks" ADD CONSTRAINT "internal_policy_risks_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "internal_policy_risks_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "invite_events" table
ALTER TABLE "invite_events" ADD CONSTRAINT "invite_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "invite_events_invite_id" FOREIGN KEY ("invite_id") REFERENCES "invites" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "invite_groups" table
ALTER TABLE "invite_groups" ADD CONSTRAINT "invite_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "invite_groups_invite_id" FOREIGN KEY ("invite_id") REFERENCES "invites" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "job_runner_job_runner_tokens" table
ALTER TABLE "job_runner_job_runner_tokens" ADD CONSTRAINT "job_runner_job_runner_tokens_job_runner_id" FOREIGN KEY ("job_runner_id") REFERENCES "job_runners" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "job_runner_job_runner_tokens_job_runner_token_id" FOREIGN KEY ("job_runner_token_id") REFERENCES "job_runner_tokens" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "mapped_control_blocked_groups" table
ALTER TABLE "mapped_control_blocked_groups" ADD CONSTRAINT "mapped_control_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "mapped_control_blocked_groups_mapped_control_id" FOREIGN KEY ("mapped_control_id") REFERENCES "mapped_controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "mapped_control_editors" table
ALTER TABLE "mapped_control_editors" ADD CONSTRAINT "mapped_control_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "mapped_control_editors_mapped_control_id" FOREIGN KEY ("mapped_control_id") REFERENCES "mapped_controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "mapped_control_from_controls" table
ALTER TABLE "mapped_control_from_controls" ADD CONSTRAINT "mapped_control_from_controls_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "mapped_control_from_controls_mapped_control_id" FOREIGN KEY ("mapped_control_id") REFERENCES "mapped_controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "mapped_control_to_controls" table
ALTER TABLE "mapped_control_to_controls" ADD CONSTRAINT "mapped_control_to_controls_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "mapped_control_to_controls_mapped_control_id" FOREIGN KEY ("mapped_control_id") REFERENCES "mapped_controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "mapped_control_from_subcontrols" table
ALTER TABLE "mapped_control_from_subcontrols" ADD CONSTRAINT "mapped_control_from_subcontrols_mapped_control_id" FOREIGN KEY ("mapped_control_id") REFERENCES "mapped_controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "mapped_control_from_subcontrols_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "mapped_control_to_subcontrols" table
ALTER TABLE "mapped_control_to_subcontrols" ADD CONSTRAINT "mapped_control_to_subcontrols_mapped_control_id" FOREIGN KEY ("mapped_control_id") REFERENCES "mapped_controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "mapped_control_to_subcontrols_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "narrative_blocked_groups" table
ALTER TABLE "narrative_blocked_groups" ADD CONSTRAINT "narrative_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "narrative_blocked_groups_narrative_id" FOREIGN KEY ("narrative_id") REFERENCES "narratives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "narrative_editors" table
ALTER TABLE "narrative_editors" ADD CONSTRAINT "narrative_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "narrative_editors_narrative_id" FOREIGN KEY ("narrative_id") REFERENCES "narratives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "narrative_viewers" table
ALTER TABLE "narrative_viewers" ADD CONSTRAINT "narrative_viewers_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "narrative_viewers_narrative_id" FOREIGN KEY ("narrative_id") REFERENCES "narratives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "org_membership_events" table
ALTER TABLE "org_membership_events" ADD CONSTRAINT "org_membership_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "org_membership_events_org_membership_id" FOREIGN KEY ("org_membership_id") REFERENCES "org_memberships" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "org_module_org_prices" table
ALTER TABLE "org_module_org_prices" ADD CONSTRAINT "org_module_org_prices_org_module_id" FOREIGN KEY ("org_module_id") REFERENCES "org_modules" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "org_module_org_prices_org_price_id" FOREIGN KEY ("org_price_id") REFERENCES "org_prices" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "org_product_org_prices" table
ALTER TABLE "org_product_org_prices" ADD CONSTRAINT "org_product_org_prices_org_price_id" FOREIGN KEY ("org_price_id") REFERENCES "org_prices" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "org_product_org_prices_org_product_id" FOREIGN KEY ("org_product_id") REFERENCES "org_products" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "org_subscription_events" table
ALTER TABLE "org_subscription_events" ADD CONSTRAINT "org_subscription_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "org_subscription_events_org_subscription_id" FOREIGN KEY ("org_subscription_id") REFERENCES "org_subscriptions" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "organization_personal_access_tokens" table
ALTER TABLE "organization_personal_access_tokens" ADD CONSTRAINT "organization_personal_access_tokens_organization_id" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "organization_personal_access_tokens_personal_access_token_id" FOREIGN KEY ("personal_access_token_id") REFERENCES "personal_access_tokens" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "organization_files" table
ALTER TABLE "organization_files" ADD CONSTRAINT "organization_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "organization_files_organization_id" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "organization_events" table
ALTER TABLE "organization_events" ADD CONSTRAINT "organization_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "organization_events_organization_id" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "organization_setting_files" table
ALTER TABLE "organization_setting_files" ADD CONSTRAINT "organization_setting_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "organization_setting_files_organization_setting_id" FOREIGN KEY ("organization_setting_id") REFERENCES "organization_settings" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "personal_access_token_events" table
ALTER TABLE "personal_access_token_events" ADD CONSTRAINT "personal_access_token_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "personal_access_token_events_personal_access_token_id" FOREIGN KEY ("personal_access_token_id") REFERENCES "personal_access_tokens" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "procedure_blocked_groups" table
ALTER TABLE "procedure_blocked_groups" ADD CONSTRAINT "procedure_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "procedure_blocked_groups_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "procedure_editors" table
ALTER TABLE "procedure_editors" ADD CONSTRAINT "procedure_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "procedure_editors_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "procedure_narratives" table
ALTER TABLE "procedure_narratives" ADD CONSTRAINT "procedure_narratives_narrative_id" FOREIGN KEY ("narrative_id") REFERENCES "narratives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "procedure_narratives_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "procedure_risks" table
ALTER TABLE "procedure_risks" ADD CONSTRAINT "procedure_risks_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "procedure_risks_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "procedure_tasks" table
ALTER TABLE "procedure_tasks" ADD CONSTRAINT "procedure_tasks_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "procedure_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_blocked_groups" table
ALTER TABLE "program_blocked_groups" ADD CONSTRAINT "program_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_blocked_groups_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_editors" table
ALTER TABLE "program_editors" ADD CONSTRAINT "program_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_editors_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_viewers" table
ALTER TABLE "program_viewers" ADD CONSTRAINT "program_viewers_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_viewers_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_controls" table
ALTER TABLE "program_controls" ADD CONSTRAINT "program_controls_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_controls_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_control_objectives" table
ALTER TABLE "program_control_objectives" ADD CONSTRAINT "program_control_objectives_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_control_objectives_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_internal_policies" table
ALTER TABLE "program_internal_policies" ADD CONSTRAINT "program_internal_policies_internal_policy_id" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_internal_policies_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_procedures" table
ALTER TABLE "program_procedures" ADD CONSTRAINT "program_procedures_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_procedures_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_risks" table
ALTER TABLE "program_risks" ADD CONSTRAINT "program_risks_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_risks_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_tasks" table
ALTER TABLE "program_tasks" ADD CONSTRAINT "program_tasks_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_files" table
ALTER TABLE "program_files" ADD CONSTRAINT "program_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_files_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_evidence" table
ALTER TABLE "program_evidence" ADD CONSTRAINT "program_evidence_evidence_id" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_evidence_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_narratives" table
ALTER TABLE "program_narratives" ADD CONSTRAINT "program_narratives_narrative_id" FOREIGN KEY ("narrative_id") REFERENCES "narratives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_narratives_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "program_action_plans" table
ALTER TABLE "program_action_plans" ADD CONSTRAINT "program_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "program_action_plans_program_id" FOREIGN KEY ("program_id") REFERENCES "programs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "remediation_action_plans" table
ALTER TABLE "remediation_action_plans" ADD CONSTRAINT "remediation_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "remediation_action_plans_remediation_id" FOREIGN KEY ("remediation_id") REFERENCES "remediations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "review_action_plans" table
ALTER TABLE "review_action_plans" ADD CONSTRAINT "review_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "review_action_plans_review_id" FOREIGN KEY ("review_id") REFERENCES "reviews" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "risk_blocked_groups" table
ALTER TABLE "risk_blocked_groups" ADD CONSTRAINT "risk_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "risk_blocked_groups_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "risk_editors" table
ALTER TABLE "risk_editors" ADD CONSTRAINT "risk_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "risk_editors_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "risk_viewers" table
ALTER TABLE "risk_viewers" ADD CONSTRAINT "risk_viewers_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "risk_viewers_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "risk_action_plans" table
ALTER TABLE "risk_action_plans" ADD CONSTRAINT "risk_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "risk_action_plans_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "risk_tasks" table
ALTER TABLE "risk_tasks" ADD CONSTRAINT "risk_tasks_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "risk_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "scan_blocked_groups" table
ALTER TABLE "scan_blocked_groups" ADD CONSTRAINT "scan_blocked_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "scan_blocked_groups_scan_id" FOREIGN KEY ("scan_id") REFERENCES "scans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "scan_editors" table
ALTER TABLE "scan_editors" ADD CONSTRAINT "scan_editors_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "scan_editors_scan_id" FOREIGN KEY ("scan_id") REFERENCES "scans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "scan_viewers" table
ALTER TABLE "scan_viewers" ADD CONSTRAINT "scan_viewers_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "scan_viewers_scan_id" FOREIGN KEY ("scan_id") REFERENCES "scans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "scan_assets" table
ALTER TABLE "scan_assets" ADD CONSTRAINT "scan_assets_asset_id" FOREIGN KEY ("asset_id") REFERENCES "assets" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "scan_assets_scan_id" FOREIGN KEY ("scan_id") REFERENCES "scans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "scheduled_job_controls" table
ALTER TABLE "scheduled_job_controls" ADD CONSTRAINT "scheduled_job_controls_control_id" FOREIGN KEY ("control_id") REFERENCES "controls" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "scheduled_job_controls_scheduled_job_id" FOREIGN KEY ("scheduled_job_id") REFERENCES "scheduled_jobs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "scheduled_job_subcontrols" table
ALTER TABLE "scheduled_job_subcontrols" ADD CONSTRAINT "scheduled_job_subcontrols_scheduled_job_id" FOREIGN KEY ("scheduled_job_id") REFERENCES "scheduled_jobs" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "scheduled_job_subcontrols_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "subcontrol_control_objectives" table
ALTER TABLE "subcontrol_control_objectives" ADD CONSTRAINT "subcontrol_control_objectives_control_objective_id" FOREIGN KEY ("control_objective_id") REFERENCES "control_objectives" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "subcontrol_control_objectives_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "subcontrol_tasks" table
ALTER TABLE "subcontrol_tasks" ADD CONSTRAINT "subcontrol_tasks_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "subcontrol_tasks_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "subcontrol_risks" table
ALTER TABLE "subcontrol_risks" ADD CONSTRAINT "subcontrol_risks_risk_id" FOREIGN KEY ("risk_id") REFERENCES "risks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "subcontrol_risks_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "subcontrol_procedures" table
ALTER TABLE "subcontrol_procedures" ADD CONSTRAINT "subcontrol_procedures_procedure_id" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "subcontrol_procedures_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "subcontrol_control_implementations" table
ALTER TABLE "subcontrol_control_implementations" ADD CONSTRAINT "subcontrol_control_implementations_control_implementation_id" FOREIGN KEY ("control_implementation_id") REFERENCES "control_implementations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "subcontrol_control_implementations_subcontrol_id" FOREIGN KEY ("subcontrol_id") REFERENCES "subcontrols" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "subscriber_events" table
ALTER TABLE "subscriber_events" ADD CONSTRAINT "subscriber_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "subscriber_events_subscriber_id" FOREIGN KEY ("subscriber_id") REFERENCES "subscribers" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "task_evidence" table
ALTER TABLE "task_evidence" ADD CONSTRAINT "task_evidence_evidence_id" FOREIGN KEY ("evidence_id") REFERENCES "evidences" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "task_evidence_task_id" FOREIGN KEY ("task_id") REFERENCES "tasks" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "template_files" table
ALTER TABLE "template_files" ADD CONSTRAINT "template_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "template_files_template_id" FOREIGN KEY ("template_id") REFERENCES "templates" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "trust_center_setting_files" table
ALTER TABLE "trust_center_setting_files" ADD CONSTRAINT "trust_center_setting_files_file_id" FOREIGN KEY ("file_id") REFERENCES "files" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "trust_center_setting_files_trust_center_setting_id" FOREIGN KEY ("trust_center_setting_id") REFERENCES "trust_center_settings" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "user_events" table
ALTER TABLE "user_events" ADD CONSTRAINT "user_events_event_id" FOREIGN KEY ("event_id") REFERENCES "events" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "user_events_user_id" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
-- Modify "vulnerability_action_plans" table
ALTER TABLE "vulnerability_action_plans" ADD CONSTRAINT "vulnerability_action_plans_action_plan_id" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, ADD CONSTRAINT "vulnerability_action_plans_vulnerability_id" FOREIGN KEY ("vulnerability_id") REFERENCES "vulnerabilities" ("id") ON UPDATE NO ACTION ON DELETE CASCADE;
