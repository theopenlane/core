-- Modify "standard_history" table
ALTER TABLE "standard_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "control_objective_history" table
ALTER TABLE "control_objective_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "org_subscription_history" table
ALTER TABLE "org_subscription_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "user_setting_history" table
ALTER TABLE "user_setting_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "contact_history" table
ALTER TABLE "contact_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "group_membership_history" table
ALTER TABLE "group_membership_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "control_history" table
ALTER TABLE "control_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "group_history" table
ALTER TABLE "group_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "organization_setting_history" table
ALTER TABLE "organization_setting_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "org_membership_history" table
ALTER TABLE "org_membership_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "procedure_history" table
ALTER TABLE "procedure_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "document_data_history" table
ALTER TABLE "document_data_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "note_history" table
ALTER TABLE "note_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "program_history" table
ALTER TABLE "program_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "entity_history" table
ALTER TABLE "entity_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "entity_type_history" table
ALTER TABLE "entity_type_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "action_plan_history" table
ALTER TABLE "action_plan_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "event_history" table
ALTER TABLE "event_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "users" table
ALTER TABLE "users" DROP COLUMN "api_token_created_by", DROP COLUMN "api_token_updated_by", DROP COLUMN "action_plan_created_by", DROP COLUMN "action_plan_updated_by", DROP COLUMN "contact_created_by", DROP COLUMN "contact_updated_by", DROP COLUMN "control_created_by", DROP COLUMN "control_updated_by", DROP COLUMN "control_objective_created_by", DROP COLUMN "control_objective_updated_by", DROP COLUMN "document_data_created_by", DROP COLUMN "document_data_updated_by", DROP COLUMN "email_verification_token_created_by", DROP COLUMN "email_verification_token_updated_by", DROP COLUMN "entity_created_by", DROP COLUMN "entity_updated_by", DROP COLUMN "entity_type_created_by", DROP COLUMN "entity_type_updated_by", DROP COLUMN "event_created_by", DROP COLUMN "event_updated_by", DROP COLUMN "file_created_by", DROP COLUMN "file_updated_by", DROP COLUMN "group_created_by", DROP COLUMN "group_updated_by", DROP COLUMN "group_membership_created_by", DROP COLUMN "group_membership_updated_by", DROP COLUMN "group_setting_created_by", DROP COLUMN "group_setting_updated_by", DROP COLUMN "hush_created_by", DROP COLUMN "hush_updated_by", DROP COLUMN "integration_created_by", DROP COLUMN "integration_updated_by", DROP COLUMN "internal_policy_created_by", DROP COLUMN "internal_policy_updated_by", DROP COLUMN "invite_created_by", DROP COLUMN "invite_updated_by", DROP COLUMN "narrative_created_by", DROP COLUMN "narrative_updated_by", DROP COLUMN "note_created_by", DROP COLUMN "note_updated_by", DROP COLUMN "org_membership_created_by", DROP COLUMN "org_membership_updated_by", DROP COLUMN "org_subscription_created_by", DROP COLUMN "org_subscription_updated_by", DROP COLUMN "organization_created_by", DROP COLUMN "organization_updated_by", DROP COLUMN "organization_setting_created_by", DROP COLUMN "organization_setting_updated_by", DROP COLUMN "password_reset_token_created_by", DROP COLUMN "password_reset_token_updated_by", DROP COLUMN "personal_access_token_created_by", DROP COLUMN "personal_access_token_updated_by", DROP COLUMN "procedure_created_by", DROP COLUMN "procedure_updated_by", DROP COLUMN "program_created_by", DROP COLUMN "program_updated_by", DROP COLUMN "program_membership_created_by", DROP COLUMN "program_membership_updated_by", DROP COLUMN "risk_created_by", DROP COLUMN "risk_updated_by", DROP COLUMN "standard_created_by", DROP COLUMN "standard_updated_by", DROP COLUMN "subcontrol_created_by", DROP COLUMN "subcontrol_updated_by", DROP COLUMN "subscriber_created_by", DROP COLUMN "subscriber_updated_by", DROP COLUMN "tfa_setting_created_by", DROP COLUMN "tfa_setting_updated_by", DROP COLUMN "task_created_by", DROP COLUMN "task_updated_by", DROP COLUMN "template_created_by", DROP COLUMN "template_updated_by", DROP COLUMN "user_setting_created_by", DROP COLUMN "user_setting_updated_by", DROP COLUMN "webauthn_created_by", DROP COLUMN "webauthn_updated_by", ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "file_history" table
ALTER TABLE "file_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "change_actors" table
ALTER TABLE "change_actors" DROP COLUMN "mapping_id", DROP COLUMN "deleted_at", DROP COLUMN "deleted_by_id";
-- Modify "narrative_history" table
ALTER TABLE "narrative_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "program_membership_history" table
ALTER TABLE "program_membership_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "user_history" table
ALTER TABLE "user_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "group_setting_history" table
ALTER TABLE "group_setting_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "template_history" table
ALTER TABLE "template_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "task_history" table
ALTER TABLE "task_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "hush_history" table
ALTER TABLE "hush_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "subcontrol_history" table
ALTER TABLE "subcontrol_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "integration_history" table
ALTER TABLE "integration_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "organization_history" table
ALTER TABLE "organization_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "risk_history" table
ALTER TABLE "risk_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "internal_policy_history" table
ALTER TABLE "internal_policy_history" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL;
-- Modify "api_tokens" table
ALTER TABLE "api_tokens" DROP COLUMN "action_plan_created_by_service", DROP COLUMN "action_plan_updated_by_service", DROP COLUMN "contact_created_by_service", DROP COLUMN "contact_updated_by_service", DROP COLUMN "control_created_by_service", DROP COLUMN "control_updated_by_service", DROP COLUMN "control_objective_created_by_service", DROP COLUMN "control_objective_updated_by_service", DROP COLUMN "document_data_created_by_service", DROP COLUMN "document_data_updated_by_service", DROP COLUMN "email_verification_token_created_by_service", DROP COLUMN "email_verification_token_updated_by_service", DROP COLUMN "entity_created_by_service", DROP COLUMN "entity_updated_by_service", DROP COLUMN "entity_type_created_by_service", DROP COLUMN "entity_type_updated_by_service", DROP COLUMN "event_created_by_service", DROP COLUMN "event_updated_by_service", DROP COLUMN "file_created_by_service", DROP COLUMN "file_updated_by_service", DROP COLUMN "group_created_by_service", DROP COLUMN "group_updated_by_service", DROP COLUMN "group_membership_created_by_service", DROP COLUMN "group_membership_updated_by_service", DROP COLUMN "group_setting_created_by_service", DROP COLUMN "group_setting_updated_by_service", DROP COLUMN "hush_created_by_service", DROP COLUMN "hush_updated_by_service", DROP COLUMN "integration_created_by_service", DROP COLUMN "integration_updated_by_service", DROP COLUMN "internal_policy_created_by_service", DROP COLUMN "internal_policy_updated_by_service", DROP COLUMN "invite_created_by_service", DROP COLUMN "invite_updated_by_service", DROP COLUMN "narrative_created_by_service", DROP COLUMN "narrative_updated_by_service", DROP COLUMN "note_created_by_service", DROP COLUMN "note_updated_by_service", DROP COLUMN "org_membership_created_by_service", DROP COLUMN "org_membership_updated_by_service", DROP COLUMN "org_subscription_created_by_service", DROP COLUMN "org_subscription_updated_by_service", DROP COLUMN "organization_created_by_service", DROP COLUMN "organization_updated_by_service", DROP COLUMN "organization_setting_created_by_service", DROP COLUMN "organization_setting_updated_by_service", DROP COLUMN "password_reset_token_created_by_service", DROP COLUMN "password_reset_token_updated_by_service", DROP COLUMN "personal_access_token_created_by_service", DROP COLUMN "personal_access_token_updated_by_service", DROP COLUMN "procedure_created_by_service", DROP COLUMN "procedure_updated_by_service", DROP COLUMN "program_created_by_service", DROP COLUMN "program_updated_by_service", DROP COLUMN "program_membership_created_by_service", DROP COLUMN "program_membership_updated_by_service", DROP COLUMN "risk_created_by_service", DROP COLUMN "risk_updated_by_service", DROP COLUMN "standard_created_by_service", DROP COLUMN "standard_updated_by_service", DROP COLUMN "subcontrol_created_by_service", DROP COLUMN "subcontrol_updated_by_service", DROP COLUMN "subscriber_created_by_service", DROP COLUMN "subscriber_updated_by_service", DROP COLUMN "tfa_setting_created_by_service", DROP COLUMN "tfa_setting_updated_by_service", DROP COLUMN "task_created_by_service", DROP COLUMN "task_updated_by_service", DROP COLUMN "template_created_by_service", DROP COLUMN "template_updated_by_service", DROP COLUMN "user_setting_created_by_service", DROP COLUMN "user_setting_updated_by_service", DROP COLUMN "webauthn_created_by_service", DROP COLUMN "webauthn_updated_by_service", ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "api_tokens_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "api_tokens_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "api_tokens_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "api_tokens_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Create index "api_tokens_created_by_service_id_key" to table: "api_tokens"
CREATE UNIQUE INDEX "api_tokens_created_by_service_id_key" ON "api_tokens" ("created_by_service_id");
-- Create index "api_tokens_updated_by_service_id_key" to table: "api_tokens"
CREATE UNIQUE INDEX "api_tokens_updated_by_service_id_key" ON "api_tokens" ("updated_by_service_id");
-- Modify "action_plans" table
ALTER TABLE "action_plans" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "action_plans_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "action_plans_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "contacts" table
ALTER TABLE "contacts" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "contacts_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "contacts_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "contacts_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "contacts_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "control_objectives" table
ALTER TABLE "control_objectives" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "control_objectives_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "control_objectives_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "control_objectives_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "control_objectives_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "controls" table
ALTER TABLE "controls" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "controls_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "controls_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "document_data" table
ALTER TABLE "document_data" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "document_data_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "document_data_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "document_data_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "document_data_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "email_verification_tokens" table
ALTER TABLE "email_verification_tokens" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "email_verification_tokens_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "email_verification_tokens_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "email_verification_tokens_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "email_verification_tokens_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "entities" table
ALTER TABLE "entities" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "entities_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entities_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "entity_types" table
ALTER TABLE "entity_types" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "entity_types_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entity_types_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entity_types_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "entity_types_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "events" table
ALTER TABLE "events" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "events_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "events_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "events_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "events_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "files" table
ALTER TABLE "files" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "files_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "files_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "group_memberships" table
ALTER TABLE "group_memberships" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "group_memberships_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "group_memberships_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "group_memberships_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "group_memberships_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "group_settings" table
ALTER TABLE "group_settings" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "group_settings_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "group_settings_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "group_settings_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "group_settings_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "groups" table
ALTER TABLE "groups" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "groups_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "groups_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "hushes" table
ALTER TABLE "hushes" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "hushes_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "hushes_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "hushes_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "hushes_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "integrations" table
ALTER TABLE "integrations" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "integrations_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "integrations_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "integrations_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "integrations_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "internal_policies" table
ALTER TABLE "internal_policies" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "internal_policies_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "internal_policies_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "invites" table
ALTER TABLE "invites" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "invites_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "invites_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "invites_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "invites_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "narratives" table
ALTER TABLE "narratives" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "narratives_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "narratives_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "narratives_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "narratives_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "notes" table
ALTER TABLE "notes" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "notes_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "notes_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "org_memberships" table
ALTER TABLE "org_memberships" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "org_memberships_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_memberships_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_memberships_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_memberships_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "org_subscriptions" table
ALTER TABLE "org_subscriptions" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "org_subscriptions_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_subscriptions_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_subscriptions_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "org_subscriptions_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "organization_settings" table
ALTER TABLE "organization_settings" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "organization_settings_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "organization_settings_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "organization_settings_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "organization_settings_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "organizations" table
ALTER TABLE "organizations" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "organizations_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "organizations_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "organizations_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "organizations_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "password_reset_tokens" table
ALTER TABLE "password_reset_tokens" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "password_reset_tokens_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "password_reset_tokens_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "password_reset_tokens_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "password_reset_tokens_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "personal_access_tokens" table
ALTER TABLE "personal_access_tokens" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "personal_access_tokens_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "personal_access_tokens_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "personal_access_tokens_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "personal_access_tokens_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "procedures" table
ALTER TABLE "procedures" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "procedures_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "procedures_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "program_memberships" table
ALTER TABLE "program_memberships" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "program_memberships_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "program_memberships_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "program_memberships_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "program_memberships_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "programs" table
ALTER TABLE "programs" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "programs_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "programs_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "risks" table
ALTER TABLE "risks" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "risks_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "risks_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "standards" table
ALTER TABLE "standards" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "standards_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "standards_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "standards_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "standards_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "subcontrols" table
ALTER TABLE "subcontrols" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "subcontrols_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subcontrols_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "subscribers" table
ALTER TABLE "subscribers" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "subscribers_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subscribers_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subscribers_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "subscribers_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "tasks" table
ALTER TABLE "tasks" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "tasks_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tasks_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "templates" table
ALTER TABLE "templates" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "templates_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "templates_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "templates_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "templates_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "tfa_settings" table
ALTER TABLE "tfa_settings" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "tfa_settings_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tfa_settings_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tfa_settings_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "tfa_settings_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "user_settings" table
ALTER TABLE "user_settings" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "user_settings_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "user_settings_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "user_settings_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "user_settings_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "webauthns" table
ALTER TABLE "webauthns" ADD COLUMN "created_by_user_id" character varying NULL, ADD COLUMN "updated_by_user_id" character varying NULL, ADD COLUMN "created_by_service_id" character varying NULL, ADD COLUMN "updated_by_service_id" character varying NULL, ADD CONSTRAINT "webauthns_api_tokens_created_by_service" FOREIGN KEY ("created_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "webauthns_api_tokens_updated_by_service" FOREIGN KEY ("updated_by_service_id") REFERENCES "api_tokens" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "webauthns_users_created_by_user" FOREIGN KEY ("created_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, ADD CONSTRAINT "webauthns_users_updated_by_user" FOREIGN KEY ("updated_by_user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
