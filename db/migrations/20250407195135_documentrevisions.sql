-- Create "document_revision_history" table
CREATE TABLE "document_revision_history" ("id" character varying NOT NULL, "history_time" timestamptz NOT NULL, "ref" character varying NULL, "operation" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "revision" character varying NULL DEFAULT 'v0.0.1', "name" character varying NOT NULL, "details" text NULL, "status" character varying NULL DEFAULT 'PENDING', "approval_date" timestamptz NULL, "submitted_by_id" character varying NULL, "approved_by_id" character varying NULL, "internal_policy_id" character varying NULL, "procedure_id" character varying NULL, "action_plan_id" character varying NULL, PRIMARY KEY ("id"));
-- Create index "documentrevisionhistory_history_time" to table: "document_revision_history"
CREATE INDEX "documentrevisionhistory_history_time" ON "document_revision_history" ("history_time");
-- Create "document_revisions" table
CREATE TABLE "document_revisions" ("id" character varying NOT NULL, "created_at" timestamptz NULL, "updated_at" timestamptz NULL, "created_by" character varying NULL, "updated_by" character varying NULL, "deleted_at" timestamptz NULL, "deleted_by" character varying NULL, "tags" jsonb NULL, "revision" character varying NULL DEFAULT 'v0.0.1', "name" character varying NOT NULL, "details" text NULL, "status" character varying NULL DEFAULT 'PENDING', "approval_date" timestamptz NULL, "action_plan_document_revisions" character varying NULL, "submitted_by_id" character varying NULL, "approved_by_id" character varying NULL, "internal_policy_id" character varying NULL, "procedure_id" character varying NULL, "action_plan_id" character varying NULL, "internal_policy_document_revisions" character varying NULL, "procedure_document_revisions" character varying NULL, PRIMARY KEY ("id"), CONSTRAINT "document_revisions_action_plans_action_plan" FOREIGN KEY ("action_plan_id") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "document_revisions_action_plans_document_revisions" FOREIGN KEY ("action_plan_document_revisions") REFERENCES "action_plans" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "document_revisions_internal_policies_document_revisions" FOREIGN KEY ("internal_policy_document_revisions") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "document_revisions_internal_policies_internal_policy" FOREIGN KEY ("internal_policy_id") REFERENCES "internal_policies" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "document_revisions_procedures_document_revisions" FOREIGN KEY ("procedure_document_revisions") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "document_revisions_procedures_procedure" FOREIGN KEY ("procedure_id") REFERENCES "procedures" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "document_revisions_users_approved_by" FOREIGN KEY ("approved_by_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "document_revisions_users_submitted_by" FOREIGN KEY ("submitted_by_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
