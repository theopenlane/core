extend type Procedure {
    """
    Indicates if this procedure has pending changes awaiting workflow approval
    """
    hasPendingWorkflow: Boolean!
    """
    Indicates if this procedure has any workflow history (completed or failed instances)
    """
    hasWorkflowHistory: Boolean!
    """
    Returns active workflow instances for this procedure (RUNNING or PAUSED)
    """
    activeWorkflowInstances: [WorkflowInstance!]!
    """
    Returns the workflow event timeline for this procedure across all workflow instances
    """
    workflowTimeline(
        after: Cursor
        first: Int
        before: Cursor
        last: Int
        orderBy: [WorkflowEventOrder!]
        where: WorkflowEventWhereInput
        includeEmitFailures: Boolean
    ): WorkflowEventConnection!
}

extend type Query {
    """
    Look up procedure by ID
    """
     procedure(
        """
        ID of the procedure
        """
        id: ID!
    ):  Procedure!
}



extend type Mutation{
    """
    Create a new procedure
    """
    createProcedure(
        """
        values of the procedure
        """
        input: CreateProcedureInput!
    ): ProcedureCreatePayload!
    """
    Create a new procedure via file upload
    """
    createUploadProcedure(
        """
        file containing values of the procedure
        """
        procedureFile: Upload!
        """
        ID of the owner organization
        """
        ownerID: ID
    ): ProcedureCreatePayload!
    """
    Create multiple new procedures
    """
    createBulkProcedure(
        """
        values of the procedure
        """
        input: [CreateProcedureInput!]
    ): ProcedureBulkCreatePayload!
    """
    Create multiple new procedures via file upload
    """
    createBulkCSVProcedure(
        """
        csv file containing values of the procedure
        """
        input: Upload!
    ): ProcedureBulkCreatePayload!
    """
    Update multiple existing procedures
    """
    updateBulkProcedure(
        """
        IDs of the procedures to update
        """
        ids: [ID!]!
        """
        values to update the procedures with
        """
        input: UpdateProcedureInput!
    ): ProcedureBulkUpdatePayload!
    """
    Update an existing procedure
    """
    updateProcedure(
        """
        ID of the procedure
        """
        id: ID!
        """
        New values for the procedure
        """
        input: UpdateProcedureInput!
        """
		file containing values of the procedure
		"""
		procedureFile: Upload
    ): ProcedureUpdatePayload!
    """
    Delete an existing procedure
    """
    deleteProcedure(
        """
        ID of the procedure
        """
        id: ID!
    ): ProcedureDeletePayload!
    """
    Delete multiple procedures
    """
    deleteBulkProcedure(
        """
        IDs of the procedures to delete
        """
        ids: [ID!]!
    ): ProcedureBulkDeletePayload!
    """
    Update multiple existing procedures via file upload
    """
    updateBulkCSVProcedure(
        """
        csv file containing values of the procedure, must include ID column
        """
        input: Upload!
    ): ProcedureBulkUpdatePayload!
}

"""
Return response for createProcedure mutation
"""
type ProcedureCreatePayload {
    """
    Created procedure
    """
    procedure: Procedure!
}

"""
Return response for updateProcedure mutation
"""
type ProcedureUpdatePayload {
    """
    Updated procedure
    """
    procedure: Procedure!
}

"""
Return response for deleteProcedure mutation
"""
type ProcedureDeletePayload {
    """
    Deleted procedure ID
    """
    deletedID: ID!
}

"""
Return response for createBulkProcedure mutation
"""
type ProcedureBulkCreatePayload {
    """
    Created procedures
    """
    procedures: [Procedure!]
}

"""
Return response for updateBulkProcedure mutation
"""
type ProcedureBulkUpdatePayload {
    """
    Updated procedures
    """
    procedures: [Procedure!]
    """
    IDs of the updated procedures
    """
    updatedIDs: [ID!]
}

"""
Return response for deleteBulkProcedure mutation
"""
type ProcedureBulkDeletePayload {
    """
    Deleted export IDs
    """
    deletedIDs: [ID!]!
}
