extend type Query {
    """
    Look up workflow proposal by ID
    """
    workflowProposal(
        """
        ID of the workflow proposal
        """
        id: ID!
    ): WorkflowProposal!
    """
    List workflow proposals for a specific object
    """
    workflowProposalsForObject(
        """
        Workflow object type (e.g. Control, InternalPolicy)
        """
        objectType: String!
        """
        ID of the object
        """
        objectID: ID!
        """
        Optional states to filter proposals by
        """
        includeStates: [WorkflowProposalState!]
    ): [WorkflowProposal!]!
}

extend type Mutation {
    """
    Update the proposed changes for a workflow proposal
    """
    updateWorkflowProposalChanges(
        input: UpdateWorkflowProposalChangesInput!
    ): WorkflowProposalUpdatePayload!
    """
    Submit a draft workflow proposal for approval
    """
    submitWorkflowProposal(
        """
        ID of the workflow proposal to submit
        """
        id: ID!
    ): WorkflowProposalSubmitPayload!
    """
    Withdraw a workflow proposal (mark as superseded)
    """
    withdrawWorkflowProposal(
        """
        ID of the workflow proposal to withdraw
        """
        id: ID!
        """
        Optional reason for withdrawal
        """
        reason: String
    ): WorkflowProposalWithdrawPayload!
}

"""
Input for updateWorkflowProposalChanges mutation
"""
input UpdateWorkflowProposalChangesInput {
    """
    ID of the workflow proposal to update
    """
    id: ID!
    """
    New proposed changes for the approval domain
    """
    changes: Map!
}

"""
Return response for updateWorkflowProposalChanges mutation
"""
type WorkflowProposalUpdatePayload {
    """
    Updated workflow proposal
    """
    workflowProposal: WorkflowProposal!
}

"""
Return response for submitWorkflowProposal mutation
"""
type WorkflowProposalSubmitPayload {
    """
    Submitted workflow proposal
    """
    workflowProposal: WorkflowProposal!
}

"""
Return response for withdrawWorkflowProposal mutation
"""
type WorkflowProposalWithdrawPayload {
    """
    Withdrawn workflow proposal
    """
    workflowProposal: WorkflowProposal!
}

extend type WorkflowProposal {
    """
    Precomputed proposal preview (diff + values) for approval workflows.
    Only available to editors/owners of the target object.
    """
    preview: WorkflowProposalPreview
}
